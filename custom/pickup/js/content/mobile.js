/*! For license information please see mobile.js.LICENSE.txt */
(()=>{var e={918:()=>{(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobile.njk"]={root:function(e,t,n,o,r){var i=0,s=0,a="";try{var l,c;a+='<form action="" class="pickupmobile-page">\n  <nav class="pickupmobile-top">\n    ',o.memberLookup(o.contextOrFrameLookup(t,n,"stack"),"previous")&&(a+='\n      <a class="btn btn-primary" role="button" pickupmobile-goto-previous>&larr; </a>\n      <div>\n        ',i=5,s=64,l=o.callWrap(o.memberLookup(o.memberLookup(o.contextOrFrameLookup(t,n,"stack"),"previous"),"displayStackValues"),'stack["previous"]["displayStackValues"]',t,[]),n.set("previousLabel",l,!0),n.topLevel&&t.setVariable("previousLabel",l),n.topLevel&&t.addExport("previousLabel",l),a+="\n        ",o.contextOrFrameLookup(t,n,"previousLabel")&&(a+="\n          ",a+=o.suppressValue(o.contextOrFrameLookup(t,n,"previousLabel"),e.opts.autoescape),a+="\n        "),a+="\n      </div>\n    "),a+="\n    ","init"!==o.memberLookup(o.contextOrFrameLookup(t,n,"stack"),"stateName")?(a+='\n      <a class="btn btn-primary" role="button" pickupmobile-reset-stack>',a+=o.suppressValue((i=12,s=84,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Return to Home"])),e.opts.autoescape),a+="</a>\n    "):(a+='\n      <a class="btn btn-primary" role="button" pickupmobile-return-dolibarr>',a+=o.suppressValue((i=14,s=88,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Return to Dolibarr"])),e.opts.autoescape),a+="</a>\n    "),a+='\n  </nav>\n\n  <h1 class="col-auto">',a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"label"),e.opts.autoescape),a+="</h1>\n  ",o.memberLookup(o.contextOrFrameLookup(t,n,"retrievedData"),"isMissingKey")?(a+='\n    <div class="alert alert-danger">\n      ',a+=o.suppressValue((i=21,s=18,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Error retrieving data. Missing key"])),e.opts.autoescape),a+="\n    </div>\n  "):o.memberLookup(o.contextOrFrameLookup(t,n,"retrievedData"),"isError")?(a+='\n    <div class="alert alert-danger">\n      ',a+=o.suppressValue((i=25,s=18,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Error retrieving data."])),e.opts.autoescape),a+='\n    </div>\n    <div class="row justify-content-center">\n      <a class="col-4 btn btn-primary" pickupmobile-reloaddata>\n        ',a+=o.suppressValue((i=29,s=20,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Try again"])),e.opts.autoescape),a+="\n      </a>\n    </div>\n  "):o.memberLookup(o.contextOrFrameLookup(t,n,"retrievedData"),"isPending")?(a+='\n    <div class="alert alert-secondary" pickupmobile-pending>\n      <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n      ',a+=o.suppressValue((i=35,s=18,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Waiting..."])),e.opts.autoescape),a+="\n    </div>\n  "):"unknown"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+='\n    <div class="alert alert-danger">\n      ',a+=o.suppressValue((i=39,s=18,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Not configured yet."])),e.opts.autoescape),a+="\n    </div>\n  "):"choice"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+="\n    ",(c=[]).push((function(t){e.getTemplate("mobilechoice.njk",!1,"mobile.njk",!1,(function(e,n){e?r(e):t(null,n)}))})),c.push((function(e,o){e.render(t.getVariables(),n,(function(e,t){e?r(e):o(null,t)}))})),c.push((function(e,t){a+=e,t(null)})),e.waterfall(c,(function(){a+="\n  "}))):"select"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+="\n    ",(c=[]).push((function(t){e.getTemplate("mobileselect.njk",!1,"mobile.njk",!1,(function(e,n){e?r(e):t(null,n)}))})),c.push((function(e,o){e.render(t.getVariables(),n,(function(e,t){e?r(e):o(null,t)}))})),c.push((function(e,t){a+=e,t(null)})),e.waterfall(c,(function(){a+="\n  "}))):"pick"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+="\n    ",(c=[]).push((function(t){e.getTemplate("mobilepick.njk",!1,"mobile.njk",!1,(function(e,n){e?r(e):t(null,n)}))})),c.push((function(e,o){e.render(t.getVariables(),n,(function(e,t){e?r(e):o(null,t)}))})),c.push((function(e,t){a+=e,t(null)})),e.waterfall(c,(function(){a+="\n  "}))):"form"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+="\n    ",(c=[]).push((function(t){e.getTemplate("mobileform.njk",!1,"mobile.njk",!1,(function(e,n){e?r(e):t(null,n)}))})),c.push((function(e,o){e.render(t.getVariables(),n,(function(e,t){e?r(e):o(null,t)}))})),c.push((function(e,t){a+=e,t(null)})),e.waterfall(c,(function(){a+="\n  "}))):"show"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+="\n    ",(c=[]).push((function(t){e.getTemplate("mobileshow.njk",!1,"mobile.njk",!1,(function(e,n){e?r(e):t(null,n)}))})),c.push((function(e,o){e.render(t.getVariables(),n,(function(e,t){e?r(e):o(null,t)}))})),c.push((function(e,t){a+=e,t(null)})),e.waterfall(c,(function(){a+="\n  "}))):"save"===o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"type")?(a+="\n    ",(c=[]).push((function(t){e.getTemplate("mobilesave.njk",!1,"mobile.njk",!1,(function(e,n){e?r(e):t(null,n)}))})),c.push((function(e,o){e.render(t.getVariables(),n,(function(e,t){e?r(e):o(null,t)}))})),c.push((function(e,t){a+=e,t(null)})),e.waterfall(c,(function(){a+="\n  "}))):(a+="\n    ",a+=o.suppressValue((i=54,s=16,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Don't know how to render this state."])),e.opts.autoescape),a+="\n  "),r(null,a+="\n</form>\n")}catch(e){r(o.handleError(e,i,s))}}},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobilechoice.njk"]={root:function(e,t,n,o,r){var i="";try{i+="<ul>\n",n=n.push();var s=o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"choices");if(s)for(var a=(s=o.fromIterator(s)).length,l=0;l<s.length;l++){var c=s[l];n.set("choice",c),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",a-l),n.set("loop.revindex0",a-l-1),n.set("loop.first",0===l),n.set("loop.last",l===a-1),n.set("loop.length",a),i+='\n  <li class="row justify-content-center mt-3">\n    <button class="col-4 btn btn-primary" pickupmobile-button="',i+=o.suppressValue(o.memberLookup(c,"value"),e.opts.autoescape),i+='">',i+=o.suppressValue(o.memberLookup(c,"label"),e.opts.autoescape),i+="</button>\n  </li>\n"}n=n.pop(),r(null,i+="\n</ul>\n")}catch(e){r(o.handleError(e,0,0))}}},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobileform.njk"]={root:function(e,t,n,o,r){var i=0,s=0,a="";try{a+='<div class="pickupmobile-scrollzone">\n  ',n=n.push();var l=o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"fields");if(l)for(var c=(l=o.fromIterator(l)).length,u=0;u<l.length;u++){var p,h,f,d=l[u];if(n.set("field",d),n.set("loop.index",u+1),n.set("loop.index0",u),n.set("loop.revindex",c-u),n.set("loop.revindex0",c-u-1),n.set("loop.first",0===u),n.set("loop.last",u===c-1),n.set("loop.length",c),a+="\n    ",o.contextOrFrameLookup(t,n,"useDefaultValues")?(a+="\n      ",p=o.memberLookup(d,"default"),n.set("currentValue",p,!0),n.topLevel&&t.setVariable("currentValue",p),n.topLevel&&t.addExport("currentValue",p),a+="\n    "):(a+="\n      ",i=5,s=42,h=o.callWrap(o.memberLookup(o.contextOrFrameLookup(t,n,"stack"),"getValue"),'stack["getValue"]',t,[o.memberLookup(d,"name")]),n.set("currentValue",h,!0),n.topLevel&&t.setVariable("currentValue",h),n.topLevel&&t.addExport("currentValue",h),a+="\n    "),a+="\n    ",i=7,s=41,f=o.callWrap(o.memberLookup(o.contextOrFrameLookup(t,n,"stack"),"isValueInvalid"),'stack["isValueInvalid"]',t,[o.memberLookup(d,"name")]),n.set("invalid",f,!0),n.topLevel&&t.setVariable("invalid",f),n.topLevel&&t.addExport("invalid",f),a+="\n    ","hidden"===o.memberLookup(d,"type"))a+='\n      <input type="hidden"\n        name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n        value="',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"currentValue"),e.opts.autoescape),a+='"\n      />\n    ';else{if(a+='\n      <div class="row mb-3">\n        <label\n          class="col-sm-2 col-form-label ',o.memberLookup(d,"mandatory")&&(a+="pickupmobile-mandatory"),a+='"\n          for="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n        >\n          ',a+=o.suppressValue(o.memberLookup(d,"label"),e.opts.autoescape),a+='\n        </label>\n\n        <div class="col-sm-10">\n          ',o.memberLookup(d,"notes")&&o.memberLookup(o.memberLookup(d,"notes"),"label")){a+="\n            ",n=n.push();var m=(i=24,s=54,o.callWrap(o.memberLookup(o.memberLookup(o.memberLookup(d,"notes"),"label"),"split"),'field["notes"]["label"]["split"]',t,["\n"]));if(m)for(var v=(m=o.fromIterator(m)).length,g=0;g<m.length;g++){var y=m[g];n.set("noteLine",y),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",v-g),n.set("loop.revindex0",v-g-1),n.set("loop.first",0===g),n.set("loop.last",g===v-1),n.set("loop.length",v),a+='\n              <div class="form-text">',a+=o.suppressValue(y,e.opts.autoescape),a+="</div>\n            "}n=n.pop(),a+="\n          "}if(a+="\n          ","varchar"===o.memberLookup(d,"type")){if(a+='\n            <input type="text"\n              name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n              value="',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"currentValue"),e.opts.autoescape),a+='"\n              class="form-control ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n              ',o.memberLookup(d,"maxLength")&&(a+=' maxlength="',a+=o.suppressValue(o.memberLookup(d,"maxLength"),e.opts.autoescape),a+='" '),a+="\n              ",o.memberLookup(d,"suggestions")&&(a+=' autocomplete="off" list="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='.suggestions" '),a+="\n            />\n            ",o.memberLookup(d,"suggestions")){a+='\n              <datalist id="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='.suggestions">\n              ',n=n.push();var b=o.memberLookup(d,"suggestions");if(b)for(var _=(b=o.fromIterator(b)).length,k=0;k<b.length;k++){var w=b[k];n.set("suggestion",w),n.set("loop.index",k+1),n.set("loop.index0",k),n.set("loop.revindex",_-k),n.set("loop.revindex0",_-k-1),n.set("loop.first",0===k),n.set("loop.last",k===_-1),n.set("loop.length",_),a+='\n                <option value="',a+=o.suppressValue(w,e.opts.autoescape),a+='">\n              '}n=n.pop(),a+="\n              </datalist>\n            "}a+="\n          "}else if("integer"===o.memberLookup(d,"type")||"float"===o.memberLookup(d,"type"))a+='\n            <input type="number"\n              name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n              value="',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"currentValue"),e.opts.autoescape),a+='"\n              class="form-control ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n              min="',a+=o.suppressValue(o.memberLookup(d,"min"),e.opts.autoescape),a+='"\n              max="',a+=o.suppressValue(o.memberLookup(d,"max"),e.opts.autoescape),a+='"\n              ',"float"===o.memberLookup(d,"type")&&(a+='step="',a+=o.suppressValue(o.memberLookup(d,"step"),e.opts.autoescape),a+='"'),a+="\n            />\n          ";else if("text"===o.memberLookup(d,"type"))a+='\n            <textarea\n              name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n              class="form-control ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n            >',a+=o.suppressValue(e.getFilter("safe").call(t,e.getFilter("striptags").call(t,o.contextOrFrameLookup(t,n,"currentValue"),!0)),e.opts.autoescape),a+="</textarea>\n          ";else if("select"===o.memberLookup(d,"type")){a+='\n            <select\n              name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n              class="form-select ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n              ',o.memberLookup(d,"readonly")&&(a+='disabled="disabled"'),a+="\n            >\n            ",n=n.push();var x=o.memberLookup(o.contextOrFrameLookup(t,n,"filteredOptions"),o.memberLookup(d,"name"));if(x)for(var E=(x=o.fromIterator(x)).length,O=0;O<x.length;O++){var L=x[O];n.set("option",L),n.set("loop.index",O+1),n.set("loop.index0",O),n.set("loop.revindex",E-O),n.set("loop.revindex0",E-O-1),n.set("loop.first",0===O),n.set("loop.last",O===E-1),n.set("loop.length",E),a+='\n              <option value="',a+=o.suppressValue(o.memberLookup(L,"value"),e.opts.autoescape),a+='" ',o.memberLookup(L,"value")===o.contextOrFrameLookup(t,n,"currentValue")&&(a+='selected="selected"'),a+=">\n                ",a+=o.suppressValue(o.memberLookup(L,"label"),e.opts.autoescape),a+="\n              </option>\n            "}n=n.pop(),a+="\n            </select>\n            ",o.memberLookup(d,"readonly")&&(a+='\n              <input type="hidden" name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='" value="',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"currentValue"),e.opts.autoescape),a+='">\n            '),a+="\n          "}else if("radio"===o.memberLookup(d,"type")){a+="\n            ",n=n.push();var T=o.memberLookup(o.contextOrFrameLookup(t,n,"filteredOptions"),o.memberLookup(d,"name"));if(T)for(var S=(T=o.fromIterator(T)).length,A=0;A<T.length;A++){var C=T[A];n.set("option",C),n.set("loop.index",A+1),n.set("loop.index0",A),n.set("loop.revindex",S-A),n.set("loop.revindex0",S-A-1),n.set("loop.first",0===A),n.set("loop.last",A===S-1),n.set("loop.length",S),a+='\n              <label class="form-check-label">\n                <input name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n                  type="radio"\n                  value="',a+=o.suppressValue(o.memberLookup(C,"value"),e.opts.autoescape),a+='"\n                  class="form-check-input ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n                  ',o.contextOrFrameLookup(t,n,"currentValue")===o.memberLookup(C,"value")&&(a+='checked="checked"'),a+="\n                />\n                ",a+=o.suppressValue(o.memberLookup(C,"label"),e.opts.autoescape),a+="\n              </label>\n            "}n=n.pop(),a+="\n          "}else"boolean"===o.memberLookup(d,"type")?(a+='\n            <input type="checkbox"\n              name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n              value="1"\n              class="form-check-input ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n              ',"1"===o.contextOrFrameLookup(t,n,"currentValue")&&(a+='checked="checked"'),a+="\n            />\n          "):"date"===o.memberLookup(d,"type")&&(a+='\n            <input type="date"\n              name="',a+=o.suppressValue(o.memberLookup(d,"name"),e.opts.autoescape),a+='"\n              value="',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"currentValue"),e.opts.autoescape),a+='"\n              class="form-control ',o.contextOrFrameLookup(t,n,"invalid")&&(a+="is-invalid"),a+='"\n              ',o.memberLookup(d,"min")&&(a+=' min="',a+=o.suppressValue(o.memberLookup(d,"min"),e.opts.autoescape),a+='" '),a+="\n              ",o.memberLookup(d,"max")&&(a+=' max="',a+=o.suppressValue(o.memberLookup(d,"max"),e.opts.autoescape),a+='" '),a+="\n            />\n          ");a+="\n        </div>\n\n        ",o.contextOrFrameLookup(t,n,"invalid")&&(a+='\n          <div class="invalid-feedback">\n            ',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"invalid"),e.opts.autoescape),a+="\n          </div>\n        "),a+="\n      </div>\n    "}a+="\n  "}n=n.pop(),a+='\n</div>\n\n<nav class="">\n  <input type="submit" value="',a+=o.suppressValue((i=113,s=42,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Ok"])),e.opts.autoescape),r(null,a+='" class="btn btn-primary" />\n</nav>\n')}catch(e){r(o.handleError(e,i,s))}}},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobilepick.njk"]={root:function(e,t,n,o,r){var i=0,s=0,a="";try{a+='<div class="pickupmobile-scrollzone">\n  <table class="table table-striped table-bordered"><tbody>\n    ',n=n.push();var l,c=o.memberLookup(o.contextOrFrameLookup(t,n,"formInfos"),"fieldsInfos");if(c)for(var u=(c=o.fromIterator(c)).length,p=0;p<c.length;p++){var h,f=c[p];n.set("fieldInfo",f),n.set("loop.index",p+1),n.set("loop.index0",p),n.set("loop.revindex",u-p),n.set("loop.revindex0",u-p-1),n.set("loop.first",0===p),n.set("loop.last",p===u-1),n.set("loop.length",u),a+="\n      ",h=o.memberLookup(f,"field"),n.set("field",h,!0),n.topLevel&&t.setVariable("field",h),n.topLevel&&t.addExport("field",h),a+='\n      <tr>\n        <td>\n          <label for="',a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"field"),"name"),e.opts.autoescape),a+='">\n            ',a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"field"),"label"),e.opts.autoescape),a+='\n          </label>\n        </td>\n        <td>\n          <select class="form-select" pickupmobile-select2 pickupmobile-pick-select name="',a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"field"),"name"),e.opts.autoescape),a+='" ',o.memberLookup(f,"disabled")&&(a+='disabled="disabled"'),a+=">\n            ",n=n.push();var d=o.memberLookup(f,"options");if(d)for(var m=(d=o.fromIterator(d)).length,v=0;v<d.length;v++){var g=d[v];n.set("option",g),n.set("loop.index",v+1),n.set("loop.index0",v),n.set("loop.revindex",m-v),n.set("loop.revindex0",m-v-1),n.set("loop.first",0===v),n.set("loop.last",v===m-1),n.set("loop.length",m),a+='\n              <option value="',a+=o.suppressValue(o.memberLookup(g,"value"),e.opts.autoescape),a+='" ',o.memberLookup(g,"selected")&&(a+='selected="selected"'),a+=">\n                ",a+=o.suppressValue(o.memberLookup(g,"label"),e.opts.autoescape),a+="\n              </option>\n            "}n=n.pop(),a+="\n          </select>\n        </td>\n      </tr>\n    "}if(n=n.pop(),a+="\n  </tbody></table>\n  ",l=o.memberLookup(o.contextOrFrameLookup(t,n,"formInfos"),"pickedItems"),n.set("pickedItems",l,!0),n.topLevel&&t.setVariable("pickedItems",l),n.topLevel&&t.addExport("pickedItems",l),a+="\n  ",o.memberLookup(o.contextOrFrameLookup(t,n,"pickedItems"),"length")){if(a+='\n    <hr>\n    <div class="alert alert-info">\n      ',1===o.memberLookup(o.contextOrFrameLookup(t,n,"pickedItems"),"length")){a+="\n        ",n=n.push();var y=o.contextOrFrameLookup(t,n,"pickedItems");if(y)for(var b=(y=o.fromIterator(y)).length,_=0;_<y.length;_++){var k=y[_];n.set("item",k),n.set("loop.index",_+1),n.set("loop.index0",_),n.set("loop.revindex",b-_),n.set("loop.revindex0",b-_-1),n.set("loop.first",0===_),n.set("loop.last",_===b-1),n.set("loop.length",b),a+='\n          <a class="btn btn-primary"\n            pickupmobile-pick-pick="',a+=o.suppressValue(o.memberLookup(k,o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"primaryKey")),e.opts.autoescape),a+='"\n          >\n            ',a+=o.suppressValue((i=31,s=24,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Pick this one"])),e.opts.autoescape),a+="\n          </a>\n        "}n=n.pop(),a+="\n      "}else{a+="\n        <p>",a+=o.suppressValue((i=35,s=23,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["There are {items} items that match your selection.",{items:o.memberLookup(o.contextOrFrameLookup(t,n,"pickedItems"),"length")}])),e.opts.autoescape),a+='</p>\n        <ul class="list-group">\n        ',n=n.push();var w=o.contextOrFrameLookup(t,n,"pickedItems");if(w)for(var x=(w=o.fromIterator(w)).length,E=0;E<w.length;E++){var O=w[E];n.set("item",O),n.set("loop.index",E+1),n.set("loop.index0",E),n.set("loop.revindex",x-E),n.set("loop.revindex0",x-E-1),n.set("loop.first",0===E),n.set("loop.last",E===x-1),n.set("loop.length",x),a+='\n          <li class="list-group-item">\n            ',a+=o.suppressValue(o.memberLookup(O,o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"primaryKey")),e.opts.autoescape),a+='.\n            <a class="btn btn-primary"\n              pickupmobile-pick-pick="',a+=o.suppressValue(o.memberLookup(O,o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"primaryKey")),e.opts.autoescape),a+='"\n            >\n              ',a+=o.suppressValue((i=43,s=26,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Pick this one"])),e.opts.autoescape),a+="\n            </a>\n          </li>\n        "}n=n.pop(),a+="\n        </ul>\n      "}a+='\n      <a class="btn btn-danger" role="button" pickupmobile-pick-empty>\n          ',a+=o.suppressValue((i=50,s=22,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Empty the selection"])),e.opts.autoescape),a+="\n      </a>\n    </div>\n  "}a+='\n</div>\n\n<nav class="">\n  ',o.memberLookup(o.contextOrFrameLookup(t,n,"formInfos"),"creation")&&(a+='\n    <a class="btn btn-primary" role="button" pickupmobile-pick-create>\n      ',o.memberLookup(o.contextOrFrameLookup(t,n,"formInfos"),"creationLabel")?(a+="\n        ",a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"formInfos"),"creationLabel"),e.opts.autoescape),a+="\n      "):(a+="\n        ",a+=o.suppressValue((i=62,s=20,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Create a new one"])),e.opts.autoescape),a+="\n      "),a+="\n    </a>\n  "),a+='\n  <a class="btn btn-secondary" role="button" pickupmobile-reloaddata>',a+=o.suppressValue((i=66,s=81,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Reload"])),e.opts.autoescape),r(null,a+="</a>\n</nav>\n")}catch(e){r(o.handleError(e,i,s))}}},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobilesave.njk"]={root:function(e,t,n,o,r){var i=0,s=0,a="";try{var l=o.makeMacro(["field","data"],[],(function(e,t,r){var i=n;return n=new o.Frame,r=r||{},Object.prototype.hasOwnProperty.call(r,"caller")&&n.set("caller",r.caller),n.set("field",e),n.set("data",t),n=i,new o.SafeString("\n  \n")}));t.addExport("printFieldContent"),t.setVariable("printFieldContent",l),a+='\n<div class="alert alert-',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"alertMessageLevel"),e.opts.autoescape),a+='">\n  ',a+=o.suppressValue(o.contextOrFrameLookup(t,n,"alertMessageText"),e.opts.autoescape),a+='\n</div>\n<div class="pickupmobile-scrollzone">\n  <table class="table table-striped table-bordered">\n    <tbody>\n    ',n=n.push();var c=o.contextOrFrameLookup(t,n,"stackValues");if(c)for(var u=(c=o.fromIterator(c)).length,p=0;p<c.length;p++){var h,f=c[p];n.set("sv",f),n.set("loop.index",p+1),n.set("loop.index0",p),n.set("loop.revindex",u-p),n.set("loop.revindex0",u-p-1),n.set("loop.first",0===p),n.set("loop.last",p===u-1),n.set("loop.length",u),a+="\n      ",i=10,s=37,h=o.callWrap(o.contextOrFrameLookup(t,n,"getDisplayStackValue"),"getDisplayStackValue",t,[f]),n.set("s",h,!0),n.topLevel&&t.setVariable("s",h),n.topLevel&&t.addExport("s",h),a+="\n      ",o.contextOrFrameLookup(t,n,"s")&&(a+="\n        <tr>\n          <th>",a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"s"),"label"),e.opts.autoescape),a+="</th>\n          <td>",a+=o.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("escape").call(t,e.getFilter("trim").call(t,e.getFilter("string").call(t,o.memberLookup(o.contextOrFrameLookup(t,n,"s"),"display"))))),e.opts.autoescape),a+="</td>\n        </tr>\n      "),a+="\n    "}n=n.pop(),a+='\n    </tbody>\n  </table>\n</div>\n\n<div class="alert alert-danger d-none" pickupmobile-save-error-container></div>\n<nav class="">\n  <input type="submit" value="',a+=o.suppressValue((i=24,s=42,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Save"])),e.opts.autoescape),r(null,a+='" class="btn btn-primary"/>\n</nav>\n')}catch(e){r(o.handleError(e,i,s))}}},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobileselect.njk"]={root:function(e,t,n,o,r){var i="";try{i+='<select name="" class="form-select">\n  <option value=""></option>\n  ',n=n.push();var s=o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"options");if(s)for(var a=(s=o.fromIterator(s)).length,l=0;l<s.length;l++){var c=s[l];n.set("option",c),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",a-l),n.set("loop.revindex0",a-l-1),n.set("loop.first",0===l),n.set("loop.last",l===a-1),n.set("loop.length",a),i+='\n    <option value="',i+=o.suppressValue(o.memberLookup(c,"value"),e.opts.autoescape),i+='">',i+=o.suppressValue(o.memberLookup(c,"label"),e.opts.autoescape),i+="</option>\n  "}n=n.pop(),r(null,i+="\n</select>\n")}catch(e){r(o.handleError(e,0,0))}}},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["mobileshow.njk"]={root:function(e,t,n,o,r){var i=0,s=0,a="";try{a+='<div class="pickupmobile-scrollzone">\n  ';var l=o.makeMacro(["field","data"],[],(function(r,a,l){var c=n;n=new o.Frame,l=l||{},Object.prototype.hasOwnProperty.call(l,"caller")&&n.set("caller",l.caller),n.set("field",r),n.set("data",a);var u="";if(u+="\n    ","varchar"===o.memberLookup(r,"type")||"integer"===o.memberLookup(r,"type")||"float"===o.memberLookup(r,"type"))u+="\n      ",o.memberLookup(r,"goto")&&(u+='\n        <a\n          pickupmobile-show-goto="',u+=o.suppressValue(o.memberLookup(r,"goto"),e.opts.autoescape),u+='"\n          pickupmobile-show-data="',u+=o.suppressValue(e.getFilter("dump").call(t,a),e.opts.autoescape),u+='"\n          pickupmobile-show-push-to-stack="',u+=o.suppressValue(e.getFilter("dump").call(t,o.memberLookup(r,"pushToStack")),e.opts.autoescape),u+='"\n        >\n      '),u+="\n      ",u+=o.suppressValue(o.memberLookup(a,o.memberLookup(r,"name")),e.opts.autoescape),u+="\n      ",o.memberLookup(r,"goto")&&(u+="</a>"),u+="\n    ";else if("text"===o.memberLookup(r,"type"))u+="\n      ",u+=o.suppressValue(e.getFilter("safe").call(t,o.memberLookup(a,o.memberLookup(r,"name"))),e.opts.autoescape),u+="\n    ";else if("boolean"===o.memberLookup(r,"type"))u+='\n      <input type="checkbox" disabled="disabled" ',o.memberLookup(a,o.memberLookup(r,"name"))&&(u+='checked="checked"'),u+=">\n    ";else if("concatenate"===o.memberLookup(r,"type")){u+="\n      ",n=n.push();var p=o.memberLookup(r,"fields");if(p)for(var h=(p=o.fromIterator(p)).length,f=0;f<p.length;f++){var d,m=p[f];n.set("subfield",m),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",h-f),n.set("loop.revindex0",h-f-1),n.set("loop.first",0===f),n.set("loop.last",f===h-1),n.set("loop.length",h),u+="\n        ",i=18,s=53,d=o.callWrap(o.contextOrFrameLookup(t,n,"printFieldContent"),"printFieldContent",t,[m,a]),n.set("tmpSubFieldContent",d,!0),n.topLevel&&t.setVariable("tmpSubFieldContent",d),n.topLevel&&t.addExport("tmpSubFieldContent",d),u+="\n        ",u+=o.suppressValue(e.getFilter("safe").call(t,o.contextOrFrameLookup(t,n,"tmpSubFieldContent")),e.opts.autoescape),u+="\n        ",o.memberLookup(r,"ignoreEmpty")&&(i=20,s=50,!o.callWrap(o.memberLookup(/\S/,"test"),'/S/["test"]',t,[o.contextOrFrameLookup(t,n,"tmpSubFieldContent")]))||(u+="\n          ",u+=o.suppressValue(e.getFilter("safe").call(t,o.memberLookup(r,"separatorHTML")),e.opts.autoescape),u+="\n        "),u+="\n      "}n=n.pop(),u+="\n    "}else"edit"===o.memberLookup(r,"type")?(u+="\n      ",o.memberLookup(r,"disabledFunc")&&(i=25,s=53,o.callWrap(o.memberLookup(r,"disabledFunc"),'field["disabledFunc"]',t,[a]))?(u+='\n        <a\n          class="btn btn-secondary disabled" role="button"\n        >\n          ',u+=o.suppressValue(o.memberLookup(r,"label"),e.opts.autoescape),u+="\n        </a>\n      "):(u+='\n        <a\n          class="btn btn-primary" role="button"\n          pickupmobile-show-goto="',u+=o.suppressValue(o.memberLookup(r,"goto"),e.opts.autoescape),u+='"\n          pickupmobile-show-data="',u+=o.suppressValue(e.getFilter("dump").call(t,a),e.opts.autoescape),u+='"\n          pickupmobile-show-push-to-stack="',u+=o.suppressValue(e.getFilter("dump").call(t,o.memberLookup(r,"pushToStack")),e.opts.autoescape),u+='"\n        >\n          ',u+=o.suppressValue(o.memberLookup(r,"label"),e.opts.autoescape),u+="\n        </a>\n      "),u+="\n    "):"action"===o.memberLookup(r,"type")?(u+='\n      <a\n        class="btn btn-primary" role="button"\n        pickupmobile-show-action="',u+=o.suppressValue(o.memberLookup(r,"name"),e.opts.autoescape),u+='"\n        pickupmobile-show-data="',u+=o.suppressValue(e.getFilter("dump").call(t,a),e.opts.autoescape),u+='"\n        ',o.memberLookup(r,"iconTitle")&&(u+='title="',u+=o.suppressValue(o.memberLookup(r,"iconTitle"),e.opts.autoescape),u+='"'),u+="\n      >\n        ",o.memberLookup(r,"icon")&&(u+="\n          ",u+=o.suppressValue(e.getFilter("safe").call(t,o.memberLookup(r,"icon")),e.opts.autoescape),u+="\n        "),u+="\n        ",u+=o.suppressValue(o.memberLookup(r,"label"),e.opts.autoescape),u+="\n      </a>\n    "):"lines"===o.memberLookup(r,"type")&&(u+="\n      ",u+=o.suppressValue((i=54,s=19,o.callWrap(o.contextOrFrameLookup(t,n,"printLines"),"printLines",t,[o.memberLookup(r,"lines"),o.memberLookup(a,o.memberLookup(r,"name"))])),e.opts.autoescape),u+="\n    ");return u+="\n  ",n=c,new o.SafeString(u)}));t.addExport("printFieldContent"),t.setVariable("printFieldContent",l),a+="\n  ";var c=o.makeMacro(["fields","lines"],[],(function(r,a,l){var c=n;n=new o.Frame,l=l||{},Object.prototype.hasOwnProperty.call(l,"caller")&&n.set("caller",l.caller),n.set("fields",r),n.set("lines",a);var u="";u+="\n    ",n.set("isLineTotals",0,!0),n.topLevel&&t.setVariable("isLineTotals",0),n.topLevel&&t.addExport("isLineTotals",0),u+='\n    <table class="table">\n      <thead>\n        <tr>\n          ',n=n.push();var p=r;if(p)for(var h=(p=o.fromIterator(p)).length,f=0;f<p.length;f++){var d=p[f];n.set("field",d),n.set("loop.index",f+1),n.set("loop.index0",f),n.set("loop.revindex",h-f),n.set("loop.revindex0",h-f-1),n.set("loop.first",0===f),n.set("loop.last",f===h-1),n.set("loop.length",h),u+="\n            ",o.memberLookup(d,"total")&&(n.set("isLineTotals",1,!0),n.topLevel&&t.setVariable("isLineTotals",1),n.topLevel&&t.addExport("isLineTotals",1)),u+="\n            <th>","edit"!==o.memberLookup(d,"type")&&(u+=o.suppressValue(o.memberLookup(d,"label"),e.opts.autoescape)),u+="</th>\n          "}u+="\n        </tr>\n      </thead>\n      <tbody>\n        ",n=(n=n.pop()).push();var m=a;if(m)for(var v=(m=o.fromIterator(m)).length,g=0;g<m.length;g++){var y=m[g];n.set("line",y),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",v-g),n.set("loop.revindex0",v-g-1),n.set("loop.first",0===g),n.set("loop.last",g===v-1),n.set("loop.length",v),u+="\n          <tr>\n            ",n=n.push();var b=r;if(b)for(var _=(b=o.fromIterator(b)).length,k=0;k<b.length;k++){var w=b[k];n.set("field",w),n.set("loop.index",k+1),n.set("loop.index0",k),n.set("loop.revindex",_-k),n.set("loop.revindex0",_-k-1),n.set("loop.first",0===k),n.set("loop.last",k===_-1),n.set("loop.length",_),u+="\n              <td>",u+=o.suppressValue((i=72,s=38,o.callWrap(o.contextOrFrameLookup(t,n,"printFieldContent"),"printFieldContent",t,[w,y])),e.opts.autoescape),u+="</td>\n            "}n=n.pop(),u+="\n          </tr>\n        "}if(n=n.pop(),u+="\n      </tbody>\n      ",o.contextOrFrameLookup(t,n,"isLineTotals")){u+="\n        <tbody>\n          ",n=n.push();var x=r;if(x)for(var E=(x=o.fromIterator(x)).length,O=0;O<x.length;O++){var L=x[O];if(n.set("field",L),n.set("loop.index",O+1),n.set("loop.index0",O),n.set("loop.revindex",E-O),n.set("loop.revindex0",E-O-1),n.set("loop.first",0===O),n.set("loop.last",O===E-1),n.set("loop.length",E),u+="\n            <td>\n              ",o.memberLookup(L,"total")){if(u+="\n                ",n.set("lineTotal",0,!0),n.topLevel&&t.setVariable("lineTotal",0),n.topLevel&&t.addExport("lineTotal",0),u+="\n                ","integer"===o.memberLookup(L,"type")){u+="\n                  ",n=n.push();var T=a;if(T)for(var S=(T=o.fromIterator(T)).length,A=0;A<T.length;A++){var C,N=T[A];n.set("line",N),n.set("loop.index",A+1),n.set("loop.index0",A),n.set("loop.revindex",S-A),n.set("loop.revindex0",S-A-1),n.set("loop.first",0===A),n.set("loop.last",A===S-1),n.set("loop.length",S),u+="\n                    ",C=o.contextOrFrameLookup(t,n,"lineTotal")+o.memberLookup(N,o.memberLookup(L,"name")),n.set("lineTotal",C,!0),n.topLevel&&t.setVariable("lineTotal",C),n.topLevel&&t.addExport("lineTotal",C),u+="\n                  "}n=n.pop(),u+="\n                "}else if("boolean"===o.memberLookup(L,"type")){u+="\n                  ",n=n.push();var F=a;if(F)for(var I=(F=o.fromIterator(F)).length,j=0;j<F.length;j++){var P,D,V=F[j];n.set("line",V),n.set("loop.index",j+1),n.set("loop.index0",j),n.set("loop.revindex",I-j),n.set("loop.revindex0",I-j-1),n.set("loop.first",0===j),n.set("loop.last",j===I-1),n.set("loop.length",I),u+="\n                    ",o.memberLookup(V,o.memberLookup(L,"name"))&&(u+="\n                      ",o.memberLookup(L,"totalQtyFieldName")?(u+="\n                        ",P=o.contextOrFrameLookup(t,n,"lineTotal")+o.memberLookup(V,o.memberLookup(L,"totalQtyFieldName")),n.set("lineTotal",P,!0),n.topLevel&&t.setVariable("lineTotal",P),n.topLevel&&t.addExport("lineTotal",P),u+="\n                      "):(u+="\n                        ",D=o.contextOrFrameLookup(t,n,"lineTotal")+1,n.set("lineTotal",D,!0),n.topLevel&&t.setVariable("lineTotal",D),n.topLevel&&t.addExport("lineTotal",D),u+="\n                      "),u+="\n                    "),u+="\n                  "}n=n.pop(),u+="\n                "}u+="\n                ",u+=o.suppressValue(o.contextOrFrameLookup(t,n,"lineTotal"),e.opts.autoescape),u+="\n              "}u+="\n            </td>\n          "}n=n.pop(),u+="\n        </tbody>\n      "}return u+="\n    </table>\n  ",n=c,new o.SafeString(u)}));t.addExport("printLines"),t.setVariable("printLines",c),a+='\n  <table class="table table-striped table-bordered"><tbody>\n    ',n=n.push();var u=o.contextOrFrameLookup(t,n,"fields");if(u)for(var p=(u=o.fromIterator(u)).length,h=0;h<u.length;h++){var f=u[h];n.set("field",f),n.set("loop.index",h+1),n.set("loop.index0",h),n.set("loop.revindex",p-h),n.set("loop.revindex0",p-h-1),n.set("loop.first",0===h),n.set("loop.last",h===p-1),n.set("loop.length",p),a+="\n      <tr>\n        <td>\n          <label>\n            ","edit"!==o.memberLookup(f,"type")&&(a+=o.suppressValue(o.memberLookup(f,"label"),e.opts.autoescape)),a+="\n          </label>\n        </td>\n        <td>\n          ",a+=o.suppressValue((i=115,s=30,o.callWrap(l,"printFieldContent",t,[f,o.memberLookup(o.contextOrFrameLookup(t,n,"data"),"data")])),e.opts.autoescape),a+="\n        </td>\n      </tr>\n    "}n=n.pop(),a+='\n  </tbody></table>\n</div>\n\n<nav class="">\n  ',o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"addGoto")&&(a+='\n    <a class="btn btn-primary" role="button" pickupmobile-show-add>\n      ',o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"addLabel")?(a+="\n        ",a+=o.suppressValue(o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"addLabel"),e.opts.autoescape),a+="\n      "):(a+="\n        ",a+=o.suppressValue((i=128,s=20,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Add"])),e.opts.autoescape),a+="\n      "),a+="\n    </a>\n  "),a+="\n  ",o.memberLookup(o.contextOrFrameLookup(t,n,"currentState"),"okGoto")&&(a+='\n    <a class="btn btn-primary" role="button" pickupmobile-show-ok>',a+=o.suppressValue((i=133,s=78,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Ok"])),e.opts.autoescape),a+="\n  "),a+='\n  <a class="btn btn-secondary" role="button" pickupmobile-reloaddata>',a+=o.suppressValue((i=135,s=81,o.callWrap(o.contextOrFrameLookup(t,n,"translate"),"translate",t,["Reload"])),e.opts.autoescape),r(null,a+="</a>\n</nav>\n")}catch(e){r(o.handleError(e,i,s))}}}},702:function(e){e.exports=function(){"use strict";const e="transitionend",t=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t},n=e=>{const n=t(e);return n&&document.querySelector(n)?n:null},o=e=>{const n=t(e);return n?document.querySelector(n):null},r=t=>{t.dispatchEvent(new Event(e))},i=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),s=e=>i(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(e):null,a=(e,t,n)=>{Object.keys(n).forEach((o=>{const r=n[o],s=t[o],a=s&&i(s)?"element":null==(l=s)?`${l}`:{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase();var l;if(!new RegExp(r).test(a))throw new TypeError(`${e.toUpperCase()}: Option "${o}" provided type "${a}" but expected type "${r}".`)}))},l=e=>!(!i(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility"),c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),u=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?u(e.parentNode):null},p=()=>{},h=e=>{e.offsetHeight},f=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},d=[],m=()=>"rtl"===document.documentElement.dir,v=e=>{var t;t=()=>{const t=f();if(t){const n=e.NAME,o=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=o,e.jQueryInterface)}},"loading"===document.readyState?(d.length||document.addEventListener("DOMContentLoaded",(()=>{d.forEach((e=>e()))})),d.push(t)):t()},g=e=>{"function"==typeof e&&e()},y=(t,n,o=!0)=>{if(!o)return void g(t);const i=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const o=Number.parseFloat(t),r=Number.parseFloat(n);return o||r?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(n)+5;let s=!1;const a=({target:o})=>{o===n&&(s=!0,n.removeEventListener(e,a),g(t))};n.addEventListener(e,a),setTimeout((()=>{s||r(n)}),i)},b=(e,t,n,o)=>{let r=e.indexOf(t);if(-1===r)return e[!n&&o?e.length-1:0];const i=e.length;return r+=n?1:-1,o&&(r=(r+i)%i),e[Math.max(0,Math.min(r,i-1))]},_=/[^.]*(?=\..*)\.|.*/,k=/\..*/,w=/::\d+$/,x={};let E=1;const O={mouseenter:"mouseover",mouseleave:"mouseout"},L=/^(mouseenter|mouseleave)/i,T=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function S(e,t){return t&&`${t}::${E++}`||e.uidEvent||E++}function A(e){const t=S(e);return e.uidEvent=t,x[t]=x[t]||{},x[t]}function C(e,t,n=null){const o=Object.keys(e);for(let r=0,i=o.length;r<i;r++){const i=e[o[r]];if(i.originalHandler===t&&i.delegationSelector===n)return i}return null}function N(e,t,n){const o="string"==typeof t,r=o?n:t;let i=j(e);return T.has(i)||(i=e),[o,r,i]}function F(e,t,n,o,r){if("string"!=typeof t||!e)return;if(n||(n=o,o=null),L.test(t)){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o?o=e(o):n=e(n)}const[i,s,a]=N(t,n,o),l=A(e),c=l[a]||(l[a]={}),u=C(c,s,i?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const p=S(s,t.replace(_,"")),h=i?function(e,t,n){return function o(r){const i=e.querySelectorAll(t);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(let a=i.length;a--;)if(i[a]===s)return r.delegateTarget=s,o.oneOff&&P.off(e,r.type,t,n),n.apply(s,[r]);return null}}(e,n,o):function(e,t){return function n(o){return o.delegateTarget=e,n.oneOff&&P.off(e,o.type,t),t.apply(e,[o])}}(e,n);h.delegationSelector=i?n:null,h.originalHandler=s,h.oneOff=r,h.uidEvent=p,c[p]=h,e.addEventListener(a,h,i)}function I(e,t,n,o,r){const i=C(t[n],o,r);i&&(e.removeEventListener(n,i,Boolean(r)),delete t[n][i.uidEvent])}function j(e){return e=e.replace(k,""),O[e]||e}const P={on(e,t,n,o){F(e,t,n,o,!1)},one(e,t,n,o){F(e,t,n,o,!0)},off(e,t,n,o){if("string"!=typeof t||!e)return;const[r,i,s]=N(t,n,o),a=s!==t,l=A(e),c=t.startsWith(".");if(void 0!==i){if(!l||!l[s])return;return void I(e,l,s,i,r?n:null)}c&&Object.keys(l).forEach((n=>{!function(e,t,n,o){const r=t[n]||{};Object.keys(r).forEach((i=>{if(i.includes(o)){const o=r[i];I(e,t,n,o.originalHandler,o.delegationSelector)}}))}(e,l,n,t.slice(1))}));const u=l[s]||{};Object.keys(u).forEach((n=>{const o=n.replace(w,"");if(!a||t.includes(o)){const t=u[n];I(e,l,s,t.originalHandler,t.delegationSelector)}}))},trigger(e,t,n){if("string"!=typeof t||!e)return null;const o=f(),r=j(t),i=t!==r,s=T.has(r);let a,l=!0,c=!0,u=!1,p=null;return i&&o&&(a=o.Event(t,n),o(e).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),u=a.isDefaultPrevented()),s?(p=document.createEvent("HTMLEvents"),p.initEvent(r,l,!0)):p=new CustomEvent(t,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((e=>{Object.defineProperty(p,e,{get:()=>n[e]})})),u&&p.preventDefault(),c&&e.dispatchEvent(p),p.defaultPrevented&&void 0!==a&&a.preventDefault(),p}},D=new Map,V={set(e,t,n){D.has(e)||D.set(e,new Map);const o=D.get(e);o.has(t)||0===o.size?o.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`)},get:(e,t)=>D.has(e)&&D.get(e).get(t)||null,remove(e,t){if(!D.has(e))return;const n=D.get(e);n.delete(t),0===n.size&&D.delete(e)}};class K{constructor(e){(e=s(e))&&(this._element=e,V.set(this._element,this.constructor.DATA_KEY,this))}dispose(){V.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((e=>{this[e]=null}))}_queueCallback(e,t,n=!0){y(e,t,n)}static getInstance(e){return V.get(s(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const M=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,r=e.NAME;P.on(document,n,`[data-bs-dismiss="${r}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const i=o(this)||this.closest(`.${r}`);e.getOrCreateInstance(i)[t]()}))};class R extends K{static get NAME(){return"alert"}close(){if(P.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),P.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=R.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}M(R,"close"),v(R);const B='[data-bs-toggle="button"]';class U extends K{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=U.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}function W(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function G(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}P.on(document,"click.bs.button.data-api",B,(e=>{e.preventDefault();const t=e.target.closest(B);U.getOrCreateInstance(t).toggle()})),v(U);const H={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${G(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${G(t)}`)},getDataAttributes(e){if(!e)return{};const t={};return Object.keys(e.dataset).filter((e=>e.startsWith("bs"))).forEach((n=>{let o=n.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),t[o]=W(e.dataset[n])})),t},getDataAttribute:(e,t)=>W(e.getAttribute(`data-bs-${G(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},position:e=>({top:e.offsetTop,left:e.offsetLeft})},q={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let o=e.parentNode;for(;o&&o.nodeType===Node.ELEMENT_NODE&&3!==o.nodeType;)o.matches(t)&&n.push(o),o=o.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(", ");return this.find(t,e).filter((e=>!c(e)&&l(e)))}},z="carousel",$={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Y={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},X="next",Q="prev",J="left",Z="right",ee={ArrowLeft:Z,ArrowRight:J},te="slid.bs.carousel",ne="active",oe=".active.carousel-item";class re extends K{constructor(e,t){super(e),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=q.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return $}static get NAME(){return z}next(){this._slide(X)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(Q)}pause(e){e||(this._isPaused=!0),q.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(r(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=q.findOne(oe,this._element);const t=this._getItemIndex(this._activeElement);if(e>this._items.length-1||e<0)return;if(this._isSliding)return void P.one(this._element,te,(()=>this.to(e)));if(t===e)return this.pause(),void this.cycle();const n=e>t?X:Q;this._slide(n,this._items[e])}_getConfig(e){return e={...$,...H.getDataAttributes(this._element),..."object"==typeof e?e:{}},a(z,e,Y),e}_handleSwipe(){const e=Math.abs(this.touchDeltaX);if(e<=40)return;const t=e/this.touchDeltaX;this.touchDeltaX=0,t&&this._slide(t>0?Z:J)}_addEventListeners(){this._config.keyboard&&P.on(this._element,"keydown.bs.carousel",(e=>this._keydown(e))),"hover"===this._config.pause&&(P.on(this._element,"mouseenter.bs.carousel",(e=>this.pause(e))),P.on(this._element,"mouseleave.bs.carousel",(e=>this.cycle(e)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const e=e=>this._pointerEvent&&("pen"===e.pointerType||"touch"===e.pointerType),t=t=>{e(t)?this.touchStartX=t.clientX:this._pointerEvent||(this.touchStartX=t.touches[0].clientX)},n=e=>{this.touchDeltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this.touchStartX},o=t=>{e(t)&&(this.touchDeltaX=t.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((e=>this.cycle(e)),500+this._config.interval))};q.find(".carousel-item img",this._element).forEach((e=>{P.on(e,"dragstart.bs.carousel",(e=>e.preventDefault()))})),this._pointerEvent?(P.on(this._element,"pointerdown.bs.carousel",(e=>t(e))),P.on(this._element,"pointerup.bs.carousel",(e=>o(e))),this._element.classList.add("pointer-event")):(P.on(this._element,"touchstart.bs.carousel",(e=>t(e))),P.on(this._element,"touchmove.bs.carousel",(e=>n(e))),P.on(this._element,"touchend.bs.carousel",(e=>o(e))))}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=ee[e.key];t&&(e.preventDefault(),this._slide(t))}_getItemIndex(e){return this._items=e&&e.parentNode?q.find(".carousel-item",e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,t){const n=e===X;return b(this._items,t,n,this._config.wrap)}_triggerSlideEvent(e,t){const n=this._getItemIndex(e),o=this._getItemIndex(q.findOne(oe,this._element));return P.trigger(this._element,"slide.bs.carousel",{relatedTarget:e,direction:t,from:o,to:n})}_setActiveIndicatorElement(e){if(this._indicatorsElement){const t=q.findOne(".active",this._indicatorsElement);t.classList.remove(ne),t.removeAttribute("aria-current");const n=q.find("[data-bs-target]",this._indicatorsElement);for(let t=0;t<n.length;t++)if(Number.parseInt(n[t].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){n[t].classList.add(ne),n[t].setAttribute("aria-current","true");break}}}_updateInterval(){const e=this._activeElement||q.findOne(oe,this._element);if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);t?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(e,t){const n=this._directionToOrder(e),o=q.findOne(oe,this._element),r=this._getItemIndex(o),i=t||this._getItemByOrder(n,o),s=this._getItemIndex(i),a=Boolean(this._interval),l=n===X,c=l?"carousel-item-start":"carousel-item-end",u=l?"carousel-item-next":"carousel-item-prev",p=this._orderToDirection(n);if(i&&i.classList.contains(ne))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(i,p).defaultPrevented)return;if(!o||!i)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(i),this._activeElement=i;const f=()=>{P.trigger(this._element,te,{relatedTarget:i,direction:p,from:r,to:s})};if(this._element.classList.contains("slide")){i.classList.add(u),h(i),o.classList.add(c),i.classList.add(c);const e=()=>{i.classList.remove(c,u),i.classList.add(ne),o.classList.remove(ne,u,c),this._isSliding=!1,setTimeout(f,0)};this._queueCallback(e,o,!0)}else o.classList.remove(ne),i.classList.add(ne),this._isSliding=!1,f();a&&this.cycle()}_directionToOrder(e){return[Z,J].includes(e)?m()?e===J?Q:X:e===J?X:Q:e}_orderToDirection(e){return[X,Q].includes(e)?m()?e===Q?J:Z:e===Q?Z:J:e}static carouselInterface(e,t){const n=re.getOrCreateInstance(e,t);let{_config:o}=n;"object"==typeof t&&(o={...o,...t});const r="string"==typeof t?t:o.slide;if("number"==typeof t)n.to(t);else if("string"==typeof r){if(void 0===n[r])throw new TypeError(`No method named "${r}"`);n[r]()}else o.interval&&o.ride&&(n.pause(),n.cycle())}static jQueryInterface(e){return this.each((function(){re.carouselInterface(this,e)}))}static dataApiClickHandler(e){const t=o(this);if(!t||!t.classList.contains("carousel"))return;const n={...H.getDataAttributes(t),...H.getDataAttributes(this)},r=this.getAttribute("data-bs-slide-to");r&&(n.interval=!1),re.carouselInterface(t,n),r&&re.getInstance(t).to(r),e.preventDefault()}}P.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",re.dataApiClickHandler),P.on(window,"load.bs.carousel.data-api",(()=>{const e=q.find('[data-bs-ride="carousel"]');for(let t=0,n=e.length;t<n;t++)re.carouselInterface(e[t],re.getInstance(e[t]))})),v(re);const ie="collapse",se={toggle:!0,parent:null},ae={toggle:"boolean",parent:"(null|element)"},le="show",ce="collapse",ue="collapsing",pe="collapsed",he=":scope .collapse .collapse",fe='[data-bs-toggle="collapse"]';class de extends K{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=[];const o=q.find(fe);for(let e=0,t=o.length;e<t;e++){const t=o[e],r=n(t),i=q.find(r).filter((e=>e===this._element));null!==r&&i.length&&(this._selector=r,this._triggerArray.push(t))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return se}static get NAME(){return ie}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e,t=[];if(this._config.parent){const e=q.find(he,this._config.parent);t=q.find(".collapse.show, .collapse.collapsing",this._config.parent).filter((t=>!e.includes(t)))}const n=q.findOne(this._selector);if(t.length){const o=t.find((e=>n!==e));if(e=o?de.getInstance(o):null,e&&e._isTransitioning)return}if(P.trigger(this._element,"show.bs.collapse").defaultPrevented)return;t.forEach((t=>{n!==t&&de.getOrCreateInstance(t,{toggle:!1}).hide(),e||V.set(t,"bs.collapse",null)}));const o=this._getDimension();this._element.classList.remove(ce),this._element.classList.add(ue),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ue),this._element.classList.add(ce,le),this._element.style[o]="",P.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[o]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,h(this._element),this._element.classList.add(ue),this._element.classList.remove(ce,le);const t=this._triggerArray.length;for(let e=0;e<t;e++){const t=this._triggerArray[e],n=o(t);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ue),this._element.classList.add(ce),P.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(e=this._element){return e.classList.contains(le)}_getConfig(e){return(e={...se,...H.getDataAttributes(this._element),...e}).toggle=Boolean(e.toggle),e.parent=s(e.parent),a(ie,e,ae),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=q.find(he,this._config.parent);q.find(fe,this._config.parent).filter((t=>!e.includes(t))).forEach((e=>{const t=o(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}))}_addAriaAndCollapsedClass(e,t){e.length&&e.forEach((e=>{t?e.classList.remove(pe):e.classList.add(pe),e.setAttribute("aria-expanded",t)}))}static jQueryInterface(e){return this.each((function(){const t={};"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1);const n=de.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}}))}}P.on(document,"click.bs.collapse.data-api",fe,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=n(this);q.find(t).forEach((e=>{de.getOrCreateInstance(e,{toggle:!1}).toggle()}))})),v(de);var me="top",ve="bottom",ge="right",ye="left",be="auto",_e=[me,ve,ge,ye],ke="start",we="end",xe="clippingParents",Ee="viewport",Oe="popper",Le="reference",Te=_e.reduce((function(e,t){return e.concat([t+"-"+ke,t+"-"+we])}),[]),Se=[].concat(_e,[be]).reduce((function(e,t){return e.concat([t,t+"-"+ke,t+"-"+we])}),[]),Ae="beforeRead",Ce="read",Ne="afterRead",Fe="beforeMain",Ie="main",je="afterMain",Pe="beforeWrite",De="write",Ve="afterWrite",Ke=[Ae,Ce,Ne,Fe,Ie,je,Pe,De,Ve];function Me(e){return e?(e.nodeName||"").toLowerCase():null}function Re(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Be(e){return e instanceof Re(e).Element||e instanceof Element}function Ue(e){return e instanceof Re(e).HTMLElement||e instanceof HTMLElement}function We(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Re(e).ShadowRoot||e instanceof ShadowRoot)}const Ge={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},r=t.elements[e];Ue(r)&&Me(r)&&(Object.assign(r.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],r=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Ue(o)&&Me(o)&&(Object.assign(o.style,i),Object.keys(r).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]};function He(e){return e.split("-")[0]}function qe(e,t){var n=e.getBoundingClientRect();return{width:n.width/1,height:n.height/1,top:n.top/1,right:n.right/1,bottom:n.bottom/1,left:n.left/1,x:n.left/1,y:n.top/1}}function ze(e){var t=qe(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function $e(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&We(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Ye(e){return Re(e).getComputedStyle(e)}function Xe(e){return["table","td","th"].indexOf(Me(e))>=0}function Qe(e){return((Be(e)?e.ownerDocument:e.document)||window.document).documentElement}function Je(e){return"html"===Me(e)?e:e.assignedSlot||e.parentNode||(We(e)?e.host:null)||Qe(e)}function Ze(e){return Ue(e)&&"fixed"!==Ye(e).position?e.offsetParent:null}function et(e){for(var t=Re(e),n=Ze(e);n&&Xe(n)&&"static"===Ye(n).position;)n=Ze(n);return n&&("html"===Me(n)||"body"===Me(n)&&"static"===Ye(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Ue(e)&&"fixed"===Ye(e).position)return null;for(var n=Je(e);Ue(n)&&["html","body"].indexOf(Me(n))<0;){var o=Ye(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e)||t}function tt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var nt=Math.max,ot=Math.min,rt=Math.round;function it(e,t,n){return nt(e,ot(t,n))}function st(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function at(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const lt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,o=e.name,r=e.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,a=He(n.placement),l=tt(a),c=[ye,ge].indexOf(a)>=0?"height":"width";if(i&&s){var u=function(e,t){return st("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:at(e,_e))}(r.padding,n),p=ze(i),h="y"===l?me:ye,f="y"===l?ve:ge,d=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],v=et(i),g=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,y=d/2-m/2,b=u[h],_=g-p[c]-u[f],k=g/2-p[c]/2+y,w=it(b,k,_),x=l;n.modifiersData[o]=((t={})[x]=w,t.centerOffset=w-k,t)}},effect:function(e){var t=e.state,n=e.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&$e(t.elements.popper,o)&&(t.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ct(e){return e.split("-")[1]}var ut={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pt(e){var t,n=e.popper,o=e.popperRect,r=e.placement,i=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,p=!0===u?function(e){var t=e.x,n=e.y,o=window.devicePixelRatio||1;return{x:rt(rt(t*o)/o)||0,y:rt(rt(n*o)/o)||0}}(s):"function"==typeof u?u(s):s,h=p.x,f=void 0===h?0:h,d=p.y,m=void 0===d?0:d,v=s.hasOwnProperty("x"),g=s.hasOwnProperty("y"),y=ye,b=me,_=window;if(c){var k=et(n),w="clientHeight",x="clientWidth";k===Re(n)&&"static"!==Ye(k=Qe(n)).position&&"absolute"===a&&(w="scrollHeight",x="scrollWidth"),r!==me&&(r!==ye&&r!==ge||i!==we)||(b=ve,m-=k[w]-o.height,m*=l?1:-1),r!==ye&&(r!==me&&r!==ve||i!==we)||(y=ge,f-=k[x]-o.width,f*=l?1:-1)}var E,O=Object.assign({position:a},c&&ut);return l?Object.assign({},O,((E={})[b]=g?"0":"",E[y]=v?"0":"",E.transform=(_.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",E)):Object.assign({},O,((t={})[b]=g?m+"px":"",t[y]=v?f+"px":"",t.transform="",t))}const ht={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,o=n.gpuAcceleration,r=void 0===o||o,i=n.adaptive,s=void 0===i||i,a=n.roundOffsets,l=void 0===a||a,c={placement:He(t.placement),variation:ct(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,pt(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,pt(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ft={passive:!0};const dt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,i=void 0===r||r,s=o.resize,a=void 0===s||s,l=Re(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,ft)})),a&&l.addEventListener("resize",n.update,ft),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,ft)})),a&&l.removeEventListener("resize",n.update,ft)}},data:{}};var mt={left:"right",right:"left",bottom:"top",top:"bottom"};function vt(e){return e.replace(/left|right|bottom|top/g,(function(e){return mt[e]}))}var gt={start:"end",end:"start"};function yt(e){return e.replace(/start|end/g,(function(e){return gt[e]}))}function bt(e){var t=Re(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function _t(e){return qe(Qe(e)).left+bt(e).scrollLeft}function kt(e){var t=Ye(e),n=t.overflow,o=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function wt(e){return["html","body","#document"].indexOf(Me(e))>=0?e.ownerDocument.body:Ue(e)&&kt(e)?e:wt(Je(e))}function xt(e,t){var n;void 0===t&&(t=[]);var o=wt(e),r=o===(null==(n=e.ownerDocument)?void 0:n.body),i=Re(o),s=r?[i].concat(i.visualViewport||[],kt(o)?o:[]):o,a=t.concat(s);return r?a:a.concat(xt(Je(s)))}function Et(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ot(e,t){return t===Ee?Et(function(e){var t=Re(e),n=Qe(e),o=t.visualViewport,r=n.clientWidth,i=n.clientHeight,s=0,a=0;return o&&(r=o.width,i=o.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=o.offsetLeft,a=o.offsetTop)),{width:r,height:i,x:s+_t(e),y:a}}(e)):Ue(t)?function(e){var t=qe(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Et(function(e){var t,n=Qe(e),o=bt(e),r=null==(t=e.ownerDocument)?void 0:t.body,i=nt(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=nt(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-o.scrollLeft+_t(e),l=-o.scrollTop;return"rtl"===Ye(r||n).direction&&(a+=nt(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:s,x:a,y:l}}(Qe(e)))}function Lt(e){var t,n=e.reference,o=e.element,r=e.placement,i=r?He(r):null,s=r?ct(r):null,a=n.x+n.width/2-o.width/2,l=n.y+n.height/2-o.height/2;switch(i){case me:t={x:a,y:n.y-o.height};break;case ve:t={x:a,y:n.y+n.height};break;case ge:t={x:n.x+n.width,y:l};break;case ye:t={x:n.x-o.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?tt(i):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case ke:t[c]=t[c]-(n[u]/2-o[u]/2);break;case we:t[c]=t[c]+(n[u]/2-o[u]/2)}}return t}function Tt(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=void 0===o?e.placement:o,i=n.boundary,s=void 0===i?xe:i,a=n.rootBoundary,l=void 0===a?Ee:a,c=n.elementContext,u=void 0===c?Oe:c,p=n.altBoundary,h=void 0!==p&&p,f=n.padding,d=void 0===f?0:f,m=st("number"!=typeof d?d:at(d,_e)),v=u===Oe?Le:Oe,g=e.rects.popper,y=e.elements[h?v:u],b=function(e,t,n){var o="clippingParents"===t?function(e){var t=xt(Je(e)),n=["absolute","fixed"].indexOf(Ye(e).position)>=0&&Ue(e)?et(e):e;return Be(n)?t.filter((function(e){return Be(e)&&$e(e,n)&&"body"!==Me(e)})):[]}(e):[].concat(t),r=[].concat(o,[n]),i=r[0],s=r.reduce((function(t,n){var o=Ot(e,n);return t.top=nt(o.top,t.top),t.right=ot(o.right,t.right),t.bottom=ot(o.bottom,t.bottom),t.left=nt(o.left,t.left),t}),Ot(e,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(Be(y)?y:y.contextElement||Qe(e.elements.popper),s,l),_=qe(e.elements.reference),k=Lt({reference:_,element:g,strategy:"absolute",placement:r}),w=Et(Object.assign({},g,k)),x=u===Oe?w:_,E={top:b.top-x.top+m.top,bottom:x.bottom-b.bottom+m.bottom,left:b.left-x.left+m.left,right:x.right-b.right+m.right},O=e.modifiersData.offset;if(u===Oe&&O){var L=O[r];Object.keys(E).forEach((function(e){var t=[ge,ve].indexOf(e)>=0?1:-1,n=[me,ve].indexOf(e)>=0?"y":"x";E[e]+=L[n]*t}))}return E}const St={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var r=n.mainAxis,i=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,p=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,d=void 0===f||f,m=n.allowedAutoPlacements,v=t.options.placement,g=He(v),y=l||(g!==v&&d?function(e){if(He(e)===be)return[];var t=vt(e);return[yt(e),t,yt(t)]}(v):[vt(v)]),b=[v].concat(y).reduce((function(e,n){return e.concat(He(n)===be?function(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=n.boundary,i=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Se:l,u=ct(o),p=u?a?Te:Te.filter((function(e){return ct(e)===u})):_e,h=p.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=p);var f=h.reduce((function(t,n){return t[n]=Tt(e,{placement:n,boundary:r,rootBoundary:i,padding:s})[He(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:p,padding:c,flipVariations:d,allowedAutoPlacements:m}):n)}),[]),_=t.rects.reference,k=t.rects.popper,w=new Map,x=!0,E=b[0],O=0;O<b.length;O++){var L=b[O],T=He(L),S=ct(L)===ke,A=[me,ve].indexOf(T)>=0,C=A?"width":"height",N=Tt(t,{placement:L,boundary:u,rootBoundary:p,altBoundary:h,padding:c}),F=A?S?ge:ye:S?ve:me;_[C]>k[C]&&(F=vt(F));var I=vt(F),j=[];if(i&&j.push(N[T]<=0),a&&j.push(N[F]<=0,N[I]<=0),j.every((function(e){return e}))){E=L,x=!1;break}w.set(L,j)}if(x)for(var P=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},D=d?3:1;D>0&&"break"!==P(D);D--);t.placement!==E&&(t.modifiersData[o]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function At(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ct(e){return[me,ge,ve,ye].some((function(t){return e[t]>=0}))}const Nt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,o=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,s=Tt(t,{elementContext:"reference"}),a=Tt(t,{altBoundary:!0}),l=At(s,o),c=At(a,r,i),u=Ct(l),p=Ct(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}},Ft={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,r=n.offset,i=void 0===r?[0,0]:r,s=Se.reduce((function(e,n){return e[n]=function(e,t,n){var o=He(e),r=[ye,me].indexOf(o)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=i[0],a=i[1];return s=s||0,a=(a||0)*r,[ye,ge].indexOf(o)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,i),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[o]=s}},It={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Lt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},jt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name,r=n.mainAxis,i=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,p=n.padding,h=n.tether,f=void 0===h||h,d=n.tetherOffset,m=void 0===d?0:d,v=Tt(t,{boundary:l,rootBoundary:c,padding:p,altBoundary:u}),g=He(t.placement),y=ct(t.placement),b=!y,_=tt(g),k="x"===_?"y":"x",w=t.modifiersData.popperOffsets,x=t.rects.reference,E=t.rects.popper,O="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,L={x:0,y:0};if(w){if(i||a){var T="y"===_?me:ye,S="y"===_?ve:ge,A="y"===_?"height":"width",C=w[_],N=w[_]+v[T],F=w[_]-v[S],I=f?-E[A]/2:0,j=y===ke?x[A]:E[A],P=y===ke?-E[A]:-x[A],D=t.elements.arrow,V=f&&D?ze(D):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},M=K[T],R=K[S],B=it(0,x[A],V[A]),U=b?x[A]/2-I-B-M-O:j-B-M-O,W=b?-x[A]/2+I+B+R+O:P+B+R+O,G=t.elements.arrow&&et(t.elements.arrow),H=G?"y"===_?G.clientTop||0:G.clientLeft||0:0,q=t.modifiersData.offset?t.modifiersData.offset[t.placement][_]:0,z=w[_]+U-q-H,$=w[_]+W-q;if(i){var Y=it(f?ot(N,z):N,C,f?nt(F,$):F);w[_]=Y,L[_]=Y-C}if(a){var X="x"===_?me:ye,Q="x"===_?ve:ge,J=w[k],Z=J+v[X],ee=J-v[Q],te=it(f?ot(Z,z):Z,J,f?nt(ee,$):ee);w[k]=te,L[k]=te-J}}t.modifiersData[o]=L}},requiresIfExists:["offset"]};function Pt(e,t,n){void 0===n&&(n=!1);var o=Ue(t);Ue(t)&&function(e){var t=e.getBoundingClientRect();t.width,e.offsetWidth,t.height,e.offsetHeight}(t);var r,i,s=Qe(t),a=qe(e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(o||!o&&!n)&&(("body"!==Me(t)||kt(s))&&(l=(r=t)!==Re(r)&&Ue(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:bt(r)),Ue(t)?((c=qe(t)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=_t(s))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function Dt(e){var t=new Map,n=new Set,o=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var o=t.get(e);o&&r(o)}})),o.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),o}var Vt={placement:"bottom",modifiers:[],strategy:"absolute"};function Kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Mt(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,r=t.defaultOptions,i=void 0===r?Vt:r;return function(e,t,n){void 0===n&&(n=i);var r,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vt,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;p(),a.options=Object.assign({},i,a.options,r),a.scrollParents={reference:Be(e)?xt(e):e.contextElement?xt(e.contextElement):[],popper:xt(t)};var s,c,h=function(e){var t=Dt(e);return Ke.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((s=[].concat(o,a.options.modifiers),c=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return a.orderedModifiers=h.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,o=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var i=r({state:a,name:t,instance:u,options:o});l.push(i||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(Kt(t,n)){a.rects={reference:Pt(t,et(n),"fixed"===a.options.strategy),popper:ze(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var o=0;o<a.orderedModifiers.length;o++)if(!0!==a.reset){var r=a.orderedModifiers[o],i=r.fn,s=r.options,l=void 0===s?{}:s,p=r.name;"function"==typeof i&&(a=i({state:a,options:l,name:p,instance:u})||a)}else a.reset=!1,o=-1}}},update:(r=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(r())}))}))),s}),destroy:function(){p(),c=!0}};if(!Kt(e,t))return u;function p(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Rt=Mt(),Bt=Mt({defaultModifiers:[dt,It,ht,Ge]}),Ut=Mt({defaultModifiers:[dt,It,ht,Ge,Ft,St,jt,lt,Nt]});const Wt=Object.freeze({__proto__:null,popperGenerator:Mt,detectOverflow:Tt,createPopperBase:Rt,createPopper:Ut,createPopperLite:Bt,top:me,bottom:ve,right:ge,left:ye,auto:be,basePlacements:_e,start:ke,end:we,clippingParents:xe,viewport:Ee,popper:Oe,reference:Le,variationPlacements:Te,placements:Se,beforeRead:Ae,read:Ce,afterRead:Ne,beforeMain:Fe,main:Ie,afterMain:je,beforeWrite:Pe,write:De,afterWrite:Ve,modifierPhases:Ke,applyStyles:Ge,arrow:lt,computeStyles:ht,eventListeners:dt,flip:St,hide:Nt,offset:Ft,popperOffsets:It,preventOverflow:jt}),Gt="dropdown",Ht="Escape",qt="Space",zt="ArrowUp",$t="ArrowDown",Yt=new RegExp("ArrowUp|ArrowDown|Escape"),Xt="click.bs.dropdown.data-api",Qt="keydown.bs.dropdown.data-api",Jt="show",Zt='[data-bs-toggle="dropdown"]',en=".dropdown-menu",tn=m()?"top-end":"top-start",nn=m()?"top-start":"top-end",on=m()?"bottom-end":"bottom-start",rn=m()?"bottom-start":"bottom-end",sn=m()?"left-start":"right-start",an=m()?"right-start":"left-start",ln={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},cn={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class un extends K{constructor(e,t){super(e),this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return ln}static get DefaultType(){return cn}static get NAME(){return Gt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown(this._menu))return;const e={relatedTarget:this._element};if(P.trigger(this._element,"show.bs.dropdown",e).defaultPrevented)return;const t=un.getParentFromElement(this._element);this._inNavbar?H.setDataAttribute(this._menu,"popper","none"):this._createPopper(t),"ontouchstart"in document.documentElement&&!t.closest(".navbar-nav")&&[].concat(...document.body.children).forEach((e=>P.on(e,"mouseover",p))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Jt),this._element.classList.add(Jt),P.trigger(this._element,"shown.bs.dropdown",e)}hide(){if(c(this._element)||!this._isShown(this._menu))return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){P.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((e=>P.off(e,"mouseover",p))),this._popper&&this._popper.destroy(),this._menu.classList.remove(Jt),this._element.classList.remove(Jt),this._element.setAttribute("aria-expanded","false"),H.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,"hidden.bs.dropdown",e))}_getConfig(e){if(e={...this.constructor.Default,...H.getDataAttributes(this._element),...e},a(Gt,e,this.constructor.DefaultType),"object"==typeof e.reference&&!i(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${Gt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(e){if(void 0===Wt)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=e:i(this._config.reference)?t=s(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig(),o=n.modifiers.find((e=>"applyStyles"===e.name&&!1===e.enabled));this._popper=Ut(t,this._menu,n),o&&H.setDataAttribute(this._menu,"popper","static")}_isShown(e=this._element){return e.classList.contains(Jt)}_getMenuElement(){return q.next(this._element,en)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains("dropend"))return sn;if(e.classList.contains("dropstart"))return an;const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?nn:tn:t?rn:on}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=q.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(l);n.length&&b(n,t,e===$t,!n.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=un.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(e&&(2===e.button||"keyup"===e.type&&"Tab"!==e.key))return;const t=q.find(Zt);for(let n=0,o=t.length;n<o;n++){const o=un.getInstance(t[n]);if(!o||!1===o._config.autoClose)continue;if(!o._isShown())continue;const r={relatedTarget:o._element};if(e){const t=e.composedPath(),n=t.includes(o._menu);if(t.includes(o._element)||"inside"===o._config.autoClose&&!n||"outside"===o._config.autoClose&&n)continue;if(o._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;"click"===e.type&&(r.clickEvent=e)}o._completeHide(r)}}static getParentFromElement(e){return o(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.key===qt||e.key!==Ht&&(e.key!==$t&&e.key!==zt||e.target.closest(en)):!Yt.test(e.key))return;const t=this.classList.contains(Jt);if(!t&&e.key===Ht)return;if(e.preventDefault(),e.stopPropagation(),c(this))return;const n=this.matches(Zt)?this:q.prev(this,Zt)[0],o=un.getOrCreateInstance(n);if(e.key!==Ht)return e.key===zt||e.key===$t?(t||o.show(),void o._selectMenuItem(e)):void(t&&e.key!==qt||un.clearMenus());o.hide()}}P.on(document,Qt,Zt,un.dataApiKeydownHandler),P.on(document,Qt,en,un.dataApiKeydownHandler),P.on(document,Xt,un.clearMenus),P.on(document,"keyup.bs.dropdown.data-api",un.clearMenus),P.on(document,Xt,Zt,(function(e){e.preventDefault(),un.getOrCreateInstance(this).toggle()})),v(un);const pn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",hn=".sticky-top";class fn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(t=>t+e)),this._setElementAttributes(pn,"paddingRight",(t=>t+e)),this._setElementAttributes(hn,"marginRight",(t=>t-e))}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const o=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+o)return;this._saveInitialAttribute(e,t);const r=window.getComputedStyle(e)[t];e.style[t]=`${n(Number.parseFloat(r))}px`}))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(pn,"paddingRight"),this._resetElementAttributes(hn,"marginRight")}_saveInitialAttribute(e,t){const n=e.style[t];n&&H.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=H.getDataAttribute(e,t);void 0===n?e.style.removeProperty(t):(H.removeDataAttribute(e,t),e.style[t]=n)}))}_applyManipulationCallback(e,t){i(e)?t(e):q.find(e,this._element).forEach(t)}isOverflowing(){return this.getWidth()>0}}const dn={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},mn={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},vn="show",gn="mousedown.bs.backdrop";class yn{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){this._config.isVisible?(this._append(),this._config.isAnimated&&h(this._getElement()),this._getElement().classList.add(vn),this._emulateAnimation((()=>{g(e)}))):g(e)}hide(e){this._config.isVisible?(this._getElement().classList.remove(vn),this._emulateAnimation((()=>{this.dispose(),g(e)}))):g(e)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_getConfig(e){return(e={...dn,..."object"==typeof e?e:{}}).rootElement=s(e.rootElement),a("backdrop",e,mn),e}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),P.on(this._getElement(),gn,(()=>{g(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&(P.off(this._element,gn),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){y(e,this._getElement(),this._config.isAnimated)}}const bn={trapElement:null,autofocus:!0},_n={trapElement:"element",autofocus:"boolean"},kn=".bs.focustrap",wn="backward";class xn{constructor(e){this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:e,autofocus:t}=this._config;this._isActive||(t&&e.focus(),P.off(document,kn),P.on(document,"focusin.bs.focustrap",(e=>this._handleFocusin(e))),P.on(document,"keydown.tab.bs.focustrap",(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,kn))}_handleFocusin(e){const{target:t}=e,{trapElement:n}=this._config;if(t===document||t===n||n.contains(t))return;const o=q.focusableChildren(n);0===o.length?n.focus():this._lastTabNavDirection===wn?o[o.length-1].focus():o[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?wn:"forward")}_getConfig(e){return e={...bn,..."object"==typeof e?e:{}},a("focustrap",e,_n),e}}const En="modal",On="Escape",Ln={backdrop:!0,keyboard:!0,focus:!0},Tn={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Sn="hidden.bs.modal",An="show.bs.modal",Cn="resize.bs.modal",Nn="click.dismiss.bs.modal",Fn="keydown.dismiss.bs.modal",In="mousedown.dismiss.bs.modal",jn="modal-open",Pn="show",Dn="modal-static";class Vn extends K{constructor(e,t){super(e),this._config=this._getConfig(t),this._dialog=q.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new fn}static get Default(){return Ln}static get NAME(){return En}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||P.trigger(this._element,An,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(jn),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),P.on(this._dialog,In,(()=>{P.one(this._element,"mouseup.dismiss.bs.modal",(e=>{e.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;if(P.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const e=this._isAnimated();e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(Pn),P.off(this._element,Nn),P.off(this._dialog,In),this._queueCallback((()=>this._hideModal()),this._element,e)}dispose(){[window,this._dialog].forEach((e=>P.off(e,".bs.modal"))),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new yn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new xn({trapElement:this._element})}_getConfig(e){return e={...Ln,...H.getDataAttributes(this._element),..."object"==typeof e?e:{}},a(En,e,Tn),e}_showElement(e){const t=this._isAnimated(),n=q.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),t&&h(this._element),this._element.classList.add(Pn),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,"shown.bs.modal",{relatedTarget:e})}),this._dialog,t)}_setEscapeEvent(){this._isShown?P.on(this._element,Fn,(e=>{this._config.keyboard&&e.key===On?(e.preventDefault(),this.hide()):this._config.keyboard||e.key!==On||this._triggerBackdropTransition()})):P.off(this._element,Fn)}_setResizeEvent(){this._isShown?P.on(window,Cn,(()=>this._adjustDialog())):P.off(window,Cn)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(jn),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Sn)}))}_showBackdrop(e){P.on(this._element,Nn,(e=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:e.target===e.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:e,scrollHeight:t,style:n}=this._element,o=t>document.documentElement.clientHeight;!o&&"hidden"===n.overflowY||e.contains(Dn)||(o||(n.overflowY="hidden"),e.add(Dn),this._queueCallback((()=>{e.remove(Dn),o||this._queueCallback((()=>{n.overflowY=""}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;(!n&&e&&!m()||n&&!e&&m())&&(this._element.style.paddingLeft=`${t}px`),(n&&!e&&!m()||!n&&e&&m())&&(this._element.style.paddingRight=`${t}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=Vn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}}))}}P.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(e){const t=o(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),P.one(t,An,(e=>{e.defaultPrevented||P.one(t,Sn,(()=>{l(this)&&this.focus()}))}));const n=q.findOne(".modal.show");n&&Vn.getInstance(n).hide(),Vn.getOrCreateInstance(t).toggle(this)})),M(Vn),v(Vn);const Kn="offcanvas",Mn={backdrop:!0,keyboard:!0,scroll:!1},Rn={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Bn="show",Un=".offcanvas.show",Wn="hidden.bs.offcanvas";class Gn extends K{constructor(e,t){super(e),this._config=this._getConfig(t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Kn}static get Default(){return Mn}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||P.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new fn).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Bn),this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),P.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Bn),this._backdrop.hide(),this._queueCallback((()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new fn).reset(),P.trigger(this._element,Wn)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(e){return e={...Mn,...H.getDataAttributes(this._element),..."object"==typeof e?e:{}},a(Kn,e,Rn),e}_initializeBackDrop(){return new yn({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new xn({trapElement:this._element})}_addEventListeners(){P.on(this._element,"keydown.dismiss.bs.offcanvas",(e=>{this._config.keyboard&&"Escape"===e.key&&this.hide()}))}static jQueryInterface(e){return this.each((function(){const t=Gn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}P.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(e){const t=o(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;P.one(t,Wn,(()=>{l(this)&&this.focus()}));const n=q.findOne(Un);n&&n!==t&&Gn.getInstance(n).hide(),Gn.getOrCreateInstance(t).toggle(this)})),P.on(window,"load.bs.offcanvas.data-api",(()=>q.find(Un).forEach((e=>Gn.getOrCreateInstance(e).show())))),M(Gn),v(Gn);const Hn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,$n=(e,t)=>{const n=e.nodeName.toLowerCase();if(t.includes(n))return!Hn.has(n)||Boolean(qn.test(e.nodeValue)||zn.test(e.nodeValue));const o=t.filter((e=>e instanceof RegExp));for(let e=0,t=o.length;e<t;e++)if(o[e].test(n))return!0;return!1};function Yn(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const o=(new window.DOMParser).parseFromString(e,"text/html"),r=[].concat(...o.body.querySelectorAll("*"));for(let e=0,n=r.length;e<n;e++){const n=r[e],o=n.nodeName.toLowerCase();if(!Object.keys(t).includes(o)){n.remove();continue}const i=[].concat(...n.attributes),s=[].concat(t["*"]||[],t[o]||[]);i.forEach((e=>{$n(e,s)||n.removeAttribute(e.nodeName)}))}return o.body.innerHTML}const Xn="tooltip",Qn=new Set(["sanitize","allowList","sanitizeFn"]),Jn={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Zn={AUTO:"auto",TOP:"top",RIGHT:m()?"left":"right",BOTTOM:"bottom",LEFT:m()?"right":"left"},eo={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},to={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},no="fade",oo="show",ro="show",io="out",so=".tooltip-inner",ao=".modal",lo="hide.bs.modal",co="hover",uo="focus";class po extends K{constructor(e,t){if(void 0===Wt)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(t),this.tip=null,this._setListeners()}static get Default(){return eo}static get NAME(){return Xn}static get Event(){return to}static get DefaultType(){return Jn}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled)if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click,t._isWithActiveTrigger()?t._enter(null,t):t._leave(null,t)}else{if(this.getTipElement().classList.contains(oo))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(ao),lo,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const e=P.trigger(this._element,this.constructor.Event.SHOW),t=u(this._element),n=null===t?this._element.ownerDocument.documentElement.contains(this._element):t.contains(this._element);if(e.defaultPrevented||!n)return;"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(so).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const o=this.getTipElement(),r=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME);o.setAttribute("id",r),this._element.setAttribute("aria-describedby",r),this._config.animation&&o.classList.add(no);const i="function"==typeof this._config.placement?this._config.placement.call(this,o,this._element):this._config.placement,s=this._getAttachment(i);this._addAttachmentClass(s);const{container:a}=this._config;V.set(o,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(o),P.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Ut(this._element,o,this._getPopperConfig(s)),o.classList.add(oo);const l=this._resolvePossibleFunction(this._config.customClass);l&&o.classList.add(...l.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((e=>{P.on(e,"mouseover",p)}));const c=this.tip.classList.contains(no);this._queueCallback((()=>{const e=this._hoverState;this._hoverState=null,P.trigger(this._element,this.constructor.Event.SHOWN),e===io&&this._leave(null,this)}),this.tip,c)}hide(){if(!this._popper)return;const e=this.getTipElement();if(P.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;e.classList.remove(oo),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((e=>P.off(e,"mouseover",p))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const t=this.tip.classList.contains(no);this._queueCallback((()=>{this._isWithActiveTrigger()||(this._hoverState!==ro&&e.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())}),this.tip,t),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const e=document.createElement("div");e.innerHTML=this._config.template;const t=e.children[0];return this.setContent(t),t.classList.remove(no,oo),this.tip=t,this.tip}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),so)}_sanitizeAndSetContent(e,t,n){const o=q.findOne(n,e);t||!o?this.setElementContent(o,t):o.remove()}setElementContent(e,t){if(null!==e)return i(t)?(t=s(t),void(this._config.html?t.parentNode!==e&&(e.innerHTML="",e.append(t)):e.textContent=t.textContent)):void(this._config.html?(this._config.sanitize&&(t=Yn(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t)}getTitle(){const e=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(e)}updateAttachment(e){return"right"===e?"end":"left"===e?"start":e}_initializeOnDelegatedTarget(e,t){return t||this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return"function"==typeof e?e.call(this._element):e}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{e.options.placement!==e.placement&&this._handlePopperPlacementChange(e)}};return{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(e)}`)}_getAttachment(e){return Zn[e.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((e=>{if("click"===e)P.on(this._element,this.constructor.Event.CLICK,this._config.selector,(e=>this.toggle(e)));else if("manual"!==e){const t=e===co?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=e===co?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;P.on(this._element,t,this._config.selector,(e=>this._enter(e))),P.on(this._element,n,this._config.selector,(e=>this._leave(e)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(ao),lo,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const e=this._element.getAttribute("title"),t=typeof this._element.getAttribute("data-bs-original-title");(e||"string"!==t)&&(this._element.setAttribute("data-bs-original-title",e||""),!e||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusin"===e.type?uo:co]=!0),t.getTipElement().classList.contains(oo)||t._hoverState===ro?t._hoverState=ro:(clearTimeout(t._timeout),t._hoverState=ro,t._config.delay&&t._config.delay.show?t._timeout=setTimeout((()=>{t._hoverState===ro&&t.show()}),t._config.delay.show):t.show())}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusout"===e.type?uo:co]=t._element.contains(e.relatedTarget)),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=io,t._config.delay&&t._config.delay.hide?t._timeout=setTimeout((()=>{t._hoverState===io&&t.hide()}),t._config.delay.hide):t.hide())}_isWithActiveTrigger(){for(const e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){const t=H.getDataAttributes(this._element);return Object.keys(t).forEach((e=>{Qn.has(e)&&delete t[e]})),(e={...this.constructor.Default,...t,..."object"==typeof e&&e?e:{}}).container=!1===e.container?document.body:s(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),a(Xn,e,this.constructor.DefaultType),e.sanitize&&(e.template=Yn(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_cleanTipClass(){const e=this.getTipElement(),t=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=e.getAttribute("class").match(t);null!==n&&n.length>0&&n.map((e=>e.trim())).forEach((t=>e.classList.remove(t)))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(e){const{state:t}=e;t&&(this.tip=t.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(t.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(e){return this.each((function(){const t=po.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}v(po);const ho={...po.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},fo={...po.DefaultType,content:"(string|element|function)"},mo={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class vo extends po{static get Default(){return ho}static get NAME(){return"popover"}static get Event(){return mo}static get DefaultType(){return fo}isWithContent(){return this.getTitle()||this._getContent()}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(e,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(e){return this.each((function(){const t=vo.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}v(vo);const go="scrollspy",yo={offset:10,method:"auto",target:""},bo={offset:"number",method:"string",target:"(string|element)"},_o="active",ko=".nav-link, .list-group-item, .dropdown-item",wo="position";class xo extends K{constructor(e,t){super(e),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(t),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,P.on(this._scrollElement,"scroll.bs.scrollspy",(()=>this._process())),this.refresh(),this._process()}static get Default(){return yo}static get NAME(){return go}refresh(){const e=this._scrollElement===this._scrollElement.window?"offset":wo,t="auto"===this._config.method?e:this._config.method,o=t===wo?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),q.find(ko,this._config.target).map((e=>{const r=n(e),i=r?q.findOne(r):null;if(i){const e=i.getBoundingClientRect();if(e.width||e.height)return[H[t](i).top+o,r]}return null})).filter((e=>e)).sort(((e,t)=>e[0]-t[0])).forEach((e=>{this._offsets.push(e[0]),this._targets.push(e[1])}))}dispose(){P.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(e){return(e={...yo,...H.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}}).target=s(e.target)||document.documentElement,a(go,e,bo),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){const e=this._targets[this._targets.length-1];this._activeTarget!==e&&this._activate(e)}else{if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let t=this._offsets.length;t--;)this._activeTarget!==this._targets[t]&&e>=this._offsets[t]&&(void 0===this._offsets[t+1]||e<this._offsets[t+1])&&this._activate(this._targets[t])}}_activate(e){this._activeTarget=e,this._clear();const t=ko.split(",").map((t=>`${t}[data-bs-target="${e}"],${t}[href="${e}"]`)),n=q.findOne(t.join(","),this._config.target);n.classList.add(_o),n.classList.contains("dropdown-item")?q.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(_o):q.parents(n,".nav, .list-group").forEach((e=>{q.prev(e,".nav-link, .list-group-item").forEach((e=>e.classList.add(_o))),q.prev(e,".nav-item").forEach((e=>{q.children(e,".nav-link").forEach((e=>e.classList.add(_o)))}))})),P.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:e})}_clear(){q.find(ko,this._config.target).filter((e=>e.classList.contains(_o))).forEach((e=>e.classList.remove(_o)))}static jQueryInterface(e){return this.each((function(){const t=xo.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}P.on(window,"load.bs.scrollspy.data-api",(()=>{q.find('[data-bs-spy="scroll"]').forEach((e=>new xo(e)))})),v(xo);const Eo="active",Oo="fade",Lo="show",To=".active",So=":scope > li > .active";class Ao extends K{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Eo))return;let e;const t=o(this._element),n=this._element.closest(".nav, .list-group");if(n){const t="UL"===n.nodeName||"OL"===n.nodeName?So:To;e=q.find(t,n),e=e[e.length-1]}const r=e?P.trigger(e,"hide.bs.tab",{relatedTarget:this._element}):null;if(P.trigger(this._element,"show.bs.tab",{relatedTarget:e}).defaultPrevented||null!==r&&r.defaultPrevented)return;this._activate(this._element,n);const i=()=>{P.trigger(e,"hidden.bs.tab",{relatedTarget:this._element}),P.trigger(this._element,"shown.bs.tab",{relatedTarget:e})};t?this._activate(t,t.parentNode,i):i()}_activate(e,t,n){const o=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?q.children(t,To):q.find(So,t))[0],r=n&&o&&o.classList.contains(Oo),i=()=>this._transitionComplete(e,o,n);o&&r?(o.classList.remove(Lo),this._queueCallback(i,e,!0)):i()}_transitionComplete(e,t,n){if(t){t.classList.remove(Eo);const e=q.findOne(":scope > .dropdown-menu .active",t.parentNode);e&&e.classList.remove(Eo),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(Eo),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),h(e),e.classList.contains(Oo)&&e.classList.add(Lo);let o=e.parentNode;if(o&&"LI"===o.nodeName&&(o=o.parentNode),o&&o.classList.contains("dropdown-menu")){const t=e.closest(".dropdown");t&&q.find(".dropdown-toggle",t).forEach((e=>e.classList.add(Eo))),e.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(e){return this.each((function(){const t=Ao.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}P.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||Ao.getOrCreateInstance(this).show()})),v(Ao);const Co="toast",No="hide",Fo="show",Io="showing",jo={animation:"boolean",autohide:"boolean",delay:"number"},Po={animation:!0,autohide:!0,delay:5e3};class Do extends K{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return jo}static get Default(){return Po}static get NAME(){return Co}show(){P.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(No),h(this._element),this._element.classList.add(Fo),this._element.classList.add(Io),this._queueCallback((()=>{this._element.classList.remove(Io),P.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this._element.classList.contains(Fo)&&(P.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Io),this._queueCallback((()=>{this._element.classList.add(No),this._element.classList.remove(Io),this._element.classList.remove(Fo),P.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Fo)&&this._element.classList.remove(Fo),super.dispose()}_getConfig(e){return e={...Po,...H.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}},a(Co,e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,"mouseover.bs.toast",(e=>this._onInteraction(e,!0))),P.on(this._element,"mouseout.bs.toast",(e=>this._onInteraction(e,!1))),P.on(this._element,"focusin.bs.toast",(e=>this._onInteraction(e,!0))),P.on(this._element,"focusout.bs.toast",(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=Do.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}return M(Do),v(Do),{Alert:R,Button:U,Carousel:re,Collapse:de,Dropdown:un,Modal:Vn,Offcanvas:Gn,Popover:vo,ScrollSpy:xo,Tab:Ao,Toast:Do,Tooltip:po}}()},324:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";var o=Array.prototype,r=Object.prototype,i={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},s=/[&"'<>\\]/g;function a(e,t){return r.hasOwnProperty.call(e,t)}function l(e){return i[e]}function c(e,t,n){var o,r,i;if(e instanceof Error&&(e=(r=e).name+": "+r.message),Object.setPrototypeOf?Object.setPrototypeOf(o=Error(e),c.prototype):Object.defineProperty(o=this,"message",{enumerable:!1,writable:!0,value:e}),Object.defineProperty(o,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(o,this.constructor),r){var s=Object.getOwnPropertyDescriptor(r,"stack");(i=s&&(s.get||function(){return s.value}))||(i=function(){return r.stack})}else{var a=Error(e).stack;i=function(){return a}}return Object.defineProperty(o,"stack",{get:function(){return i.call(o)}}),Object.defineProperty(o,"cause",{value:r}),o.lineno=t,o.colno=n,o.firstUpdate=!0,o.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},o}function u(e){return"[object Function]"===r.toString.call(e)}function p(e){return"[object Array]"===r.toString.call(e)}function h(e){return"[object String]"===r.toString.call(e)}function f(e){return"[object Object]"===r.toString.call(e)}function d(e){var t,n=(t=e)?"string"==typeof t?t.split("."):[t]:[];return function(e){for(var t=e,o=0;o<n.length;o++){var r=n[o];if(!a(t,r))return;t=t[r]}return t}}function m(e){return Array.prototype.slice.call(e)}function v(e,t,n){return Array.prototype.indexOf.call(e||[],t,n)}function g(e){var t=[];for(var n in e)a(e,n)&&t.push(n);return t}(t=e.exports={}).hasOwnProp=a,t.t=function(e,n,o){if(o.Update||(o=new t.TemplateError(o)),o.Update(e),!n){var r=o;(o=Error(r.message)).name=r.name}return o},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),t.TemplateError=c,t.escape=function(e){return e.replace(s,l)},t.isFunction=u,t.isArray=p,t.isString=h,t.isObject=f,t.getAttrGetter=d,t.groupBy=function(e,t,n){for(var o={},r=u(t)?t:d(t),i=0;i<e.length;i++){var s=e[i],a=r(s,i);if(void 0===a&&!0===n)throw new TypeError('groupby: attribute "'+t+'" resolved to undefined');(o[a]||(o[a]=[])).push(s)}return o},t.toArray=m,t.without=function(e){var t=[];if(!e)return t;for(var n=e.length,o=m(arguments).slice(1),r=-1;++r<n;)-1===v(o,e[r])&&t.push(e[r]);return t},t.repeat=function(e,t){for(var n="",o=0;o<t;o++)n+=e;return n},t.each=function(e,t,n){if(null!=e)if(o.forEach&&e.forEach===o.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},t.map=function(e,t){var n=[];if(null==e)return n;if(o.map&&e.map===o.map)return e.map(t);for(var r=0;r<e.length;r++)n[n.length]=t(e[r],r);return e.length===+e.length&&(n.length=e.length),n},t.asyncIter=function(e,t,n){var o=-1;!function r(){++o<e.length?t(e[o],o,r,n):n()}()},t.asyncFor=function(e,t,n){var o=g(e||{}),r=o.length,i=-1;!function s(){var a=o[++i];i<r?t(a,e[a],i,r,s):n()}()},t.indexOf=v,t.keys=g,t.r=function(e){return g(e).map((function(t){return[t,e[t]]}))},t.u=function(e){return g(e).map((function(t){return e[t]}))},t.h=t.extend=function(e,t){return e=e||{},g(t).forEach((function(n){e[n]=t[n]})),e},t.inOperator=function(e,t){if(p(t)||h(t))return-1!==t.indexOf(e);if(f(t))return e in t;throw Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key))?r:r+"",o)}var r}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var a=n(16),l=n(0);function c(e,t,n){n=n||{},l.keys(n).forEach((function(t){var o,r;n[t]=(o=e.prototype[t],r=n[t],"function"!=typeof o||"function"!=typeof r?r:function(){var e=this.parent;this.parent=o;var t=r.apply(this,arguments);return this.parent=e,t})}));var o=function(e){function n(){return e.apply(this,arguments)||this}return i(n,e),r(n,[{key:"typename",get:function(){return t}}]),n}(e);return l.h(o.prototype,n),o}var u=function(){function e(){this.init.apply(this,arguments)}return e.prototype.init=function(){},e.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),c(this,e,t)},r(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(),p=function(e){function t(){var t,n;return(t=n=e.call(this)||this).init.apply(t,arguments),n}return i(t,e),t.prototype.init=function(){},t.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),c(this,e,t)},r(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(a);e.exports={Obj:u,EmitterObj:p}},function(e,t,n){"use strict";var o=n(0),r=Array.from,i="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof r,s=function(){function e(e,t){this.variables=Object.create(null),this.parent=e,this.topLevel=!1,this.isolateWrites=t}var t=e.prototype;return t.set=function(e,t,n){var o=e.split("."),r=this.variables,i=this;if(n&&(i=this.resolve(o[0],!0)))i.set(e,t);else{for(var s=0;s<o.length-1;s++){var a=o[s];r[a]||(r[a]={}),r=r[a]}r[o[o.length-1]]=t}},t.get=function(e){var t=this.variables[e];return void 0!==t?t:null},t.lookup=function(e){var t=this.parent,n=this.variables[e];return void 0!==n?n:t&&t.lookup(e)},t.resolve=function(e,t){var n=t&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[e]?this:n&&n.resolve(e)},t.push=function(t){return new e(this,t)},t.pop=function(){return this.parent},e}();function a(e){return e&&Object.prototype.hasOwnProperty.call(e,"__keywords")}function l(e){var t=e.length;return 0===t?0:a(e[t-1])?t-1:t}function c(e){if("string"!=typeof e)return e;this.val=e,this.length=e.length}c.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),c.prototype.valueOf=function(){return this.val},c.prototype.toString=function(){return this.val},e.exports={Frame:s,makeMacro:function(e,t,n){return function(){for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];var s,c=l(r),u=function(e){var t=e.length;if(t){var n=e[t-1];if(a(n))return n}return{}}(r);if(c>e.length)s=r.slice(0,e.length),r.slice(s.length,c).forEach((function(e,n){n<t.length&&(u[t[n]]=e)})),s.push(u);else if(c<e.length){s=r.slice(0,c);for(var p=c;p<e.length;p++){var h=e[p];s.push(u[h]),delete u[h]}s.push(u)}else s=r;return n.apply(this,s)}},makeKeywordArgs:function(e){return e.__keywords=!0,e},numArgs:l,suppressValue:function(e,t){return e=null!=e?e:"",!t||e instanceof c||(e=o.escape(e.toString())),e},ensureDefined:function(e,t,n){if(null==e)throw new o.TemplateError("attempted to output null or undefined value",t+1,n+1);return e},memberLookup:function(e,t){if(null!=e)return"function"==typeof e[t]?function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return e[t].apply(e,o)}:e[t]},contextOrFrameLookup:function(e,t,n){var o=t.lookup(n);return void 0!==o?o:e.lookup(n)},callWrap:function(e,t,n,o){if(!e)throw Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw Error("Unable to call `"+t+"`, which is not a function");return e.apply(n,o)},handleError:function(e,t,n){return e.lineno?e:new o.TemplateError(e,t,n)},isArray:o.isArray,keys:o.keys,SafeString:c,copySafeness:function(e,t){return e instanceof c?new c(t):t.toString()},markSafe:function(e){var t=typeof e;return"string"===t?new c(e):"function"!==t?e:function(t){var n=e.apply(this,arguments);return"string"==typeof n?new c(n):n}},asyncEach:function(e,t,n,r){if(o.isArray(e)){var i=e.length;o.asyncIter(e,(function(e,o,r){switch(t){case 1:n(e,o,i,r);break;case 2:n(e[0],e[1],o,i,r);break;case 3:n(e[0],e[1],e[2],o,i,r);break;default:e.push(o,i,r),n.apply(this,e)}}),r)}else o.asyncFor(e,(function(e,t,o,r,i){n(e,t,o,r,i)}),r)},asyncAll:function(e,t,n,r){var i,s,a=0;function l(e,t){a++,s[e]=t,a===i&&r(null,s.join(""))}if(o.isArray(e))if(i=e.length,s=Array(i),0===i)r(null,"");else for(var c=0;c<e.length;c++){var u=e[c];switch(t){case 1:n(u,c,i,l);break;case 2:n(u[0],u[1],c,i,l);break;case 3:n(u[0],u[1],u[2],c,i,l);break;default:u.push(c,i,l),n.apply(this,u)}}else{var p=o.keys(e||{});if(i=p.length,s=Array(i),0===i)r(null,"");else for(var h=0;h<p.length;h++){var f=p[h];n(f,e[f],h,i,l)}}},inOperator:o.inOperator,fromIterator:function(e){return"object"!=typeof e||null===e||o.isArray(e)?e:i&&Symbol.iterator in e?r(e):e}}},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key))?r:r+"",o)}var r}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,n){e instanceof t&&n.push(e),e instanceof l&&e.findAll(t,n)}var l=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(e,t){for(var n=arguments,o=this,r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];this.lineno=e,this.colno=t,this.fields.forEach((function(e,t){var r=n[t+2];void 0===r&&(r=null),o[e]=r}))},n.findAll=function(e,t){var n=this;return t=t||[],this instanceof u?this.children.forEach((function(n){return a(n,e,t)})):this.fields.forEach((function(o){return a(n[o],e,t)})),t},n.iterFields=function(e){var t=this;this.fields.forEach((function(n){e(t[n],n)}))},t}(n(1).Obj),c=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),r(t,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),t}(l),u=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(t,n,o){e.prototype.init.call(this,t,n,o||[])},n.addChild=function(e){this.children.push(e)},r(t,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),t}(l),p=u.extend("Root"),h=c.extend("Literal"),f=c.extend("Symbol"),d=u.extend("Group"),m=u.extend("Array"),v=l.extend("Pair",{fields:["key","value"]}),g=u.extend("Dict"),y=l.extend("LookupVal",{fields:["target","val"]}),b=l.extend("If",{fields:["cond","body","else_"]}),_=b.extend("IfAsync"),k=l.extend("InlineIf",{fields:["cond","body","else_"]}),w=l.extend("For",{fields:["arr","name","body","else_"]}),x=w.extend("AsyncEach"),E=w.extend("AsyncAll"),O=l.extend("Macro",{fields:["name","args","body"]}),L=O.extend("Caller"),T=l.extend("Import",{fields:["template","target","withContext"]}),S=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(t,n,o,r,i){e.prototype.init.call(this,t,n,o,r||new u,i)},r(t,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),t}(l),A=l.extend("FunCall",{fields:["name","args"]}),C=A.extend("Filter"),N=C.extend("FilterAsync",{fields:["name","args","symbol"]}),F=g.extend("KeywordArgs"),I=l.extend("Block",{fields:["name","body"]}),j=l.extend("Super",{fields:["blockName","symbol"]}),P=l.extend("TemplateRef",{fields:["template"]}).extend("Extends"),D=l.extend("Include",{fields:["template","ignoreMissing"]}),V=l.extend("Set",{fields:["targets","value"]}),K=l.extend("Switch",{fields:["expr","cases","default"]}),M=l.extend("Case",{fields:["cond","body"]}),R=u.extend("Output"),B=l.extend("Capture",{fields:["body"]}),U=h.extend("TemplateData"),W=l.extend("UnaryOp",{fields:["target"]}),G=l.extend("BinOp",{fields:["left","right"]}),H=G.extend("In"),q=G.extend("Is"),z=G.extend("Or"),$=G.extend("And"),Y=W.extend("Not"),X=G.extend("Add"),Q=G.extend("Concat"),J=G.extend("Sub"),Z=G.extend("Mul"),ee=G.extend("Div"),te=G.extend("FloorDiv"),ne=G.extend("Mod"),oe=G.extend("Pow"),re=W.extend("Neg"),ie=W.extend("Pos"),se=l.extend("Compare",{fields:["expr","ops"]}),ae=l.extend("CompareOperand",{fields:["expr","type"]}),le=l.extend("CallExtension",{init:function(e,t,n,o){this.parent(),this.extName=e.__name||e,this.prop=t,this.args=n||new u,this.contentArgs=o||[],this.autoescape=e.autoescape},fields:["extName","prop","args","contentArgs"]}),ce=le.extend("CallExtensionAsync");function ue(e,t,n){var o=e.split("\n");o.forEach((function(e,r){e&&(n&&r>0||!n)&&process.stdout.write(" ".repeat(t));var i=r===o.length-1?"":"\n";process.stdout.write(""+e+i)}))}e.exports={Node:l,Root:p,NodeList:u,Value:c,Literal:h,Symbol:f,Group:d,Array:m,Pair:v,Dict:g,Output:R,Capture:B,TemplateData:U,If:b,IfAsync:_,InlineIf:k,For:w,AsyncEach:x,AsyncAll:E,Macro:O,Caller:L,Import:T,FromImport:S,FunCall:A,Filter:C,FilterAsync:N,KeywordArgs:F,Block:I,Super:j,Extends:P,Include:D,Set:V,Switch:K,Case:M,LookupVal:y,BinOp:G,In:H,Is:q,Or:z,And:$,Not:Y,Add:X,Concat:Q,Sub:J,Mul:Z,Div:ee,FloorDiv:te,Mod:ne,Pow:oe,Neg:re,Pos:ie,Compare:se,CompareOperand:ae,CallExtension:le,CallExtensionAsync:ce,printNodes:function e(t,n){if(n=n||0,ue(t.typename+": ",n),t instanceof u)ue("\n"),t.children.forEach((function(t){e(t,n+2)}));else if(t instanceof le)ue(t.extName+"."+t.prop+"\n"),t.args&&e(t.args,n+2),t.contentArgs&&t.contentArgs.forEach((function(t){e(t,n+2)}));else{var o=[],r=null;t.iterFields((function(e,t){e instanceof l?o.push([t,e]):(r=r||{})[t]=e})),r?ue(JSON.stringify(r,null,2)+"\n",null,!0):ue("\n"),o.forEach((function(t){var o=t[0],r=t[1];ue("["+o+"] =>",n+2),e(r,n+4)}))}}}},function(e,t){},function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=n(8),i=n(17),s=n(3),a=n(0).TemplateError,l=n(2).Frame,c={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},u=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var i=r.prototype;return i.init=function(e,t){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this.f="",this.inBlock=!1,this.throwOnUndefined=t},i.fail=function(e,t,n){throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new a(e,t,n)},i.a=function(){var e=this.v();return this.bufferStack.push(this.buffer),this.buffer=e,this.w("var "+this.buffer+' = "";'),e},i.b=function(){this.buffer=this.bufferStack.pop()},i.w=function(e){this.codebuf.push(e)},i.y=function(e){this.w(e+"\n")},i.g=function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];n.forEach((function(t){return e.y(t)}))},i.k=function(e,t){this.buffer="output",this.f="",this.y("function "+t+"(env, context, frame, runtime, cb) {"),this.y("var lineno = "+e.lineno+";"),this.y("var colno = "+e.colno+";"),this.y("var "+this.buffer+' = "";'),this.y("try {")},i.O=function(e){e||this.y("cb(null, "+this.buffer+");"),this.x(),this.y("} catch (e) {"),this.y("  cb(runtime.handleError(e, lineno, colno));"),this.y("}"),this.y("}"),this.buffer=null},i.j=function(){this.f+="})"},i.x=function(){this.y(this.f+";"),this.f=""},i.T=function(e){var t=this.f;this.f="",e.call(this),this.x(),this.f=t},i.A=function(e){var t=this.v();return"function("+t+(e?","+e:"")+") {\nif("+t+") { cb("+t+"); return; }"},i.v=function(){return this.lastId++,"t_"+this.lastId},i.N=function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},i.S=function(e,t){var n=this;e.children.forEach((function(e){n.compile(e,t)}))},i._=function(e,t,n,o){var r=this;n&&this.w(n),e.children.forEach((function(e,n){n>0&&r.w(","),r.compile(e,t)})),o&&this.w(o)},i.L=function(e,t){this.assertType(e,s.Literal,s.Symbol,s.Group,s.Array,s.Dict,s.FunCall,s.Caller,s.Filter,s.LookupVal,s.Compare,s.InlineIf,s.In,s.Is,s.And,s.Or,s.Not,s.Add,s.Concat,s.Sub,s.Mul,s.Div,s.FloorDiv,s.Mod,s.Pow,s.Neg,s.Pos,s.Compare,s.NodeList),this.compile(e,t)},i.assertType=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n.some((function(t){return e instanceof t}))||this.fail("assertType: invalid type: "+e.typename,e.lineno,e.colno)},i.compileCallExtension=function(e,t,n){var o=this,r=e.args,i=e.contentArgs,a="boolean"!=typeof e.autoescape||e.autoescape;if(n||this.w(this.buffer+" += runtime.suppressValue("),this.w('env.getExtension("'+e.extName+'")["'+e.prop+'"]('),this.w("context"),(r||i)&&this.w(","),r&&(r instanceof s.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),r.children.forEach((function(e,n){o.L(e,t),(n!==r.children.length-1||i.length)&&o.w(",")}))),i.length&&i.forEach((function(e,n){if(n>0&&o.w(","),e){o.y("function(cb) {"),o.y("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var r=o.a();o.T((function(){o.compile(e,t),o.y("cb(null, "+r+");")})),o.b(),o.y("return "+r+";"),o.y("}")}else o.w("null")})),n){var l=this.v();this.y(", "+this.A(l)),this.y(this.buffer+" += runtime.suppressValue("+l+", "+a+" && env.opts.autoescape);"),this.j()}else this.w(")"),this.w(", "+a+" && env.opts.autoescape);\n")},i.compileCallExtensionAsync=function(e,t){this.compileCallExtension(e,t,!0)},i.compileNodeList=function(e,t){this.S(e,t)},i.compileLiteral=function(e){if("string"==typeof e.value){var t=e.value.replace(/\\/g,"\\\\");t=(t=(t=(t=(t=t.replace(/"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t")).replace(/\u2028/g,"\\u2028"),this.w('"'+t+'"')}else null===e.value?this.w("null"):this.w(e.value.toString())},i.compileSymbol=function(e,t){var n=e.value,o=t.lookup(n);o?this.w(o):this.w('runtime.contextOrFrameLookup(context, frame, "'+n+'")')},i.compileGroup=function(e,t){this._(e,t,"(",")")},i.compileArray=function(e,t){this._(e,t,"[","]")},i.compileDict=function(e,t){this._(e,t,"{","}")},i.compilePair=function(e,t){var n=e.key,o=e.value;n instanceof s.Symbol?n=new s.Literal(n.lineno,n.colno,n.value):n instanceof s.Literal&&"string"==typeof n.value||this.fail("compilePair: Dict keys must be strings or names",n.lineno,n.colno),this.compile(n,t),this.w(": "),this.L(o,t)},i.compileInlineIf=function(e,t){this.w("("),this.compile(e.cond,t),this.w("?"),this.compile(e.body,t),this.w(":"),null!==e.else_?this.compile(e.else_,t):this.w('""'),this.w(")")},i.compileIn=function(e,t){this.w("runtime.inOperator("),this.compile(e.left,t),this.w(","),this.compile(e.right,t),this.w(")")},i.compileIs=function(e,t){var n=e.right.name?e.right.name.value:e.right.value;this.w('env.getTest("'+n+'").call(context, '),this.compile(e.left,t),e.right.args&&(this.w(","),this.compile(e.right.args,t)),this.w(") === true")},i.F=function(e,t,n){this.compile(e.left,t),this.w(n),this.compile(e.right,t)},i.compileOr=function(e,t){return this.F(e,t," || ")},i.compileAnd=function(e,t){return this.F(e,t," && ")},i.compileAdd=function(e,t){return this.F(e,t," + ")},i.compileConcat=function(e,t){return this.F(e,t,' + "" + ')},i.compileSub=function(e,t){return this.F(e,t," - ")},i.compileMul=function(e,t){return this.F(e,t," * ")},i.compileDiv=function(e,t){return this.F(e,t," / ")},i.compileMod=function(e,t){return this.F(e,t," % ")},i.compileNot=function(e,t){this.w("!"),this.compile(e.target,t)},i.compileFloorDiv=function(e,t){this.w("Math.floor("),this.compile(e.left,t),this.w(" / "),this.compile(e.right,t),this.w(")")},i.compilePow=function(e,t){this.w("Math.pow("),this.compile(e.left,t),this.w(", "),this.compile(e.right,t),this.w(")")},i.compileNeg=function(e,t){this.w("-"),this.compile(e.target,t)},i.compilePos=function(e,t){this.w("+"),this.compile(e.target,t)},i.compileCompare=function(e,t){var n=this;this.compile(e.expr,t),e.ops.forEach((function(e){n.w(" "+c[e.type]+" "),n.compile(e.expr,t)}))},i.compileLookupVal=function(e,t){this.w("runtime.memberLookup(("),this.L(e.target,t),this.w("),"),this.L(e.val,t),this.w(")")},i.I=function(e){switch(e.typename){case"Symbol":return e.value;case"FunCall":return"the return value of ("+this.I(e.name)+")";case"LookupVal":return this.I(e.target)+'["'+this.I(e.val)+'"]';case"Literal":return e.value.toString();default:return"--expression--"}},i.compileFunCall=function(e,t){this.w("(lineno = "+e.lineno+", colno = "+e.colno+", "),this.w("runtime.callWrap("),this.L(e.name,t),this.w(', "'+this.I(e.name).replace(/"/g,'\\"')+'", context, '),this._(e.args,t,"[","])"),this.w(")")},i.compileFilter=function(e,t){var n=e.name;this.assertType(n,s.Symbol),this.w('env.getFilter("'+n.value+'").call(context, '),this._(e.args,t),this.w(")")},i.compileFilterAsync=function(e,t){var n=e.name,o=e.symbol.value;this.assertType(n,s.Symbol),t.set(o,o),this.w('env.getFilter("'+n.value+'").call(context, '),this._(e.args,t),this.y(", "+this.A(o)),this.j()},i.compileKeywordArgs=function(e,t){this.w("runtime.makeKeywordArgs("),this.compileDict(e,t),this.w(")")},i.compileSet=function(e,t){var n=this,o=[];e.targets.forEach((function(e){var r=e.value,i=t.lookup(r);null!=i||(i=n.v(),n.y("var "+i+";")),o.push(i)})),e.value?(this.w(o.join(" = ")+" = "),this.L(e.value,t),this.y(";")):(this.w(o.join(" = ")+" = "),this.compile(e.body,t),this.y(";")),e.targets.forEach((function(e,t){var r=o[t],i=e.value;n.y('frame.set("'+i+'", '+r+", true);"),n.y("if(frame.topLevel) {"),n.y('context.setVariable("'+i+'", '+r+");"),n.y("}"),"_"!==i.charAt(0)&&(n.y("if(frame.topLevel) {"),n.y('context.addExport("'+i+'", '+r+");"),n.y("}"))}))},i.compileSwitch=function(e,t){var n=this;this.w("switch ("),this.compile(e.expr,t),this.w(") {"),e.cases.forEach((function(e,o){n.w("case "),n.compile(e.cond,t),n.w(": "),n.compile(e.body,t),e.body.children.length&&n.y("break;")})),e.default&&(this.w("default:"),this.compile(e.default,t)),this.w("}")},i.compileIf=function(e,t,n){var o=this;this.w("if("),this.L(e.cond,t),this.y(") {"),this.T((function(){o.compile(e.body,t),n&&o.w("cb()")})),e.else_?(this.y("}\nelse {"),this.T((function(){o.compile(e.else_,t),n&&o.w("cb()")}))):n&&(this.y("}\nelse {"),this.w("cb()")),this.y("}")},i.compileIfAsync=function(e,t){this.w("(function(cb) {"),this.compileIf(e,t,!0),this.w("})("+this.A()),this.j()},i.C=function(e,t,n,o){var r=this;[{name:"index",val:n+" + 1"},{name:"index0",val:n},{name:"revindex",val:o+" - "+n},{name:"revindex0",val:o+" - "+n+" - 1"},{name:"first",val:n+" === 0"},{name:"last",val:n+" === "+o+" - 1"},{name:"length",val:o}].forEach((function(e){r.y('frame.set("loop.'+e.name+'", '+e.val+");")}))},i.compileFor=function(e,t){var n=this,o=this.v(),r=this.v(),i=this.v();if(t=t.push(),this.y("frame = frame.push();"),this.w("var "+i+" = "),this.L(e.arr,t),this.y(";"),this.w("if("+i+") {"),this.y(i+" = runtime.fromIterator("+i+");"),e.name instanceof s.Array){this.y("var "+o+";"),this.y("if(runtime.isArray("+i+")) {"),this.y("var "+r+" = "+i+".length;"),this.y("for("+o+"=0; "+o+" < "+i+".length; "+o+"++) {"),e.name.children.forEach((function(r,s){var a=n.v();n.y("var "+a+" = "+i+"["+o+"]["+s+"];"),n.y('frame.set("'+r+'", '+i+"["+o+"]["+s+"]);"),t.set(e.name.children[s].value,a)})),this.C(e,i,o,r),this.T((function(){n.compile(e.body,t)})),this.y("}"),this.y("} else {");var a=e.name.children,l=a[0],c=a[1],u=this.v(),p=this.v();t.set(l.value,u),t.set(c.value,p),this.y(o+" = -1;"),this.y("var "+r+" = runtime.keys("+i+").length;"),this.y("for(var "+u+" in "+i+") {"),this.y(o+"++;"),this.y("var "+p+" = "+i+"["+u+"];"),this.y('frame.set("'+l.value+'", '+u+");"),this.y('frame.set("'+c.value+'", '+p+");"),this.C(e,i,o,r),this.T((function(){n.compile(e.body,t)})),this.y("}"),this.y("}")}else{var h=this.v();t.set(e.name.value,h),this.y("var "+r+" = "+i+".length;"),this.y("for(var "+o+"=0; "+o+" < "+i+".length; "+o+"++) {"),this.y("var "+h+" = "+i+"["+o+"];"),this.y('frame.set("'+e.name.value+'", '+h+");"),this.C(e,i,o,r),this.T((function(){n.compile(e.body,t)})),this.y("}")}this.y("}"),e.else_&&(this.y("if (!"+r+") {"),this.compile(e.else_,t),this.y("}")),this.y("frame = frame.pop();")},i.R=function(e,t,n){var o=this,r=this.v(),i=this.v(),a=this.v(),l=n?"asyncAll":"asyncEach";if(t=t.push(),this.y("frame = frame.push();"),this.w("var "+a+" = runtime.fromIterator("),this.L(e.arr,t),this.y(");"),e.name instanceof s.Array){var c=e.name.children.length;this.w("runtime."+l+"("+a+", "+c+", function("),e.name.children.forEach((function(e){o.w(e.value+",")})),this.w(r+","+i+",next) {"),e.name.children.forEach((function(e){var n=e.value;t.set(n,n),o.y('frame.set("'+n+'", '+n+");")}))}else{var u=e.name.value;this.y("runtime."+l+"("+a+", 1, function("+u+", "+r+", "+i+",next) {"),this.y('frame.set("'+u+'", '+u+");"),t.set(u,u)}this.C(e,a,r,i),this.T((function(){var i;n&&(i=o.a()),o.compile(e.body,t),o.y("next("+r+(i?","+i:"")+");"),n&&o.b()}));var p=this.v();this.y("}, "+this.A(p)),this.j(),n&&this.y(this.buffer+" += "+p+";"),e.else_&&(this.y("if (!"+a+".length) {"),this.compile(e.else_,t),this.y("}")),this.y("frame = frame.pop();")},i.compileAsyncEach=function(e,t){this.R(e,t)},i.compileAsyncAll=function(e,t){this.R(e,t,!0)},i.K=function(e,t){var n=this,o=[],r=null,i="macro_"+this.v(),a=void 0!==t;e.args.children.forEach((function(t,i){i===e.args.children.length-1&&t instanceof s.Dict?r=t:(n.assertType(t,s.Symbol),o.push(t))}));var c,u=[].concat(o.map((function(e){return"l_"+e.value})),["kwargs"]),p=o.map((function(e){return'"'+e.value+'"'})),h=(r&&r.children||[]).map((function(e){return'"'+e.key.value+'"'}));c=a?t.push(!0):new l,this.g("var "+i+" = runtime.makeMacro(","["+p.join(", ")+"], ","["+h.join(", ")+"], ","function ("+u.join(", ")+") {","var callerFrame = frame;","frame = "+(a?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),o.forEach((function(e){n.y('frame.set("'+e.value+'", l_'+e.value+");"),c.set(e.value,"l_"+e.value)})),r&&r.children.forEach((function(e){var t=e.key.value;n.w('frame.set("'+t+'", '),n.w('Object.prototype.hasOwnProperty.call(kwargs, "'+t+'")'),n.w(' ? kwargs["'+t+'"] : '),n.L(e.value,c),n.w(");")}));var f=this.a();return this.T((function(){n.compile(e.body,c)})),this.y("frame = "+(a?"frame.pop();":"callerFrame;")),this.y("return new runtime.SafeString("+f+");"),this.y("});"),this.b(),i},i.compileMacro=function(e,t){var n=this.K(e),o=e.name.value;t.set(o,n),t.parent?this.y('frame.set("'+o+'", '+n+");"):("_"!==e.name.value.charAt(0)&&this.y('context.addExport("'+o+'");'),this.y('context.setVariable("'+o+'", '+n+");"))},i.compileCaller=function(e,t){this.w("(function (){");var n=this.K(e,t);this.w("return "+n+";})()")},i.M=function(e,t,n,o){var r=this.v(),i=this.N(),s=this.A(r),a=n?"true":"false",l=o?"true":"false";return this.w("env.getTemplate("),this.L(e.template,t),this.y(", "+a+", "+i+", "+l+", "+s),r},i.compileImport=function(e,t){var n=e.target.value,o=this.M(e,t,!1,!1);this.j(),this.y(o+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this.A(o)),this.j(),t.set(n,o),t.parent?this.y('frame.set("'+n+'", '+o+");"):this.y('context.setVariable("'+n+'", '+o+");")},i.compileFromImport=function(e,t){var n=this,o=this.M(e,t,!1,!1);this.j(),this.y(o+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this.A(o)),this.j(),e.names.children.forEach((function(e){var r,i,a=n.v();e instanceof s.Pair?(r=e.key.value,i=e.value.value):i=r=e.value,n.y("if(Object.prototype.hasOwnProperty.call("+o+', "'+r+'")) {'),n.y("var "+a+" = "+o+"."+r+";"),n.y("} else {"),n.y("cb(new Error(\"cannot import '"+r+"'\")); return;"),n.y("}"),t.set(i,a),t.parent?n.y('frame.set("'+i+'", '+a+");"):n.y('context.setVariable("'+i+'", '+a+");")}))},i.compileBlock=function(e){var t=this.v();this.inBlock||this.w('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this.w('context.getBlock("'+e.name.value+'")'),this.inBlock||this.w(")"),this.y("(env, context, frame, runtime, "+this.A(t)),this.y(this.buffer+" += "+t+";"),this.j()},i.compileSuper=function(e,t){var n=e.blockName.value,o=e.symbol.value,r=this.A(o);this.y('context.getSuper(env, "'+n+'", b_'+n+", frame, runtime, "+r),this.y(o+" = runtime.markSafe("+o+");"),this.j(),t.set(o,o)},i.compileExtends=function(e,t){var n=this.v(),o=this.M(e,t,!0,!1);this.y("parentTemplate = "+o),this.y("for(var "+n+" in parentTemplate.blocks) {"),this.y("context.addBlock("+n+", parentTemplate.blocks["+n+"]);"),this.y("}"),this.j()},i.compileInclude=function(e,t){this.y("var tasks = [];"),this.y("tasks.push("),this.y("function(callback) {");var n=this.M(e,t,!1,e.ignoreMissing);this.y("callback(null,"+n+");});"),this.y("});");var o=this.v();this.y("tasks.push("),this.y("function(template, callback){"),this.y("template.render(context.getVariables(), frame, "+this.A(o)),this.y("callback(null,"+o+");});"),this.y("});"),this.y("tasks.push("),this.y("function(result, callback){"),this.y(this.buffer+" += result;"),this.y("callback(null);"),this.y("});"),this.y("env.waterfall(tasks, function(){"),this.j()},i.compileTemplateData=function(e,t){this.compileLiteral(e,t)},i.compileCapture=function(e,t){var n=this,o=this.buffer;this.buffer="output",this.y("(function() {"),this.y('var output = "";'),this.T((function(){n.compile(e.body,t)})),this.y("return output;"),this.y("})()"),this.buffer=o},i.compileOutput=function(e,t){var n=this;e.children.forEach((function(o){o instanceof s.TemplateData?o.value&&(n.w(n.buffer+" += "),n.compileLiteral(o,t),n.y(";")):(n.w(n.buffer+" += runtime.suppressValue("),n.throwOnUndefined&&n.w("runtime.ensureDefined("),n.compile(o,t),n.throwOnUndefined&&n.w(","+e.lineno+","+e.colno+")"),n.w(", env.opts.autoescape);\n"))}))},i.compileRoot=function(e,t){var n=this;t&&this.fail("compileRoot: root node can't have frame"),t=new l,this.k(e,"root"),this.y("var parentTemplate = null;"),this.S(e,t),this.y("if(parentTemplate) {"),this.y("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this.y("} else {"),this.y("cb(null, "+this.buffer+");"),this.y("}"),this.O(!0),this.inBlock=!0;var o=[],r=e.findAll(s.Block);r.forEach((function(e,t){var r=e.name.value;if(-1!==o.indexOf(r))throw Error('Block "'+r+'" defined more than once.');o.push(r),n.k(e,"b_"+r);var i=new l;n.y("var frame = frame.push(true);"),n.compile(e.body,i),n.O()})),this.y("return {"),r.forEach((function(e,t){var o="b_"+e.name.value;n.y(o+": "+o+",")})),this.y("root: root\n};")},i.compile=function(e,t){var n=this["compile"+e.typename];n?n.call(this,e,t):this.fail("compile: Cannot compile node: "+e.typename,e.lineno,e.colno)},i.getCode=function(){return this.codebuf.join("")},r}(n(1).Obj);e.exports={compile:function(e,t,n,o,s){void 0===s&&(s={});var a=new u(o,s.throwOnUndefined),l=(n||[]).map((function(e){return e.preprocess})).filter((function(e){return!!e})).reduce((function(e,t){return t(e)}),e);return a.compile(i.transform(r.parse(l,n,s),t,o)),a.getCode()},Compiler:u}},function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4),i=n(1).EmitterObj;e.exports=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var s=i.prototype;return s.resolve=function(e,t){return r.resolve(r.dirname(e),t)},s.isRelative=function(e){return 0===e.indexOf("./")||0===e.indexOf("../")},i}(i)},function(e,t,n){"use strict";function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=n(12),s=n(15),a=n(0),l=n(5),c=n(18),u=n(10),p=u.FileSystemLoader,h=u.WebLoader,f=u.PrecompiledLoader,d=n(20),m=n(21),v=n(1),g=v.Obj,y=v.EmitterObj,b=n(2),_=b.handleError,k=b.Frame,w=n(22);function x(e,t,n){i((function(){e(t,n)}))}var E={type:"code",obj:{root:function(e,t,n,o,r){try{r(null,"")}catch(e){r(_(e,null,null))}}}},O=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.init=function(e,t){var n=this;t=this.opts=t||{},this.opts.dev=!!t.dev,this.opts.autoescape=null==t.autoescape||t.autoescape,this.opts.throwOnUndefined=!!t.throwOnUndefined,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=[],e?this.loaders=a.isArray(e)?e:[e]:p?this.loaders=[new p("views")]:h&&(this.loaders=[new h("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new f(window.nunjucksPrecompiled)),this.P(),this.globals=m(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],a.r(c).forEach((function(e){var t=e[0],o=e[1];return n.addFilter(t,o)})),a.r(d).forEach((function(e){var t=e[0],o=e[1];return n.addTest(t,o)}))},n.P=function(){var e=this;this.loaders.forEach((function(t){t.cache={},"function"==typeof t.on&&(t.on("update",(function(n,o){t.cache[n]=null,e.emit("update",n,o,t)})),t.on("load",(function(n,o){e.emit("load",n,o,t)})))}))},n.invalidateCache=function(){this.loaders.forEach((function(e){e.cache={}}))},n.addExtension=function(e,t){return t.__name=e,this.extensions[e]=t,this.extensionsList.push(t),this},n.removeExtension=function(e){var t=this.getExtension(e);t&&(this.extensionsList=a.without(this.extensionsList,t),delete this.extensions[e])},n.getExtension=function(e){return this.extensions[e]},n.hasExtension=function(e){return!!this.extensions[e]},n.addGlobal=function(e,t){return this.globals[e]=t,this},n.getGlobal=function(e){if(void 0===this.globals[e])throw Error("global not found: "+e);return this.globals[e]},n.addFilter=function(e,t,n){var o=t;return n&&this.asyncFilters.push(e),this.filters[e]=o,this},n.getFilter=function(e){if(!this.filters[e])throw Error("filter not found: "+e);return this.filters[e]},n.addTest=function(e,t){return this.tests[e]=t,this},n.getTest=function(e){if(!this.tests[e])throw Error("test not found: "+e);return this.tests[e]},n.resolveTemplate=function(e,t,n){return e.isRelative&&t&&e.isRelative(n)&&e.resolve?e.resolve(t,n):n},n.getTemplate=function(e,t,n,o,r){var i,s=this,l=this,c=null;if(e&&e.raw&&(e=e.raw),a.isFunction(n)&&(r=n,n=null,t=t||!1),a.isFunction(t)&&(r=t,t=!1),e instanceof T)c=e;else{if("string"!=typeof e)throw Error("template names must be a string: "+e);for(var u=0;u<this.loaders.length;u++){var p=this.loaders[u];if(c=p.cache[this.resolveTemplate(p,n,e)])break}}return c?(t&&c.compile(),r?void r(null,c):c):(a.asyncIter(this.loaders,(function(t,o,r,i){function s(e,n){e?i(e):n?(n.loader=t,i(null,n)):r()}e=l.resolveTemplate(t,n,e),t.async?t.getSource(e,s):s(null,t.getSource(e))}),(function(n,a){if(a||n||o||(n=Error("template not found: "+e)),n){if(r)return void r(n);throw n}var l;a?(l=new T(a.src,s,a.path,t),a.noCache||(a.loader.cache[e]=l)):l=new T(E,s,"",t),r?r(null,l):i=l})),i)},n.express=function(e){return w(this,e)},n.render=function(e,t,n){a.isFunction(t)&&(n=t,t=null);var o=null;return this.getTemplate(e,(function(e,r){if(e&&n)x(n,e);else{if(e)throw e;o=r.render(t,n)}})),o},n.renderString=function(e,t,n,o){return a.isFunction(n)&&(o=n,n={}),new T(e,this,(n=n||{}).path).render(t,o)},n.waterfall=function(e,t,n){return s(e,t,n)},t}(y),L=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.init=function(e,t,n){var o=this;this.env=n||new O,this.ctx=a.extend({},e),this.blocks={},this.exported=[],a.keys(t).forEach((function(e){o.addBlock(e,t[e])}))},n.lookup=function(e){return e in this.env.globals&&!(e in this.ctx)?this.env.globals[e]:this.ctx[e]},n.setVariable=function(e,t){this.ctx[e]=t},n.getVariables=function(){return this.ctx},n.addBlock=function(e,t){return this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t),this},n.getBlock=function(e){if(!this.blocks[e])throw Error('unknown block "'+e+'"');return this.blocks[e][0]},n.getSuper=function(e,t,n,o,r,i){var s=a.indexOf(this.blocks[t]||[],n),l=this.blocks[t][s+1];if(-1===s||!l)throw Error('no super block available for "'+t+'"');l(e,this,o,r,i)},n.addExport=function(e){this.exported.push(e)},n.getExported=function(){var e=this,t={};return this.exported.forEach((function(n){t[n]=e.ctx[n]})),t},t}(g),T=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.init=function(e,t,n,o){if(this.env=t||new O,a.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj;break;default:throw Error("Unexpected template object type "+e.type+"; expected 'code', or 'string'")}else{if(!a.isString(e))throw Error("src must be a string or an object describing the source");this.tmplStr=e}if(this.path=n,o)try{this.B()}catch(e){throw a.t(this.path,this.env.opts.dev,e)}else this.compiled=!1},n.render=function(e,t,n){var o=this;"function"==typeof e?(n=e,e={}):"function"==typeof t&&(n=t,t=null);var r=!t;try{this.compile()}catch(e){var i=a.t(this.path,this.env.opts.dev,e);if(n)return x(n,i);throw i}var s=new L(e||{},this.blocks,this.env),l=t?t.push(!0):new k;l.topLevel=!0;var c=null,u=!1;return this.rootRenderFunc(this.env,s,l,b,(function(e,t){if(!u||!n||void 0===t)if(e&&(e=a.t(o.path,o.env.opts.dev,e),u=!0),n)r?x(n,e,t):n(e,t);else{if(e)throw e;c=t}})),c},n.getExported=function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(e){if(n)return n(e);throw e}var o=t?t.push():new k;o.topLevel=!0;var r=new L(e||{},this.blocks,this.env);this.rootRenderFunc(this.env,r,o,b,(function(e){e?n(e,null):n(null,r.getExported())}))},n.compile=function(){this.compiled||this.B()},n.B=function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=l.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);e=Function(t)()}this.blocks=this.V(e),this.rootRenderFunc=e.root,this.compiled=!0},n.V=function(e){var t={};return a.keys(e).forEach((function(n){"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n])})),t},t}(g);e.exports={Environment:O,Template:T}},function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=n(9),i=n(3),s=n(1).Obj,a=n(0),l=function(e){var t,n;function s(){return e.apply(this,arguments)||this}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var l=s.prototype;return l.init=function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},l.nextToken=function(e){var t;if(this.peeked){if(e||this.peeked.type!==r.TOKEN_WHITESPACE)return t=this.peeked,this.peeked=null,t;this.peeked=null}if(t=this.tokens.nextToken(),!e)for(;t&&t.type===r.TOKEN_WHITESPACE;)t=this.tokens.nextToken();return t},l.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},l.pushToken=function(e){if(this.peeked)throw Error("pushToken: can only push one token on between reads");this.peeked=e},l.error=function(e,t,n){if(void 0===t||void 0===n){var o=this.peekToken()||{};t=o.lineno,n=o.colno}return void 0!==t&&(t+=1),void 0!==n&&(n+=1),new a.TemplateError(e,t,n)},l.fail=function(e,t,n){throw this.error(e,t,n)},l.skip=function(e){var t=this.nextToken();return!(!t||t.type!==e)||(this.pushToken(t),!1)},l.expect=function(e){var t=this.nextToken();return t.type!==e&&this.fail("expected "+e+", got "+t.type,t.lineno,t.colno),t},l.skipValue=function(e,t){var n=this.nextToken();return!(!n||n.type!==e||n.value!==t)||(this.pushToken(n),!1)},l.skipSymbol=function(e){return this.skipValue(r.TOKEN_SYMBOL,e)},l.advanceAfterBlockEnd=function(e){var t;return e||((t=this.peekToken())||this.fail("unexpected end of file"),t.type!==r.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),e=this.nextToken().value),(t=this.nextToken())&&t.type===r.TOKEN_BLOCK_END?"-"===t.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+e+" statement"),t},l.advanceAfterVariableEnd=function(){var e=this.nextToken();e&&e.type===r.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(e),this.fail("expected variable end"))},l.parseFor=function(){var e,t,n=this.peekToken();if(this.skipSymbol("for")?(e=new i.For(n.lineno,n.colno),t="endfor"):this.skipSymbol("asyncEach")?(e=new i.AsyncEach(n.lineno,n.colno),t="endeach"):this.skipSymbol("asyncAll")?(e=new i.AsyncAll(n.lineno,n.colno),t="endall"):this.fail("parseFor: expected for{Async}",n.lineno,n.colno),e.name=this.parsePrimary(),e.name instanceof i.Symbol||this.fail("parseFor: variable name expected for loop"),this.peekToken().type===r.TOKEN_COMMA){var o=e.name;for(e.name=new i.Array(o.lineno,o.colno),e.name.addChild(o);this.skip(r.TOKEN_COMMA);){var s=this.parsePrimary();e.name.addChild(s)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',n.lineno,n.colno),e.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),e.body=this.parseUntilBlocks(t,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),e.else_=this.parseUntilBlocks(t)),this.advanceAfterBlockEnd(),e},l.parseMacro=function(){var e=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var t=this.parsePrimary(!0),n=this.parseSignature(),o=new i.Macro(e.lineno,e.colno,t,n);return this.advanceAfterBlockEnd(e.value),o.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),o},l.parseCall=function(){var e=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var t=this.parseSignature(!0)||new i.NodeList,n=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var o=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var r=new i.Symbol(e.lineno,e.colno,"caller"),s=new i.Caller(e.lineno,e.colno,r,t,o),a=n.args.children;return a[a.length-1]instanceof i.KeywordArgs||a.push(new i.KeywordArgs),a[a.length-1].addChild(new i.Pair(e.lineno,e.colno,r,s)),new i.Output(e.lineno,e.colno,[n])},l.parseWithContext=function(){var e=this.peekToken(),t=null;return this.skipSymbol("with")?t=!0:this.skipSymbol("without")&&(t=!1),null!==t&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",e.lineno,e.colno)),t},l.parseImport=function(){var e=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",e.lineno,e.colno);var t=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',e.lineno,e.colno);var n=this.parseExpression(),o=this.parseWithContext(),r=new i.Import(e.lineno,e.colno,t,n,o);return this.advanceAfterBlockEnd(e.value),r},l.parseFrom=function(){var e=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var t=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",e.lineno,e.colno);for(var n,o=new i.NodeList;;){var s=this.peekToken();if(s.type===r.TOKEN_BLOCK_END){o.children.length||this.fail("parseFrom: Expected at least one import name",e.lineno,e.colno),"-"===s.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}o.children.length>0&&!this.skip(r.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",e.lineno,e.colno);var a=this.parsePrimary();if("_"===a.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",a.lineno,a.colno),this.skipSymbol("as")){var l=this.parsePrimary();o.addChild(new i.Pair(a.lineno,a.colno,a,l))}else o.addChild(a);n=this.parseWithContext()}return new i.FromImport(e.lineno,e.colno,t,o,n)},l.parseBlock=function(){var e=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",e.lineno,e.colno);var t=new i.Block(e.lineno,e.colno);t.name=this.parsePrimary(),t.name instanceof i.Symbol||this.fail("parseBlock: variable name expected",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(t.name.value);var n=this.peekToken();return n||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(n.value),t},l.parseExtends=function(){var e=this.peekToken();this.skipSymbol("extends")||this.fail("parseTemplateRef: expected extends");var t=new i.Extends(e.lineno,e.colno);return t.template=this.parseExpression(),this.advanceAfterBlockEnd(e.value),t},l.parseInclude=function(){var e=this.peekToken();this.skipSymbol("include")||this.fail("parseInclude: expected include");var t=new i.Include(e.lineno,e.colno);return t.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(t.ignoreMissing=!0),this.advanceAfterBlockEnd(e.value),t},l.parseIf=function(){var e,t=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?e=new i.If(t.lineno,t.colno):this.skipSymbol("ifAsync")?e=new i.IfAsync(t.lineno,t.colno):this.fail("parseIf: expected if, elif, or elseif",t.lineno,t.colno),e.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks("elif","elseif","else","endif");var n=this.peekToken();switch(n&&n.value){case"elseif":case"elif":e.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),e.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":e.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return e},l.parseSet=function(){var e=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",e.lineno,e.colno);for(var t,n=new i.Set(e.lineno,e.colno,[]);(t=this.parsePrimary())&&(n.targets.push(t),this.skip(r.TOKEN_COMMA)););return this.skipValue(r.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value)):this.skip(r.TOKEN_BLOCK_END)?(n.body=new i.Capture(e.lineno,e.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",e.lineno,e.colno),n},l.parseSwitch=function(){var e=this.peekToken();this.skipSymbol("switch")||this.skipSymbol("case")||this.skipSymbol("default")||this.fail('parseSwitch: expected "switch," "case" or "default"',e.lineno,e.colno);var t=this.parseExpression();this.advanceAfterBlockEnd("switch"),this.parseUntilBlocks("case","default","endswitch");var n,o=this.peekToken(),r=[];do{this.skipSymbol("case");var s=this.parseExpression();this.advanceAfterBlockEnd("switch");var a=this.parseUntilBlocks("case","default","endswitch");r.push(new i.Case(o.line,o.col,s,a)),o=this.peekToken()}while(o&&"case"===o.value);switch(o.value){case"default":this.advanceAfterBlockEnd(),n=this.parseUntilBlocks("endswitch"),this.advanceAfterBlockEnd();break;case"endswitch":this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new i.Switch(e.lineno,e.colno,t,r,n)},l.parseStatement=function(){var e=this.peekToken();if(e.type!==r.TOKEN_SYMBOL&&this.fail("tag name expected",e.lineno,e.colno),this.breakOnBlocks&&-1!==a.indexOf(this.breakOnBlocks,e.value))return null;switch(e.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var t=0;t<this.extensions.length;t++){var n=this.extensions[t];if(-1!==a.indexOf(n.tags||[],e.value))return n.parse(this,i,r)}this.fail("unknown block tag: "+e.value,e.lineno,e.colno)}},l.parseRaw=function(e){for(var t="end"+(e=e||"raw"),n=RegExp("([\\s\\S]*?){%\\s*("+e+"|"+t+")\\s*(?=%})%}"),o=1,r="",s=null,a=this.advanceAfterBlockEnd();(s=this.tokens.D(n))&&o>0;){var l=s[0],c=s[1],u=s[2];u===e?o+=1:u===t&&(o-=1),0===o?(r+=c,this.tokens.backN(l.length-c.length)):r+=l}return new i.Output(a.lineno,a.colno,[new i.TemplateData(a.lineno,a.colno,r)])},l.parsePostfix=function(e){for(var t,n=this.peekToken();n;){if(n.type===r.TOKEN_LEFT_PAREN)e=new i.FunCall(n.lineno,n.colno,e,this.parseSignature());else if(n.type===r.TOKEN_LEFT_BRACKET)(t=this.parseAggregate()).children.length>1&&this.fail("invalid index"),e=new i.LookupVal(n.lineno,n.colno,e,t.children[0]);else{if(n.type!==r.TOKEN_OPERATOR||"."!==n.value)break;this.nextToken();var o=this.nextToken();o.type!==r.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+o.value,o.lineno,o.colno),t=new i.Literal(o.lineno,o.colno,o.value),e=new i.LookupVal(n.lineno,n.colno,e,t)}n=this.peekToken()}return e},l.parseExpression=function(){return this.parseInlineIf()},l.parseInlineIf=function(){var e=this.parseOr();if(this.skipSymbol("if")){var t=this.parseOr(),n=e;(e=new i.InlineIf(e.lineno,e.colno)).body=n,e.cond=t,this.skipSymbol("else")?e.else_=this.parseOr():e.else_=null}return e},l.parseOr=function(){for(var e=this.parseAnd();this.skipSymbol("or");){var t=this.parseAnd();e=new i.Or(e.lineno,e.colno,e,t)}return e},l.parseAnd=function(){for(var e=this.parseNot();this.skipSymbol("and");){var t=this.parseNot();e=new i.And(e.lineno,e.colno,e,t)}return e},l.parseNot=function(){var e=this.peekToken();return this.skipSymbol("not")?new i.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},l.parseIn=function(){for(var e=this.parseIs();;){var t=this.nextToken();if(!t)break;var n=t.type===r.TOKEN_SYMBOL&&"not"===t.value;if(n||this.pushToken(t),!this.skipSymbol("in")){n&&this.pushToken(t);break}var o=this.parseIs();e=new i.In(e.lineno,e.colno,e,o),n&&(e=new i.Not(e.lineno,e.colno,e))}return e},l.parseIs=function(){var e=this.parseCompare();if(this.skipSymbol("is")){var t=this.skipSymbol("not"),n=this.parseCompare();e=new i.Is(e.lineno,e.colno,e,n),t&&(e=new i.Not(e.lineno,e.colno,e))}return e},l.parseCompare=function(){for(var e=["==","===","!=","!==","<",">","<=",">="],t=this.parseConcat(),n=[];;){var o=this.nextToken();if(!o)break;if(-1===e.indexOf(o.value)){this.pushToken(o);break}n.push(new i.CompareOperand(o.lineno,o.colno,this.parseConcat(),o.value))}return n.length?new i.Compare(n[0].lineno,n[0].colno,t,n):t},l.parseConcat=function(){for(var e=this.parseAdd();this.skipValue(r.TOKEN_TILDE,"~");){var t=this.parseAdd();e=new i.Concat(e.lineno,e.colno,e,t)}return e},l.parseAdd=function(){for(var e=this.parseSub();this.skipValue(r.TOKEN_OPERATOR,"+");){var t=this.parseSub();e=new i.Add(e.lineno,e.colno,e,t)}return e},l.parseSub=function(){for(var e=this.parseMul();this.skipValue(r.TOKEN_OPERATOR,"-");){var t=this.parseMul();e=new i.Sub(e.lineno,e.colno,e,t)}return e},l.parseMul=function(){for(var e=this.parseDiv();this.skipValue(r.TOKEN_OPERATOR,"*");){var t=this.parseDiv();e=new i.Mul(e.lineno,e.colno,e,t)}return e},l.parseDiv=function(){for(var e=this.parseFloorDiv();this.skipValue(r.TOKEN_OPERATOR,"/");){var t=this.parseFloorDiv();e=new i.Div(e.lineno,e.colno,e,t)}return e},l.parseFloorDiv=function(){for(var e=this.parseMod();this.skipValue(r.TOKEN_OPERATOR,"//");){var t=this.parseMod();e=new i.FloorDiv(e.lineno,e.colno,e,t)}return e},l.parseMod=function(){for(var e=this.parsePow();this.skipValue(r.TOKEN_OPERATOR,"%");){var t=this.parsePow();e=new i.Mod(e.lineno,e.colno,e,t)}return e},l.parsePow=function(){for(var e=this.parseUnary();this.skipValue(r.TOKEN_OPERATOR,"**");){var t=this.parseUnary();e=new i.Pow(e.lineno,e.colno,e,t)}return e},l.parseUnary=function(e){var t,n=this.peekToken();return t=this.skipValue(r.TOKEN_OPERATOR,"-")?new i.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(r.TOKEN_OPERATOR,"+")?new i.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),e||(t=this.parseFilter(t)),t},l.parsePrimary=function(e){var t,n=this.nextToken(),o=null;if(n?n.type===r.TOKEN_STRING?t=n.value:n.type===r.TOKEN_INT?t=parseInt(n.value,10):n.type===r.TOKEN_FLOAT?t=parseFloat(n.value):n.type===r.TOKEN_BOOLEAN?"true"===n.value?t=!0:"false"===n.value?t=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===r.TOKEN_NONE?t=null:n.type===r.TOKEN_REGEX&&(t=RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),void 0!==t?o=new i.Literal(n.lineno,n.colno,t):n.type===r.TOKEN_SYMBOL?o=new i.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),o=this.parseAggregate()),e||(o=this.parsePostfix(o)),o)return o;throw this.error("unexpected token: "+n.value,n.lineno,n.colno)},l.parseFilterName=function(){for(var e=this.expect(r.TOKEN_SYMBOL),t=e.value;this.skipValue(r.TOKEN_OPERATOR,".");)t+="."+this.expect(r.TOKEN_SYMBOL).value;return new i.Symbol(e.lineno,e.colno,t)},l.parseFilterArgs=function(e){return this.peekToken().type===r.TOKEN_LEFT_PAREN?this.parsePostfix(e).args.children:[]},l.parseFilter=function(e){for(;this.skip(r.TOKEN_PIPE);){var t=this.parseFilterName();e=new i.Filter(t.lineno,t.colno,t,new i.NodeList(t.lineno,t.colno,[e].concat(this.parseFilterArgs(e))))}return e},l.parseFilterStatement=function(){var e=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var t=this.parseFilterName(),n=this.parseFilterArgs(t);this.advanceAfterBlockEnd(e.value);var o=new i.Capture(t.lineno,t.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var r=new i.Filter(t.lineno,t.colno,t,new i.NodeList(t.lineno,t.colno,[o].concat(n)));return new i.Output(t.lineno,t.colno,[r])},l.parseAggregate=function(){var e,t=this.nextToken();switch(t.type){case r.TOKEN_LEFT_PAREN:e=new i.Group(t.lineno,t.colno);break;case r.TOKEN_LEFT_BRACKET:e=new i.Array(t.lineno,t.colno);break;case r.TOKEN_LEFT_CURLY:e=new i.Dict(t.lineno,t.colno);break;default:return null}for(;;){var n=this.peekToken().type;if(n===r.TOKEN_RIGHT_PAREN||n===r.TOKEN_RIGHT_BRACKET||n===r.TOKEN_RIGHT_CURLY){this.nextToken();break}if(e.children.length>0&&(this.skip(r.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",t.lineno,t.colno)),e instanceof i.Dict){var o=this.parsePrimary();this.skip(r.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",t.lineno,t.colno);var s=this.parseExpression();e.addChild(new i.Pair(o.lineno,o.colno,o,s))}else{var a=this.parseExpression();e.addChild(a)}}return e},l.parseSignature=function(e,t){var n=this.peekToken();if(!t&&n.type!==r.TOKEN_LEFT_PAREN){if(e)return null;this.fail("expected arguments",n.lineno,n.colno)}n.type===r.TOKEN_LEFT_PAREN&&(n=this.nextToken());for(var o=new i.NodeList(n.lineno,n.colno),s=new i.KeywordArgs(n.lineno,n.colno),a=!1;;){if(n=this.peekToken(),!t&&n.type===r.TOKEN_RIGHT_PAREN){this.nextToken();break}if(t&&n.type===r.TOKEN_BLOCK_END)break;if(a&&!this.skip(r.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",n.lineno,n.colno);else{var l=this.parseExpression();this.skipValue(r.TOKEN_OPERATOR,"=")?s.addChild(new i.Pair(l.lineno,l.colno,l,this.parseExpression())):o.addChild(l)}a=!0}return s.children.length&&o.addChild(s),o},l.parseUntilBlocks=function(){for(var e=this.breakOnBlocks,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.breakOnBlocks=n;var r=this.parse();return this.breakOnBlocks=e,r},l.parseNodes=function(){for(var e,t=[];e=this.nextToken();)if(e.type===r.TOKEN_DATA){var n=e.value,o=this.peekToken(),s=o&&o.value;this.dropLeadingWhitespace&&(n=n.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),o&&(o.type===r.TOKEN_BLOCK_START&&"-"===s.charAt(s.length-1)||o.type===r.TOKEN_VARIABLE_START&&"-"===s.charAt(this.tokens.tags.VARIABLE_START.length)||o.type===r.TOKEN_COMMENT&&"-"===s.charAt(this.tokens.tags.COMMENT_START.length))&&(n=n.replace(/\s*$/,"")),t.push(new i.Output(e.lineno,e.colno,[new i.TemplateData(e.lineno,e.colno,n)]))}else if(e.type===r.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var a=this.parseStatement();if(!a)break;t.push(a)}else if(e.type===r.TOKEN_VARIABLE_START){var l=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),t.push(new i.Output(e.lineno,e.colno,[l]))}else e.type===r.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+e.type,e.lineno,e.colno);return t},l.parse=function(){return new i.NodeList(0,0,this.parseNodes())},l.parseAsRoot=function(){return new i.Root(0,0,this.parseNodes())},s}(s);e.exports={parse:function(e,t,n){var o=new l(r.lex(e,n));return void 0!==t&&(o.extensions=t),o.parseAsRoot()},Parser:l}},function(e,t,n){"use strict";var o=n(0);function r(e,t,n,o){return{type:e,value:t,lineno:n,colno:o}}var i=function(){function e(e,t){this.str=e,this.index=0,this.len=e.length,this.lineno=0,this.colno=0,this.in_code=!1;var n=(t=t||{}).tags||{};this.tags={BLOCK_START:n.blockStart||"{%",BLOCK_END:n.blockEnd||"%}",VARIABLE_START:n.variableStart||"{{",VARIABLE_END:n.variableEnd||"}}",COMMENT_START:n.commentStart||"{#",COMMENT_END:n.commentEnd||"#}"},this.trimBlocks=!!t.trimBlocks,this.lstripBlocks=!!t.lstripBlocks}var t=e.prototype;return t.nextToken=function(){var e,t=this.lineno,n=this.colno;if(this.in_code){var i=this.current();if(this.isFinished())return null;if('"'===i||"'"===i)return r("string",this.U(i),t,n);if(e=this.$(" \n\t\r "))return r("whitespace",e,t,n);if((e=this.G(this.tags.BLOCK_END))||(e=this.G("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&("\n"===(i=this.current())?this.forward():"\r"===i&&(this.forward(),"\n"===(i=this.current())?this.forward():this.back())),r("block-end",e,t,n);if((e=this.G(this.tags.VARIABLE_END))||(e=this.G("-"+this.tags.VARIABLE_END)))return this.in_code=!1,r("variable-end",e,t,n);if("r"===i&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var s="";!this.isFinished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}s+=this.current(),this.forward()}for(var a=["g","i","m","y"],l="";!this.isFinished()&&-1!==a.indexOf(this.current());)l+=this.current(),this.forward();return r("regex",{body:s,flags:l},t,n)}if(-1!=="()[]{}%*-+~/#,:|.<>=!".indexOf(i)){this.forward();var c,u=["==","===","!=","!==","<=",">=","//","**"],p=i+this.current();switch(-1!==o.indexOf(u,p)&&(this.forward(),i=p,-1!==o.indexOf(u,p+this.current())&&(i=p+this.current(),this.forward())),i){case"(":c="left-paren";break;case")":c="right-paren";break;case"[":c="left-bracket";break;case"]":c="right-bracket";break;case"{":c="left-curly";break;case"}":c="right-curly";break;case",":c="comma";break;case":":c="colon";break;case"~":c="tilde";break;case"|":c="pipe";break;default:c="operator"}return r(c,i,t,n)}if((e=this.W(" \n\t\r ()[]{}%*-+~/#,:|.<>=!")).match(/^[-+]?[0-9]+$/))return"."===this.current()?(this.forward(),r("float",e+"."+this.$("0123456789"),t,n)):r("int",e,t,n);if(e.match(/^(true|false)$/))return r("boolean",e,t,n);if("none"===e)return r("none",e,t,n);if("null"===e)return r("none",e,t,n);if(e)return r("symbol",e,t,n);throw Error("Unexpected value while parsing: "+e)}var h,f=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((e=this.G(this.tags.BLOCK_START+"-"))||(e=this.G(this.tags.BLOCK_START)))return this.in_code=!0,r("block-start",e,t,n);if((e=this.G(this.tags.VARIABLE_START+"-"))||(e=this.G(this.tags.VARIABLE_START)))return this.in_code=!0,r("variable-start",e,t,n);e="";var d=!1;for(this.H(this.tags.COMMENT_START)&&(d=!0,e=this.G(this.tags.COMMENT_START));null!==(h=this.W(f));){if(e+=h,(this.H(this.tags.BLOCK_START)||this.H(this.tags.VARIABLE_START)||this.H(this.tags.COMMENT_START))&&!d){if(this.lstripBlocks&&this.H(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=e.length){var m=e.slice(-this.colno);if(/^\s+$/.test(m)&&!(e=e.slice(0,-this.colno)).length)return this.nextToken()}break}if(this.H(this.tags.COMMENT_END)){if(!d)throw Error("unexpected end of comment");e+=this.G(this.tags.COMMENT_END);break}e+=this.current(),this.forward()}if(null===h&&d)throw Error("expected end of comment, got end of file");return r(d?"comment":"data",e,t,n)},t.U=function(e){this.forward();for(var t="";!this.isFinished()&&this.current()!==e;){var n=this.current();if("\\"===n){switch(this.forward(),this.current()){case"n":t+="\n";break;case"t":t+="\t";break;case"r":t+="\r";break;default:t+=this.current()}this.forward()}else t+=n,this.forward()}return this.forward(),t},t.H=function(e){return this.index+e.length>this.len?null:this.str.slice(this.index,this.index+e.length)===e},t.G=function(e){return this.H(e)?(this.forwardN(e.length),e):null},t.W=function(e){return this.J(!0,e||"")},t.$=function(e){return this.J(!1,e)},t.J=function(e,t){if(this.isFinished())return null;var n=t.indexOf(this.current());if(e&&-1===n||!e&&-1!==n){var o=this.current();this.forward();for(var r=t.indexOf(this.current());(e&&-1===r||!e&&-1!==r)&&!this.isFinished();)o+=this.current(),this.forward(),r=t.indexOf(this.current());return o}return""},t.D=function(e){var t=this.currentStr().match(e);return t?(this.forwardN(t[0].length),t):null},t.isFinished=function(){return this.index>=this.len},t.forwardN=function(e){for(var t=0;t<e;t++)this.forward()},t.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},t.backN=function(e){for(var t=0;t<e;t++)this.back()},t.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var e=this.src.lastIndexOf("\n",this.index-1);this.colno=-1===e?this.index:this.index-e}else this.colno--},t.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},t.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},t.previous=function(){return this.str.charAt(this.index-1)},e}();e.exports={lex:function(e,t){return new i(e,t)},TOKEN_STRING:"string",TOKEN_WHITESPACE:"whitespace",TOKEN_DATA:"data",TOKEN_BLOCK_START:"block-start",TOKEN_BLOCK_END:"block-end",TOKEN_VARIABLE_START:"variable-start",TOKEN_VARIABLE_END:"variable-end",TOKEN_COMMENT:"comment",TOKEN_LEFT_PAREN:"left-paren",TOKEN_RIGHT_PAREN:"right-paren",TOKEN_LEFT_BRACKET:"left-bracket",TOKEN_RIGHT_BRACKET:"right-bracket",TOKEN_LEFT_CURLY:"left-curly",TOKEN_RIGHT_CURLY:"right-curly",TOKEN_OPERATOR:"operator",TOKEN_COMMA:"comma",TOKEN_COLON:"colon",TOKEN_TILDE:"tilde",TOKEN_PIPE:"pipe",TOKEN_INT:"int",TOKEN_FLOAT:"float",TOKEN_BOOLEAN:"boolean",TOKEN_NONE:"none",TOKEN_SYMBOL:"symbol",TOKEN_SPECIAL:"special",TOKEN_REGEX:"regex"}},function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=n(6),i=n(19).PrecompiledLoader,s=function(e){var t,n;function r(t,n){var o;return(o=e.call(this)||this).baseURL=t||".",n=n||{},o.useCache=!!n.useCache,o.async=!!n.async,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var i=r.prototype;return i.resolve=function(e,t){throw Error("relative templates not support in the browser yet")},i.getSource=function(e,t){var n,o=this,r=this.useCache;return this.fetch(this.baseURL+"/"+e,(function(i,s){if(i)if(t)t(i.content);else{if(404!==i.status)throw i.content;n=null}else n={src:s,path:e,noCache:!r},o.emit("load",e,n),t&&t(null,n)})),n},i.fetch=function(e,t){if("undefined"==typeof window)throw Error("WebLoader can only by used in a browser");var n=new XMLHttpRequest,o=!0;n.onreadystatechange=function(){4===n.readyState&&o&&(o=!1,0===n.status||200===n.status?t(null,n.responseText):t({status:n.status,content:n.responseText}))},e+=(-1===e.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",e,this.async),n.send()},r}(r);e.exports={WebLoader:s,PrecompiledLoader:i}},function(e,t,n){"use strict";var o,r=n(0),i=n(7),s=i.Environment,a=i.Template,l=n(6),c=n(10),u=n(23),p=n(5),h=n(8),f=n(9),d=n(2),m=n(3),v=n(25);function g(e,t){var n;return t=t||{},r.isObject(e)&&(t=e,e=null),c.FileSystemLoader?n=new c.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):c.WebLoader&&(n=new c.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),o=new s(n,t),t&&t.express&&o.express(t.express),o}e.exports={Environment:s,Template:a,Loader:l,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:p,parser:h,lexer:f,runtime:d,lib:r,nodes:m,installJinjaCompat:v,configure:g,reset:function(){o=void 0},compile:function(e,t,n,r){return o||g(),new a(e,t,n,r)},render:function(e,t,n){return o||g(),o.render(e,t,n)},renderString:function(e,t,n){return o||g(),o.renderString(e,t,n)},precompile:u?u.precompile:void 0,precompileString:u?u.precompileString:void 0}},function(e,t,n){"use strict";var o=n(13),r=[],i=[],s=o.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function a(e){var t;(t=r.length?r.pop():new l).task=e,o(t)}function l(){this.task=null}e.exports=a,l.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(i.push(e),s())}finally{this.task=null,r[r.length]=this}}},function(e,t,n){"use strict";!function(t){function n(e){r.length||o(),r[r.length]=e}e.exports=n;var o,r=[],i=0;function s(){for(;i<r.length;){var e=i;if(i+=1,r[e].call(),i>1024){for(var t=0,n=r.length-i;t<n;t++)r[t]=r[t+i];r.length-=i,i=0}}r.length=0,i=0}var a,l,c,u=void 0!==t?t:self,p=u.MutationObserver||u.WebKitMutationObserver;function h(e){return function(){var t=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof p?(a=1,l=new p(s),c=document.createTextNode(""),l.observe(c,{characterData:!0}),o=function(){a=-a,c.data=a}):o=h(s),n.requestFlush=o,n.makeRequestCallFromTimer=h}(n(14))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var o;!function(n){"use strict";var r=function(){var e=Array.prototype.slice.call(arguments);"function"==typeof e[0]&&e[0].apply(null,e.splice(1))},i=function(e){"function"==typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)},s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,t,n){var o=n?i:r;if(t=t||function(){},!s(e))return t(Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var a=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),i=e.next();i?r.push(a(i)):r.push(t),o((function(){e.apply(null,r)}))}}};a(function(e){var t=function(n){var o=function(){return e.length&&e[n].apply(null,arguments),o.next()};return o.next=function(){return n<e.length-1?t(n+1):null},o};return t(0)}(e))()};void 0===(o=function(){return a}.apply(t,[]))||(e.exports=o)}()},function(e,t,n){"use strict";var o,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};o=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,o){function r(n){e.removeListener(t,i),o(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,{once:!0})}(e,r)}))},a.EventEmitter=a,a.prototype.z=void 0,a.prototype.Y=0,a.prototype.q=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e.q?a.defaultMaxListeners:e.q}function p(e,t,n,o){var r,i,s;if(c(n),void 0===(i=e.z)?(i=e.z=Object.create(null),e.Y=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e.z),s=i[t]),void 0===s)s=i[t]=n,++e.Y;else if("function"==typeof s?s=i[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var a=Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn&&console.warn(a)}return e}function h(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(o);return r.listener=n,o.wrapFn=r,r}function f(e,t,n){var o=e.z;if(void 0===o)return[];var r=o[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function d(e){var t=this.z;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=Array(t),o=0;o<t;++o)n[o]=e[o];return n}function v(e,t,n,o){if("function"==typeof e.on)o.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(i){o.once&&e.removeEventListener(t,r),n(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),a.init=function(){void 0!==this.z&&this.z!==Object.getPrototypeOf(this).z||(this.z=Object.create(null),this.Y=0),this.q=this.q||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this.q=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this.z;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,o,r,i,s;if(c(t),void 0===(o=this.z))return this;if(void 0===(n=o[e]))return this;if(n===t||n.listener===t)0==--this.Y?this.z=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,o;if(void 0===(n=this.z))return this;if(void 0===n.removeListener)return 0===arguments.length?(this.z=Object.create(null),this.Y=0):void 0!==n[e]&&(0==--this.Y?this.z=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,i=Object.keys(n);for(o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this.z=Object.create(null),this.Y=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this.Y>0?o(this.z):[]}},function(e,t,n){"use strict";var o=n(3),r=n(0),i=0;function s(){return"hole_"+i++}function a(e,t){for(var n=null,o=0;o<e.length;o++){var r=t(e[o]);r!==e[o]&&(n||(n=e.slice()),n[o]=r)}return n||e}function l(e,t,n){if(!(e instanceof o.Node))return e;if(!n){var r=t(e);if(r&&r!==e)return r}if(e instanceof o.NodeList){var i=a(e.children,(function(e){return l(e,t,n)}));i!==e.children&&(e=new o[e.typename](e.lineno,e.colno,i))}else if(e instanceof o.CallExtension){var s=l(e.args,t,n),c=a(e.contentArgs,(function(e){return l(e,t,n)}));s===e.args&&c===e.contentArgs||(e=new o[e.typename](e.extName,e.prop,s,c))}else{var u=e.fields.map((function(t){return e[t]})),p=a(u,(function(e){return l(e,t,n)}));p!==u&&(e=new o[e.typename](e.lineno,e.colno),p.forEach((function(t,n){e[e.fields[n]]=t})))}return n&&t(e)||e}function c(e,t){return l(e,t,!0)}function u(e,t,n){var i=[],a=c(n?e[n]:e,(function(e){var n;return e instanceof o.Block?e:((e instanceof o.Filter&&-1!==r.indexOf(t,e.name.value)||e instanceof o.CallExtensionAsync)&&(n=new o.Symbol(e.lineno,e.colno,s()),i.push(new o.FilterAsync(e.lineno,e.colno,e.name,e.args,n))),n)}));return n?e[n]=a:e=a,i.length?(i.push(e),new o.NodeList(e.lineno,e.colno,i)):e}e.exports={transform:function(e,t){return function(e,t){return function(e){return c(e,(function(e){if(e instanceof o.If||e instanceof o.For){var t=!1;if(l(e,(function(e){if(e instanceof o.FilterAsync||e instanceof o.IfAsync||e instanceof o.AsyncEach||e instanceof o.AsyncAll||e instanceof o.CallExtensionAsync)return t=!0,e})),t){if(e instanceof o.If)return new o.IfAsync(e.lineno,e.colno,e.cond,e.body,e.else_);if(e instanceof o.For&&!(e instanceof o.AsyncAll))return new o.AsyncEach(e.lineno,e.colno,e.arr,e.name,e.body,e.else_)}}}))}(function(e){return l(e,(function(e){if(e instanceof o.Block){var t=!1,n=s();e.body=l(e.body,(function(e){if(e instanceof o.FunCall&&"super"===e.name.value)return t=!0,new o.Symbol(e.lineno,e.colno,n)})),t&&e.body.children.unshift(new o.Super(0,0,e.name,new o.Symbol(0,0,n)))}}))}(function(e,t){return c(e,(function(e){return e instanceof o.Output?u(e,t):e instanceof o.Set?u(e,t,"value"):e instanceof o.For?u(e,t,"arr"):e instanceof o.If?u(e,t,"cond"):e instanceof o.CallExtension?u(e,t,"args"):void 0}))}(e,t)))}(e,t||[])}}},function(e,t,n){"use strict";var o=n(0),r=n(2);function i(e,t){return null==e||!1===e?t:e}function s(e){return e!=e}function a(e){var t=(e=i(e,"")).toLowerCase();return r.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))}function l(e){if(o.isString(e))return e.split("");if(o.isObject(e))return o.r(e||{}).map((function(e){return{key:e[0],value:e[1]}}));if(o.isArray(e))return e;throw new o.TemplateError("list filter: type not iterable")}function c(e){return function(t,n,r){void 0===n&&(n="truthy");var i=this,s=i.env.getTest(n);return o.toArray(t).filter((function(t){return s.call(i,t,r)===e}))}}function u(e){return r.copySafeness(e,e.replace(/^\s*|\s*$/g,""))}(t=e.exports={}).abs=Math.abs,t.batch=function(e,t,n){var o,r=[],i=[];for(o=0;o<e.length;o++)o%t==0&&i.length&&(r.push(i),i=[]),i.push(e[o]);if(i.length){if(n)for(o=i.length;o<t;o++)i.push(n);r.push(i)}return r},t.capitalize=a,t.center=function(e,t){if(t=t||80,(e=i(e,"")).length>=t)return e;var n=t-e.length,s=o.repeat(" ",n/2-n%2),a=o.repeat(" ",n/2);return r.copySafeness(e,s+e+a)},t.default=function(e,t,n){return n?e||t:void 0!==e?e:t},t.dictsort=function(e,t,n){if(!o.isObject(e))throw new o.TemplateError("dictsort filter: val must be an object");var r,i=[];for(var s in e)i.push([s,e[s]]);if(void 0===n||"key"===n)r=0;else{if("value"!==n)throw new o.TemplateError("dictsort filter: You can only sort by either key or value");r=1}return i.sort((function(e,n){var i=e[r],s=n[r];return t||(o.isString(i)&&(i=i.toUpperCase()),o.isString(s)&&(s=s.toUpperCase())),i>s?1:i===s?0:-1})),i},t.dump=function(e,t){return JSON.stringify(e,null,t)},t.escape=function(e){return e instanceof r.SafeString?e:(e=null==e?"":e,r.markSafe(o.escape(e.toString())))},t.safe=function(e){return e instanceof r.SafeString?e:(e=null==e?"":e,r.markSafe(e.toString()))},t.first=function(e){return e[0]},t.forceescape=function(e){return e=null==e?"":e,r.markSafe(o.escape(e.toString()))},t.groupby=function(e,t){return o.groupBy(e,t,this.env.opts.throwOnUndefined)},t.indent=function(e,t,n){if(""===(e=i(e,"")))return"";t=t||4;var s=e.split("\n"),a=o.repeat(" ",t),l=s.map((function(e,t){return 0!==t||n?""+a+e:e})).join("\n");return r.copySafeness(e,l)},t.join=function(e,t,n){return t=t||"",n&&(e=o.map(e,(function(e){return e[n]}))),e.join(t)},t.last=function(e){return e[e.length-1]},t.length=function(e){var t=i(e,"");return void 0!==t?"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set?t.size:!o.isObject(t)||t instanceof r.SafeString?t.length:o.keys(t).length:0},t.list=l,t.lower=function(e){return(e=i(e,"")).toLowerCase()},t.nl2br=function(e){return null==e?"":r.copySafeness(e,e.replace(/\r\n|\n/g,"<br />\n"))},t.random=function(e){return e[Math.floor(Math.random()*e.length)]},t.reject=c(!1),t.rejectattr=function(e,t){return e.filter((function(e){return!e[t]}))},t.select=c(!0),t.selectattr=function(e,t){return e.filter((function(e){return!!e[t]}))},t.replace=function(e,t,n,o){var i=e;if(t instanceof RegExp)return e.replace(t,n);void 0===o&&(o=-1);var s="";if("number"==typeof t)t=""+t;else if("string"!=typeof t)return e;if("number"==typeof e&&(e=""+e),"string"!=typeof e&&!(e instanceof r.SafeString))return e;if(""===t)return s=n+e.split("").join(n)+n,r.copySafeness(e,s);var a=e.indexOf(t);if(0===o||-1===a)return e;for(var l=0,c=0;a>-1&&(-1===o||c<o);)s+=e.substring(l,a)+n,l=a+t.length,c++,a=e.indexOf(t,l);return l<e.length&&(s+=e.substring(l)),r.copySafeness(i,s)},t.reverse=function(e){var t;return(t=o.isString(e)?l(e):o.map(e,(function(e){return e}))).reverse(),o.isString(e)?r.copySafeness(e,t.join("")):t},t.round=function(e,t,n){var o=Math.pow(10,t=t||0);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(e*o)/o},t.slice=function(e,t,n){for(var o=Math.floor(e.length/t),r=e.length%t,i=[],s=0,a=0;a<t;a++){var l=s+a*o;a<r&&s++;var c=s+(a+1)*o,u=e.slice(l,c);n&&a>=r&&u.push(n),i.push(u)}return i},t.sum=function(e,t,n){return void 0===n&&(n=0),t&&(e=o.map(e,(function(e){return e[t]}))),n+e.reduce((function(e,t){return e+t}),0)},t.sort=r.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(e,t,n,r){var i=this,s=o.map(e,(function(e){return e})),a=o.getAttrGetter(r);return s.sort((function(e,s){var l=r?a(e):e,c=r?a(s):s;if(i.env.opts.throwOnUndefined&&r&&(void 0===l||void 0===c))throw new TypeError('sort: attribute "'+r+'" resolved to undefined');return!n&&o.isString(l)&&o.isString(c)&&(l=l.toLowerCase(),c=c.toLowerCase()),l<c?t?1:-1:l>c?t?-1:1:0})),s})),t.string=function(e){return r.copySafeness(e,e)},t.striptags=function(e,t){var n,o=u((e=i(e,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,""));return n=t?o.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):o.replace(/\s+/gi," "),r.copySafeness(e,n)},t.title=function(e){var t=(e=i(e,"")).split(" ").map((function(e){return a(e)}));return r.copySafeness(e,t.join(" "))},t.trim=u,t.truncate=function(e,t,n,o){var s=e;if(t=t||255,(e=i(e,"")).length<=t)return e;if(n)e=e.substring(0,t);else{var a=e.lastIndexOf(" ",t);-1===a&&(a=t),e=e.substring(0,a)}return e+=null!=o?o:"...",r.copySafeness(s,e)},t.upper=function(e){return(e=i(e,"")).toUpperCase()},t.urlencode=function(e){var t=encodeURIComponent;return o.isString(e)?t(e):(o.isArray(e)?e:o.r(e)).map((function(e){var n=e[0],o=e[1];return t(n)+"="+t(o)})).join("&")};var p=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,h=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,f=/^https?:\/\/.*$/,d=/^www\./,m=/\.(?:org|net|com)(?:\:|\/|$)/;t.urlize=function(e,t,n){s(t)&&(t=1/0);var o=!0===n?' rel="nofollow"':"";return e.split(/(\s+)/).filter((function(e){return e&&e.length})).map((function(e){var n=e.match(p),r=n?n[1]:e,i=r.substr(0,t);return f.test(r)?'<a href="'+r+'"'+o+">"+i+"</a>":d.test(r)?'<a href="http://'+r+'"'+o+">"+i+"</a>":h.test(r)?'<a href="mailto:'+r+'">'+r+"</a>":m.test(r)?'<a href="http://'+r+'"'+o+">"+i+"</a>":e})).join("")},t.wordcount=function(e){var t=(e=i(e,""))?e.match(/\w+/g):null;return t?t.length:null},t.float=function(e,t){var n=parseFloat(e);return s(n)?t:n};var v=r.makeMacro(["value","default","base"],[],(function(e,t,n){void 0===n&&(n=10);var o=parseInt(e,n);return s(o)?t:o}));t.int=v,t.d=t.default,t.e=t.escape},function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this).precompiled=t||{},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r.prototype.getSource=function(e){return this.precompiled[e]?{src:{type:"code",obj:this.precompiled[e]},path:e}:null},r}(n(6));e.exports={PrecompiledLoader:r}},function(e,t,n){"use strict";var o=n(2).SafeString;t.callable=function(e){return"function"==typeof e},t.defined=function(e){return void 0!==e},t.divisibleby=function(e,t){return e%t==0},t.escaped=function(e){return e instanceof o},t.equalto=function(e,t){return e===t},t.eq=t.equalto,t.sameas=t.equalto,t.even=function(e){return e%2==0},t.falsy=function(e){return!e},t.ge=function(e,t){return e>=t},t.greaterthan=function(e,t){return e>t},t.gt=t.greaterthan,t.le=function(e,t){return e<=t},t.lessthan=function(e,t){return e<t},t.lt=t.lessthan,t.lower=function(e){return e.toLowerCase()===e},t.ne=function(e,t){return e!==t},t.null=function(e){return null===e},t.number=function(e){return"number"==typeof e},t.odd=function(e){return e%2==1},t.string=function(e){return"string"==typeof e},t.truthy=function(e){return!!e},t.undefined=function(e){return void 0===e},t.upper=function(e){return e.toUpperCase()===e},t.iterable=function(e){return"undefined"!=typeof Symbol?!!e[Symbol.iterator]:Array.isArray(e)||"string"==typeof e},t.mapping=function(e){var t=null!=e&&"object"==typeof e&&!Array.isArray(e);return Set?t&&!(e instanceof Set):t}},function(e,t,n){"use strict";e.exports=function(){return{range:function(e,t,n){void 0===t?(t=e,e=0,n=1):n||(n=1);var o=[];if(n>0)for(var r=e;r<t;r+=n)o.push(r);else for(var i=e;i>t;i+=n)o.push(i);return o},cycler:function(){return e=Array.prototype.slice.call(arguments),t=-1,{current:null,reset:function(){t=-1,this.current=null},next:function(){return++t>=e.length&&(t=0),this.current=e[t],this.current}};var e,t},joiner:function(e){return function(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}(e)}}}},function(e,t,n){var o=n(4);e.exports=function(e,t){function n(e,t){if(this.name=e,this.path=e,this.defaultEngine=t.defaultEngine,this.ext=o.extname(e),!this.ext&&!this.defaultEngine)throw Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(t,n){e.render(this.name,t,n)},t.set("view",n),t.set("nunjucksEnv",e),e}},function(e,t,n){"use strict";var o=n(4),r=n(4),i=n(0).t,s=n(5),a=n(7).Environment,l=n(24);function c(e,t){return!!Array.isArray(t)&&t.some((function(t){return e.match(t)}))}function u(e,t){(t=t||{}).isString=!0;var n=t.env||new a([]),o=t.wrapper||l;if(!t.name)throw Error('the "name" option is required when compiling a string');return o([p(e,t.name,n)],t)}function p(e,t,n){var o,r=(n=n||new a([])).asyncFilters,l=n.extensionsList;t=t.replace(/\\/g,"/");try{o=s.compile(e,r,l,t,n.opts)}catch(e){throw i(t,!1,e)}return{name:t,template:o}}e.exports={precompile:function(e,t){var n=(t=t||{}).env||new a([]),i=t.wrapper||l;if(t.isString)return u(e,t);var s=o.existsSync(e)&&o.statSync(e),h=[],f=[];if(s.isFile())h.push(p(o.readFileSync(e,"utf-8"),t.name||e,n));else if(s.isDirectory()){!function n(i){o.readdirSync(i).forEach((function(s){var a=r.join(i,s),l=a.substr(r.join(e,"/").length),u=o.statSync(a);u&&u.isDirectory()?c(l+="/",t.exclude)||n(a):c(l,t.include)&&f.push(a)}))}(e);for(var d=0;d<f.length;d++){var m=f[d].replace(r.join(e,"/"),"");try{h.push(p(o.readFileSync(f[d],"utf-8"),m,n))}catch(e){if(!t.force)throw e;console.error(e)}}}return i(h,t)},precompileString:u}},function(e,t,n){"use strict";e.exports=function(e,t){var n="";t=t||{};for(var o=0;o<e.length;o++){var r=JSON.stringify(e[o].name);n+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+r+"] = (function() {\n"+e[o].template+"\n})();\n",t.asFunction&&(n+="return function(ctx, cb) { return nunjucks.render("+r+", ctx, cb); }\n"),n+="})();\n"}return n}},function(e,t,n){e.exports=function(){"use strict";var e,t,n=this.runtime,o=this.lib,r=this.compiler.Compiler,i=this.parser.Parser,s=this.nodes,a=this.lexer,l=n.contextOrFrameLookup,c=n.memberLookup;function u(e){return{index:e.index,lineno:e.lineno,colno:e.colno}}if(r&&(e=r.prototype.assertType),i&&(t=i.prototype.parseAggregate),n.contextOrFrameLookup=function(e,t,n){var o=l.apply(this,arguments);if(void 0!==o)return o;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}},s&&r&&i){var p=s.Node.extend("Slice",{fields:["start","stop","step"],init:function(e,t,n,o,r){n=n||new s.Literal(e,t,null),o=o||new s.Literal(e,t,null),r=r||new s.Literal(e,t,1),this.parent(e,t,n,o,r)}});r.prototype.assertType=function(t){t instanceof p||e.apply(this,arguments)},r.prototype.compileSlice=function(e,t){this.w("("),this.L(e.start,t),this.w("),("),this.L(e.stop,t),this.w("),("),this.L(e.step,t),this.w(")")},i.prototype.parseAggregate=function(){var e=this,n=u(this.tokens);n.colno--,n.index--;try{return t.apply(this)}catch(t){var r=u(this.tokens),i=function(){return o.h(e.tokens,r),t};o.h(this.tokens,n),this.peeked=!1;var l=this.peekToken();if(l.type!==a.TOKEN_LEFT_BRACKET)throw i();this.nextToken();for(var c=new p(l.lineno,l.colno),h=!1,f=0;f<=c.fields.length&&!this.skip(a.TOKEN_RIGHT_BRACKET);f++){if(f===c.fields.length){if(!h)break;this.fail("parseSlice: too many slice components",l.lineno,l.colno)}this.skip(a.TOKEN_COLON)?h=!0:(c[c.fields[f]]=this.parseExpression(),h=this.skip(a.TOKEN_COLON)||h)}if(!h)throw i();return new s.Array(l.lineno,l.colno,[c])}}}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var f={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||e<0)throw Error("KeyError");return this.splice(e,1)},append:function(e){return this.push(e)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1);throw Error("ValueError")},count:function(e){for(var t=0,n=0;n<this.length;n++)this[n]===e&&t++;return t},index:function(e){var t;if(-1===(t=this.indexOf(e)))throw Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},d={items:function(){return o.r(this)},values:function(){return o.u(this)},keys:function(){return o.keys(this)},get:function(e,t){var n=this[e];return void 0===n&&(n=t),n},has_key:function(e){return h(this,e)},pop:function(e,t){var n=this[e];if(void 0===n&&void 0!==t)n=t;else{if(void 0===n)throw Error("KeyError");delete this[e]}return n},popitem:function(){var e=o.keys(this);if(!e.length)throw Error("KeyError");var t=e[0],n=this[t];return delete this[t],[t,n]},setdefault:function(e,t){return void 0===t&&(t=null),e in this||(this[e]=t),this[e]},update:function(e){return o.h(this,e),null}};return d.iteritems=d.items,d.itervalues=d.values,d.iterkeys=d.keys,n.memberLookup=function(e,t,r){return 4===arguments.length?function(e,t,o,r){e=e||[],null===t&&(t=r<0?e.length-1:0),null===o?o=r<0?-1:e.length:o<0&&(o+=e.length),t<0&&(t+=e.length);for(var i=[],s=t;!(s<0||s>e.length||r>0&&s>=o||r<0&&s<=o);s+=r)i.push(n.memberLookup(e,s));return i}.apply(this,arguments):(e=e||{},o.isArray(e)&&h(f,t)?f[t].bind(e):o.isObject(e)&&h(d,t)?d[t].bind(e):c.apply(this,arguments))},function(){n.contextOrFrameLookup=l,n.memberLookup=c,r&&(r.prototype.assertType=e),i&&(i.prototype.parseAggregate=t)}}}])}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";var e={"Return to Home":"Accueil","Return to Dolibarr":"Dolibarr","Not configured yet.":"Pas configuré pour l'instant","Don't know how to render this state.":"Ne sait pas comment afficher cette page.",Save:"Enregistrer","Waiting...":"Chargement...","Error retrieving data.":"Erreur au chargement des données","Try again":"Essayer à nouveau","There are {items} items that match your selection.":"Il y a {items} élément(s) qui correspond(ent) à votre sélection","Pick this one":"Sélectionner cet élément","Empty the selection":"Vider la sélection",Reload:"Recharger",Edit:"Éditer","Create a new one":"Créer nouveau","Please confirm the data you want to save:":"Merci de confirmer les données à enregistrer :",Ok:"Ok",Add:"Ajouter","This field is mandatory":"Ce champ est obligatoire","Max length is {length}":"La longueur maximum est {length}","Invalid number":"Nombre invalide","Minimum is {min}":"Le minimum est {min}","Maximum is {max}":"Le maximum est {max}","Invalid date":"Date invalide","Error:":"Erreur :"},t="en";function o(n,o){var r=n;if(t.startsWith("fr")&&n in e&&(r=e[n]),o)for(var i in o){var s=new RegExp("\\{"+i+"\\}","gi");r=r.replace(s,o[i])}return r}var r=n(324);n(918);var i=function(){function e(e,t){this.values=[],this.stateName=e,this.previous=t}return e.prototype.findByStateName=function(e){return this.stateName===e?this:this.previous?this.previous.findByStateName(e):void 0},e.prototype.getStackValue=function(e){var t=this.values.filter((function(t){return t.name===e}));if(t.length>1)throw new Error("There are multiple values for "+e+", dont know how to handle.");if(t.length)return t[0]},e.prototype.getValue=function(e){var t=this.getStackValue(e);return null==t?void 0:t.value},e.prototype.isValueInvalid=function(e){var t=this.getStackValue(e);return null==t?void 0:t.invalid},e.prototype.isAnyValue=function(){return 0!==this.values.length},e.prototype.setValues=function(e){null===e&&(e=[]),Array.isArray(e)||(e=[e]),this.values=e},e.prototype.changeOrAppendValues=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t],o=0;for(o=0;o<this.values.length&&this.values[o].name!==n.name;o++);this.values[o]=n}},e.prototype.removeValue=function(e){this.values=this.values.filter((function(t){return t.name!==e}))},e.getDisplayStackValue=function(e){var t;if(!e.invisible){var n=null!==(t=e.display)&&void 0!==t?t:e.value;return{label:e.label,display:n}}},e.displayStackValue=function(t){var n=e.getDisplayStackValue(t);if(void 0!==n)return"".concat(n.label,": ").concat(n.display)},e.stackValuesToParams=function(e){for(var t={},n=0;n<e.length;n++){var o=e[n];if(!o.silent){if(o.invalid)throw new Error("There is an invalid value in the stack. Should not be saved.");if(o.name in t)throw new Error('Multiple "'.concat(o.name,'" parameters.'));t[o.name]=o.value}}return t},e.prototype.displayStackValues=function(t){void 0===t&&(t=" / ");for(var n=[],o=0;o<this.values.length;o++){var r=this.values[o],i=e.displayStackValue(r);void 0!==i&&n.push(i)}return n.join(t)},e.prototype.searchValue=function(e){return this.getValue(e)||(this.previous?this.previous.searchValue(e):void 0)},e.prototype.getAllStackValues=function(){var e;e=this.previous?this.previous.getAllStackValues():[];for(var t=0;t<this.values.length;t++)e.push(this.values[t]);return e},e.prototype.getStackValuesUntil=function(e){var t;if(this.stateName===e)t=[];else{if(!this.previous)return void console.error("Did not find state "+e+" when calling getStackValuesUntil");if(void 0===(t=this.previous.getStackValuesUntil(e)))return}for(var n=0;n<this.values.length;n++)t.push(this.values[n]);return t},e.prototype.dump=function(){for(var e=[],t=0;t<this.values.length;t++)e.push(Object.assign({},this.values[t]));return Object.assign({},{stateName:this.stateName,values:e,previous:this.previous?this.previous.dump():null})},e.prototype.serialize=function(e){return JSON.stringify({version:e,dump:this.dump()})},e.deserialize=function(t,n){var o=JSON.parse(t);return"object"!=typeof o||o.version!==n?null:o.dump?function t(n){if("object"!=typeof n)throw new Error("Unable to deserialize");if(!n.stateName)throw new Error("Missing stateName");var o=n.previous?t(n.previous):void 0,r=new e(n.stateName,o);return r.setValues(n.values),r}(o.dump):null},e.prototype.dumpForHuman=function(){var e=[this.stateName+": "+JSON.stringify(this.values)];return this.previous?e.concat(this.previous.dumpForHuman()):e},e}(),s={};window.pickupMobileDebugDataCache=function(){return s};var a=/^<!doctype html/i,l=/<input\s[^>]*name="username"/i;function c(e){return!(!e||!e.responseText||!a.test(e.responseText)||!l.test(e.responseText)||(console.error("The user has logout, need to refresh the page..."),0))}function u(e,t,n,o){if(void 0===n&&(n=!1),void 0===o&&(o={}),e.includes(":"))throw new Error("Incorrect key value.");if("save"===t||!/^[a-z]+$/.test(t))throw new Error("Incorrect requestType");var r=e+":"+t;if(Object.keys(o).sort().forEach((function(e){r+=":"+e+"="+o[e]})),r in s){if(!n)return s[r];delete s[r]}var i=new Promise((function(n,a){var l={dataType:"json",url:"mobile_data.php?action="+encodeURIComponent(t)+"&key="+encodeURIComponent(e),cache:!1};Object.keys(o).length&&(l.method="POST",l.data=o),$.ajax(l).then((function(e){s[r]&&"pending"===s[r].status&&s[r].promise===i?(console.log("Passing the cache for ".concat(r," to resolved.")),s[r]={status:"resolved",data:e,promise:i}):console.log("The promise in the cache for ".concat(r," is not the good one. Discarding.")),n(e)}),(function(e){s[r]&&"pending"===s[r].status&&s[r].promise===i?(console.log("Passing the cache for ".concat(r," to rejected.")),s[r]={status:"rejected",error:e,promise:i}):console.log("The promise in the cache for ".concat(r," is not the good one. Discarding.")),c(e)&&(console.error("Reloading the page"),window.location.reload()),a(e)}))}));return s[r]={status:"pending",promise:i},s[r]}function p(e){Object.keys(s).filter((function(t){return t===e||t.startsWith(e+":")})).forEach((function(e){return delete s[e]}))}var h,f=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},d=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},m=function(){function e(e,t){this.type=e,this.label=t.label,this.loadData=t.loadData}return e.prototype.retrieveData=function(e,t){var n,o=new Map;if(!this.loadData)return o;for(var r=0,i=this.loadData;r<i.length;r++){var s=i[r],a={};s.requestParams&&(a=Object.assign(a,s.requestParams)),s.requestParamsFunc&&(a=Object.assign(a,s.requestParamsFunc(e))),o.set(null!==(n=s.retrievedDataKey)&&void 0!==n?n:s.dataKey,u(s.dataKey,s.requestType,t,a))}return o},e.prototype.renderVars=function(e,t){var n=!1,o=!1,r=!1;t.forEach((function(e){!1===e?n=!0:"rejected"===e.status?o=!0:"pending"===e.status&&(r=!0)})),n||o||!r||setTimeout((function(){var e=$("[pickupmobile-pending]");e.length?e.trigger("rerender-state"):console.log("The pending div is not in the dom anymore.")}),500);var i={retrievedData:{map:t,isMissingKey:n,isError:o,isPending:r}};return o||r||this._renderVars(e,t,i),i},e.prototype._renderVars=function(e,t,n){},e.prototype.renderVeto1=function(e,t){},e.prototype.renderVeto2=function(e,t,n){},e.prototype.postRenderAndBind=function(e,t,n,o){},e.prototype.possibleBackwards=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){return[2,[]]}))}))},e.prototype.possibleNunjucks=function(){return f(this,void 0,void 0,(function(){return d(this,(function(e){return[2,[]]}))}))},e}();!function(e){e[e.GOING_BACKWARD=1]="GOING_BACKWARD",e[e.INIT=2]="INIT",e[e.REFRESHING=3]="REFRESHING",e[e.RELOADDATA=4]="RELOADDATA",e[e.GOING_FORWARD=5]="GOING_FORWARD"}(h||(h={}));var v,g=(v=function(e,t){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},v(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},b=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},_=function(e){function t(t){var n=e.call(this,"compute",t)||this;return n.goto=t.goto,n.nunjucks=t.nunjucks,n.func=t.func,n.computeUntil=t.computeUntil,n}return g(t,e),t.prototype.renderVeto1=function(t,n){var o,r,i=e.prototype.renderVeto1.call(this,t,n);if(i)return console.log("Im on a compute state, but my parent class as already a veto."),i;if(t===h.GOING_BACKWARD)return console.log("Im on a compute state, and we are going backward..."),{type:"backward"};console.log("Im on a compute state, and we are not going backward. Computing...");var s=[];if(this.nunjucks&&(console.log("I have to render a nunjucks string"),f=this.renderNunjucks(n))){var a={label:this.nunjucks.label,name:this.nunjucks.name,value:f};s.push(a)}if(this.func){console.log("I have to call a compute function");for(var l={},c=null!==(o=n.getStackValuesUntil(this.computeUntil))&&void 0!==o?o:[],u=0;u<c.length;u++){var p=c[u];l[p.name]=null!==(r=p.display)&&void 0!==r?r:p.value}var f;(f=this.func(n,l))&&(Array.isArray(f)?s.push.apply(s,f):s.push(f))}return s.length>0&&n.setValues(s),{type:"forward",goto:this.goto}},t.prototype.bindEvents=function(){throw new Error("Should not bind events for a compute state.")},t.prototype.renderNunjucks=function(e){var t,n;if(this.nunjucks){for(var o={},i=null!==(t=e.getStackValuesUntil(this.computeUntil))&&void 0!==t?t:[],s=0;s<i.length;s++){var a=i[s];o[a.name]=null!==(n=a.display)&&void 0!==n?n:a.value}return r.renderString(this.nunjucks.format,o)}},t.prototype.possibleGotos=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){return[2,[this.goto]]}))}))},t.prototype.possibleNunjucks=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){return this.nunjucks?[2,[{format:this.nunjucks.format}]]:[2,[]]}))}))},t}(m),k=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=function(e){function t(t){var n=e.call(this,"choice",t)||this;return n.choices=t.choices,n}return k(t,e),t.prototype.bindEvents=function(e,t){var n=this;e.on("click.stateEvents","[pickupmobile-button]",(function(o){var r,i;console.log("Clicking on button...");var s=$(o.currentTarget).attr("pickupmobile-button"),a=n.choices.find((function(e){return e.value===s}));if(!a)throw new Error("Cant find this choice: ".concat(s));var l={label:n.label,name:null!==(i=null!==(r=n.name)&&void 0!==r?r:a.name)&&void 0!==i?i:"",value:null!=s?s:"",silent:!n.name&&!a.name,display:a.label};t.setValues(l),e.trigger("goto-state",[a.goto])}))},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){var e,t,n;return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){for(e={},t=0;t<this.choices.length;t++)(n=this.choices[t].goto)&&(e[n]=!0);return[2,Object.keys(e)]}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m);function x(e,t){switch(t){case"upperCase":return e.toUpperCase();case"lowerCase":return e.toLowerCase();case"localeUpperCase":return e.toLocaleUpperCase();case"localeLowerCase":return e.toLocaleLowerCase()}return e}function E(e,t,n,o){for(var r,i,s={values:[],matchingLines:new Map},a=0,l=e;a<l.length;a++){var c=l[a],u=null!==(r=c[t])&&void 0!==r?r:"";n&&(u=x(u,n)),o&&""===u||(s.matchingLines.has(u)?null===(i=s.matchingLines.get(u))||void 0===i||i.push(c):(s.matchingLines.set(u,[c]),s.values.push(u)))}return s.values.sort((function(e,t){return e.localeCompare(t)})),s}var O=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function L(){var e=new Date(Date.now()),t=e.getFullYear().toString(),n=(e.getMonth()+1).toString();n.length<2&&(n="0"+n);var o=e.getDate().toString();return o.length<2&&(o="0"+o),t+"-"+n+"-"+o}var T=function(e){function t(t){var n=e.call(this,"form",t)||this;return n.goto=t.goto,n.edit=t.edit,n.fields=t.fields,n}return O(t,e),t.prototype._renderVars=function(e,t,n){this.initDateFields(),this.initFieldsDefaults(e,t),n.useDefaultValues=!e.isAnyValue(),n.filteredOptions={};for(var o=0,r=this.fields;o<r.length;o++){var i=r[o];"options"in i&&(n.filteredOptions[i.name]=i.options),"filterOptions"in i&&i.filterOptions&&(console.log("form._renderVars: field "+i.name+" use filterOptions, calling it."),n.filteredOptions[i.name]=i.filterOptions(i,e,t))}},t.prototype.bindEvents=function(e,t){var n=this;e.on("submit.stateEvents","form",(function(o){var r=$(o.currentTarget).serializeArray(),i=n.checkForm(r);if(i.find((function(e){return e.invalid})))return t.setValues(i),void e.trigger("rerender-state",[]);t.setValues(i),e.trigger("goto-state",[n.goto])}))},t.prototype.postRenderAndBind=function(t,n,o,r){var i;e.prototype.postRenderAndBind.call(this,t,n,o,r),(null==r?void 0:r.useDefaultValues)?(i=t.find("input:visible:not(disabled), checkbox:visible:not(disabled), textarea:visible:not(disabled)").first()).length&&i.focus():(i=t.find("input.is-invalid:visible:not(disabled), checkbox.is-invalid:visible:not(disabled), textarea.is-invalid:visible:not(disabled)").first()).length&&i.focus()},t.prototype.retrieveData=function(t,n){var o,r,i=e.prototype.retrieveData.call(this,t,n);if(null===(o=this.edit)||void 0===o?void 0:o.stackKey){var s=t.searchValue(this.edit.stackKey);if(s){var a=u(this.edit.getDataKey,"get",n,{id:s});if(i.set("__edit",a),!t.isAnyValue()&&"resolved"===a.status){var l=[];console.debug("Mapping fields edit value from stack..."),console.debug("  Data are:",a.data);for(var c=0;c<this.fields.length;c++){var p=this.fields[c];if(null===(r=p.edit)||void 0===r?void 0:r.getDataFromSourceKey){console.debug("  Field "+p.name+" must be mapped from:",p.edit.getDataFromSourceKey);var h=a.data[p.edit.getDataFromSourceKey];p.edit.convertData&&(console.debug("    and the value must be converted."),h=p.edit.convertData(h)),console.debug("  Field "+p.name+" retained value:",h),l.push({name:p.name,value:h})}}var f=this.checkForm(l);t.setValues([].concat(f))}}}var d=function(e){var o=m.fields[e];if(o.notes&&"load"in o.notes){var r=o.notes,s=u(r.load,"list",n);if(i.set("__notes_"+o.name,s),"resolved"===s.status){console.debug("Loading notes for field "+o.name+", based on value of "+r.basedOnValueOf);var a=t.searchValue(r.basedOnValueOf);if(console.debug("  value in stack:",a),console.debug("  looking for key in data:",r.key),console.debug("  note field:",r.field),console.debug("  data: ",s.data),void 0!==a){var l=s.data.find((function(e){return r.key&&e[r.key]===a}));l&&(console.debug("Found data for note:",l),r.label=l[r.field])}}}if("varchar"===o.type&&"loadSuggestions"in o&&o.loadSuggestions&&(s=u(o.loadSuggestions.dataKey,"list",n),i.set(o.name+".suggestions",s),"resolved"===s.status&&(o.suggestions=E(s.data,o.loadSuggestions.field,o.loadSuggestions.filter,!0).values)),"select"===o.type&&"load"in o){var c=void 0;if(o.loadParams)for(var p in c={},o.loadParams){var h=o.loadParams[p];if("string"==typeof h)c[p]=h;else{if("object"!=typeof h||"stack"!==h.type)throw new Error("Wrong definition");var f=t.searchValue(h.key);void 0!==f&&(c[p]=f)}}s=u(o.load,"list",n,c),i.set(o.name,s),"resolved"===s.status&&(o.options=s.data.map((function(e){return{value:e[o.map.value],label:e[o.map.label]}})),o.dontAddEmptyOption||o.options.find((function(e){return""===e.value||"0"===e.value}))||o.options.unshift({value:"",label:"-"}))}},m=this;for(c=0;c<this.fields.length;c++)d(c);return i},t.prototype.initDateFields=function(){for(var e=0;e<this.fields.length;e++){var t=this.fields[e];"date"===t.type&&(t.defaultToToday&&(t.default=L()),t.maxToToday&&(t.max=L()))}},t.prototype.initFieldsDefaults=function(e,t){for(var n=0;n<this.fields.length;n++){var o=this.fields[n];"date"===o.type&&o.defaultToToday?o.default=L():o.defaultFunc&&(o.default=o.defaultFunc(e,t))}},t.prototype.getField=function(e){return this.fields.find((function(t){return t.name===e}))},t.prototype.checkForm=function(e){for(var t=[],n=function(n){var i=r.fields[n],s=e.filter((function(e){return e.name===i.name}));if(s.length>1)throw new Error("Did not expert to have multiple values for field "+i.name);var a=s.length?s[0].value:"",l={label:i.label,name:i.name,value:a};if("boolean"===i.type)l.display="1"===a?"Yes":"No";else if("select"===i.type)(c=i.options.find((function(e){return e.value===l.value})))&&(l.display=c.label);else if("radio"===i.type){var c;(c=i.options.find((function(e){return e.value===l.value})))&&(l.display=c.label)}else"hidden"===i.type&&(l.invisible=!0);if(t.push(l),i.mandatory){if(!l.value)return l.invalid=o("This field is mandatory"),"continue";if("select"===i.type&&"0"===l.value)return l.invalid=o("This field is mandatory"),"continue"}return l.value&&i.maxLength&&l.value.length>i.maxLength?(l.invalid=o("Max length is {length}",{length:i.maxLength.toString()}),"continue"):"integer"===i.type&&!/^\d*$/.test(l.value)||"float"===i.type&&!/^$|^\d+(\.\d*)?$/.test(l.value)?(l.invalid=o("Invalid number"),"continue"):("integer"!==i.type&&"float"!==i.type||(Number(l.value)<i.min&&(l.invalid=o("Minimum is {min}",{min:i.min.toString()})),Number(l.value)>i.max&&(l.invalid=o("Maximum is {max}",{max:i.max.toString()}))),void("date"===i.type&&(/^\d{4}-\d{2}-\d{2}$/.test(a)||(l.invalid=o("Invalid date")))))},r=this,i=0;i<this.fields.length;i++)n(i);return t},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){return[2,[this.goto]]}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m),S=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),A=function(e){function t(t){var n=e.call(this,"pick",t)||this;return n.key=t.key,n.fields=t.fields,n.primaryKey=t.primaryKey,n.goto=t.goto,n.creationGoto=t.creationGoto,n.creationLabel=t.creationLabel,n}return S(t,e),t.prototype.retrieveData=function(t,n){var o=e.prototype.retrieveData.call(this,t,n);return o.set("data",u(this.key,"list",n)),o},t.prototype._renderVars=function(e,t,n){var o=t.get("data");o&&"resolved"===o.status&&(null==o?void 0:o.data)&&(n.formInfos=this.getFormInfos(e,o.data))},t.prototype.renderVeto2=function(t,n,o){var r=e.prototype.renderVeto2.call(this,t,n,o);if(r)return r;if(t===h.REFRESHING&&o&&o.formInfos&&o.formInfos.pickedItems&&1===o.formInfos.pickedItems.length){var i={label:this.key,name:this.key,value:o.formInfos.pickedItems[0][this.primaryKey],invisible:!0};return n.changeOrAppendValues(i),{type:"forward",goto:this.goto}}},t.prototype.bindEvents=function(e,t){var n=this;e.on("change.stateEvents","[pickupmobile-pick-select]",(function(e){var o,r,i=$(e.currentTarget),s=i.find("option:selected:first"),a=null!==(o=s.attr("value"))&&void 0!==o?o:"",l=null!==(r=i.attr("name"))&&void 0!==r?r:"",c=n.fields.find((function(e){return e.name===l}));if(!c)throw new Error("Cant find field "+l);""===a&&/^\s*$/.test(s.text())?t.removeValue(c.name):t.changeOrAppendValues({label:c.label,name:c.name,value:a,display:s.text(),silent:!0}),s.trigger("rerender-state")})),e.on("click.stateEvents","[pickupmobile-pick-pick]",(function(o){var r,i=null!==(r=$(o.currentTarget).attr("pickupmobile-pick-pick"))&&void 0!==r?r:"",s={label:n.key,name:n.key,value:i,invisible:!0};t.changeOrAppendValues(s),e.trigger("goto-state",[n.goto])})),e.on("click.stateEvents","[pickupmobile-pick-create]",(function(){n.creationGoto&&(t.setValues(null),e.trigger("goto-state",[n.creationGoto]))})),e.on("click.stateEvents","[pickupmobile-pick-empty]",(function(){t.setValues(null),e.trigger("rerender-state")}))},t.prototype.getFormInfos=function(e,t){for(var n,o={fieldsInfos:[],pickedItems:[],creation:!!this.creationGoto,creationLabel:this.creationLabel},r=!0,i=0;i<this.fields.length;i++){var s=this.fields[i],a=[];if(r){for(var l=e.getValue(s.name),c=[{label:"",value:"",selected:void 0===l}],u=E(t,s.name,s.applyFilter),p=0,h=u.values;p<h.length;p++){var f=h[p],d=l===f;c.push({label:""===f?"-":f,value:f,selected:d})}if(void 0!==l&&u.matchingLines.has(l))for(var m=0,v=null!==(n=u.matchingLines.get(l))&&void 0!==n?n:[];m<v.length;m++){var g=v[m];a.push(g)}o.fieldsInfos.push({disabled:!1,field:s,options:c}),t=a,void 0===l&&(r=!1)}else o.fieldsInfos.push({disabled:!0,field:s,options:[]}),t=a}return r&&(o.pickedItems=t),o},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){var e;return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(t){return e=[],this.goto&&e.push(this.goto),this.creationGoto&&e.push(this.creationGoto),[2,e]}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m);function C(){document.querySelectorAll("input[type=submit][pickupmobile-disabled-waiting]").forEach((function(e){e.removeAttribute("pickupmobile-disabled-waiting"),"disabled"in e&&(e.disabled=!1)}))}var N=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},I=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},j=function(e){function t(t){var n,r,i,s,a=e.call(this,"save",t)||this;return a.saveUntil=t.saveUntil,a.removeUntil=null!==(n=t.removeUntil)&&void 0!==n?n:t.saveUntil,a.removeFromStack=!!t.removeFromStack,a.key=t.key,a.primaryKey=t.primaryKey,a.labelKey=t.labelKey,a.goto=t.goto,a.dependingCacheKey=t.dependingCacheKey,a.errorLabels=null!==(r=t.errorLabels)&&void 0!==r?r:new Map,a.alertMessageLevel=null!==(i=t.alertMessageLevel)&&void 0!==i?i:"info",a.alertMessageText=null!==(s=t.alertMessageText)&&void 0!==s?s:o("Please confirm the data you want to save:"),a}return N(t,e),t.prototype._renderVars=function(e,t,n){var o;n.stackValues=null===(o=e.previous)||void 0===o?void 0:o.getStackValuesUntil(this.saveUntil),n.displayStackValue=i.displayStackValue,n.getDisplayStackValue=i.getDisplayStackValue,n.alertMessageLevel=this.alertMessageLevel,n.alertMessageText=this.alertMessageText},t.prototype.renderVeto1=function(t,n){return e.prototype.renderVeto1.call(this,t,n)||(t===h.GOING_BACKWARD?{type:"backward"}:void 0)},t.prototype.bindEvents=function(e,t){var n=this;e.on("submit.stateEvents","form",(function(r){var s=$(r.currentTarget);if(s.hasClass("pickupmobile-saving"))console.log("Already submitting... Canceling.");else{console.log("Saving data..."),$("[pickupmobile-save-error-container]").text("").addClass("d-none"),s.addClass("pickupmobile-saving"),document.querySelectorAll("input[type=submit]").forEach((function(e){e.setAttribute("pickupmobile-disabled-waiting",""),"disabled"in e&&(e.disabled=!0)}));var a=function(e){var t,r,i;console.error(e),s.removeClass("pickupmobile-saving"),C(),i="string"==typeof e?e:"object"==typeof e&&"statusText"in e?e.statusText:"object"==typeof e&&"_pickup_error"in e?null!==(t=n.errorLabels.get(e._pickup_error))&&void 0!==t?t:null!==(r=e._pickup_error_message)&&void 0!==r?r:"Unknown error":""+e,$("[pickupmobile-save-error-container]").text(o("Error:")+" "+i).removeClass("d-none")},l=t.getStackValue(n.key);if(null==l?void 0:l.value)return console.log("The value was already saved."),s.removeClass("pickupmobile-saving"),C(),void e.trigger("goto-state",[n.goto]);var u=t.getStackValuesUntil(n.saveUntil);if(u){var h;try{h=i.stackValuesToParams(u)}catch(e){return void a(e)}var f=function(e,t,n){return new Promise((function(o,r){var i="mobile_data.php?action=save&key="+encodeURIComponent(e);$.ajax({dataType:"json",url:i,cache:!1,method:"POST",data:t}).then((function(t){p(e),void 0!==n&&p(n),"object"==typeof t&&"_pickup_error"in t&&t._pickup_error?r(t):o(t)}),(function(t){p(e),void 0!==n&&p(n),c(t)&&(console.error("Reloading the page"),window.location.reload()),r(t)}))}))}(n.key,h,n.dependingCacheKey);f.then((function(o){var r=o[n.primaryKey];if(console.log("Reading save result..."),!r||Number(r)<=0)a("Missing primary key in result");else{console.log("We got a new object with primaryKey: "+r),s.removeClass("pickupmobile-saving"),C(),t.setValues({label:n.key,name:n.key,value:r,display:o[n.labelKey]});var i={from:n.removeFromStack?void 0:t.stateName,to:n.removeUntil};e.trigger("goto-state",[n.goto,i])}}),a)}else a("Error in configuration, cant find state "+n.saveUntil)}}))},t.prototype.possibleGotos=function(){return F(this,void 0,void 0,(function(){return I(this,(function(e){return[2,[this.goto]]}))}))},t.prototype.possibleBackwards=function(){return F(this,void 0,void 0,(function(){var e;return I(this,(function(t){return e=[this.saveUntil],this.removeUntil!==this.saveUntil&&e.push(this.removeUntil),[2,e]}))}))},t}(m),P=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),D=function(e){function t(t){var n=e.call(this,"select",t)||this;return n.options=t.options,n}return P(t,e),t.prototype.bindEvents=function(e,t){console.error("not implemented yet")},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){throw new Error("Not implemented yet")}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m),V=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=function(e){function t(t){var n=e.call(this,"show",t)||this;return n.key=t.key,n.primaryKey=t.primaryKey,n.fields=t.fields,n.addGoto=t.addGoto,n.addLabel=t.addLabel,n.okGoto=t.okGoto,n}return V(t,e),t.prototype._getValue=function(e){return e.searchValue(this.primaryKey)},t.prototype.getField=function(e,t){t||(t=this.fields);for(var n=0,o=t;n<o.length;n++){var r=o[n];if(r.name===e)return r;if("lines"in r&&r.lines){var i=this.getField(e,r.lines);if(i)return i}}},t.prototype.retrieveData=function(t,n){var o=e.prototype.retrieveData.call(this,t,n);t.setValues(null);var r=this._getValue(t);return void 0===r?(o.set("data",!1),o):(o.set("data",u(this.key,"get",n,{id:r})),o)},t.prototype._renderVars=function(e,t,n){n.fields=this.fields,n.data=t.get("data")},t.prototype.bindEvents=function(e,t){var n=this;e.on("click.stateEvents","[pickupmobile-show-add]",(function(){n.addGoto&&e.trigger("goto-state",[n.addGoto])})),e.on("click.stateEvents","[pickupmobile-show-ok]",(function(){n.okGoto&&e.trigger("goto-state",[n.okGoto])})),e.on("click.StateEvents","[pickupmobile-show-goto]",(function(n){for(var o,r,i,s=$(n.currentTarget),a=s.attr("pickupmobile-show-goto"),l=JSON.parse(null!==(o=s.attr("pickupmobile-show-data"))&&void 0!==o?o:"{}"),c=[],u=0,p=JSON.parse(null!==(r=s.attr("pickupmobile-show-push-to-stack"))&&void 0!==r?r:"[]");u<p.length;u++){var h=p[u],f=void 0;if("fromDataKey"in h)f=l[h.fromDataKey];else{if(!("value"in h))continue;f=h.value}c.push({label:null!==(i=h.stackLabel)&&void 0!==i?i:h.pushOnStackKey,name:h.pushOnStackKey,value:f,invisible:h.invisible,silent:h.silent})}t.setValues(c),e.trigger("goto-state",[a])})),e.on("click.StateEvents","[pickupmobile-show-action]",(function(e){var t,o=$(e.currentTarget),r=o.attr("pickupmobile-show-action");if(r){var i=JSON.parse(null!==(t=o.attr("pickupmobile-show-data"))&&void 0!==t?t:"{}"),s=n.getField(r);s&&"actionFunc"in s&&s.actionFunc(o,i)}}))},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){function e(n){n.forEach((function(n){"goto"in n&&n.goto?t.push(n.goto):"lines"===n.type&&e(n.lines)}))}var t;return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(n){return t=[],this.addGoto&&t.push(this.addGoto),this.okGoto&&t.push(this.okGoto),e(this.fields),[2,t]}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m),M=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),R=function(e){function t(t){var n=e.call(this,"virtual",t)||this;return n.goto=t.goto,n}return M(t,e),t.prototype.renderVeto1=function(t,n){var o=e.prototype.renderVeto1.call(this,t,n);return o?(console.log("Im on a virtual state, but my parent class as already a veto."),o):t===h.GOING_BACKWARD?(console.log("Im on a virtual state, and we are going backward..."),{type:"backward"}):(console.log("Im on a virtual state, and we are not going backward. Go forward..."),{type:"forward",goto:this.goto})},t.prototype.bindEvents=function(){throw new Error("Should not bind events for a virtual state.")},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){return[2,[this.goto]]}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m),B=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),U=function(e){function t(){return e.call(this,"unknown",{label:"???"})||this}return B(t,e),t.prototype.bindEvents=function(){},t.prototype.possibleGotos=function(){return e=this,t=void 0,o=function(){return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){return[2,[]]}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},t}(m);function W(e){var t;if("object"!=typeof e)throw new Error("Wrong parameter, should be an object");switch(null!==(t=e.type)&&void 0!==t?t:""){case"choice":return new w(e);case"form":return new T(e);case"pick":return new A(e);case"save":return new j(e);case"select":return new D(e);case"show":return new K(e);case"compute":return new _(e);case"virtual":return new R(e);case"unknown":return new U}throw new Error("Unknown type: ".concat(e.type))}var G=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},H=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},q=function(){function e(e,t,n,o,r,s){var a;if(this.name=e,this.clearStackOnGotoInit=o,this.version=t,this.userId=n,this.dolibarrUrl=s,this.states={},"object"!=typeof r)throw new Error("Invalid definition");for(var l in r)this.states[l]=W(r[l]);if(!("init"in this.states))throw new Error("Missing init state in machine definition");if("???"in this.states||(this.states["???"]=new U),!(this.states["???"]instanceof U))throw new Error('Definition constains an invalid entry for "???"');this.content=$('<div style="height: 100%"></div>');var c=this.stackStoragePrefix()+this.name,u=localStorage.getItem(c);if(u)try{this.stack=null!==(a=i.deserialize(u,t))&&void 0!==a?a:new i("init")}catch(e){console.error(e),this.stack=new i("init")}else this.stack=new i("init");for(var p=localStorage.length-1;p>=0;p--){var h=localStorage.key(p);(null==h?void 0:h.startsWith("stack_"))&&h.endsWith(this.name)&&h!==c&&localStorage.removeItem(h)}}return e.prototype.init=function(e){e.append(this.content),this.render(h.INIT)},e.prototype.currentState=function(){return this.state(this.stack.stateName)},e.prototype.state=function(e){return e in this.states?this.states[e]:(console.error('Unknown state "'+e+'"'),this.states["???"])},e.prototype.render=function(e){this._render(e,!0)},e.prototype.rerender=function(e){void 0===e&&(e=!1),this._render(e?h.RELOADDATA:h.REFRESHING,!1)},e.prototype._render=function(e,t){var n=this,i=this.currentState(),s=i.renderVeto1(e,this.stack);if(s)return console.log("There is a renderVeto1",s),void("backward"===s.type?setTimeout((function(){return n.gotoPreviousState()}),0):"forward"===s.type&&setTimeout((function(){return n.gotoState(s.goto)}),0));var a=i.retrieveData(this.stack,e===h.RELOADDATA),l=Object.assign({},{translate:o},i.renderVars(this.stack,a),{stack:this.stack,currentState:i}),c=i.renderVeto2(e,this.stack,l);if(c)return console.log("There is a renderVeto2",c),void("backward"===c.type?setTimeout((function(){return n.gotoPreviousState()}),0):"forward"===c.type&&setTimeout((function(){return n.gotoState(c.goto)}),0));var u=r.render("mobile.njk",l);t&&this.unbindEvents(),this.content.html(u),this.postRender(),t&&this.bindEvents(),i.postRenderAndBind(this.content,this.stack,t,l)},e.prototype.unbindEvents=function(){this.content.off()},e.prototype.bindEvents=function(){var e=this;this.content.on("click","[pickupmobile-reset-stack]",(function(){e.resetStack()})),this.content.on("click","[pickupmobile-return-dolibarr]",(function(){e.dolibarrUrl&&(window.location.href=e.dolibarrUrl)})),this.content.on("rerender-state.machineEvents",(function(){console.log("Asking to render again..."),e.rerender()})),this.content.on("click","[pickupmobile-reloaddata]",(function(){console.log("Asking to reload data..."),e.rerender(!0)})),this.content.on("goto-state.machineEvents",(function(t,n,o){if(!n||"string"!=typeof n)throw new Error("Invalid goto-state event");console.log("Going to state: "+n),e.gotoState(n,o)})),this.content.on("click.machineEvents","[pickupmobile-goto-previous]",(function(){console.log("Going to previous state..."),e.gotoPreviousState()})),this.currentState().bindEvents(this.content,this.stack),this.content.on("submit.machineEvents",(function(e){console.log("Submitting the form..."),e.preventDefault(),e.stopImmediatePropagation()}))},e.prototype.postRender=function(){this.content.find("[pickupmobile-select2]").each((function(e,t){var n=$(t);n.removeAttr("pickupmobile-select2"),n.select2({theme:"bootstrap-5"})}))},e.prototype.gotoState=function(e,t){var n,o,r=this.stack;if(this.clearStackOnGotoInit&&"init"===e)r=void 0;else if(t)if(t.from){var s=r.findByStateName(t.from);s&&(s.previous=null===(n=s.findByStateName(t.to))||void 0===n?void 0:n.previous)}else r=null===(o=r.findByStateName(t.to))||void 0===o?void 0:o.previous;this.stack=new i(e,r),this.saveStack(),this.render(h.GOING_FORWARD)},e.prototype.gotoPreviousState=function(){if(!this.stack.previous)throw new Error("Cant go to previous state");this.stack=this.stack.previous,this.saveStack(),this.render(h.GOING_BACKWARD)},e.prototype.resetStack=function(){this.stack=new i("init"),this.saveStack(),this.render(h.INIT)},e.prototype.stackStoragePrefix=function(){return"stack_"+this.userId+"_"},e.prototype.saveStack=function(){localStorage.setItem(this.stackStoragePrefix()+this.name,this.stack.serialize(this.version))},e.prototype.findMissingStates=function(e){return G(this,void 0,void 0,(function(){var t,n,o,r,i,s,a,l,c,u;return H(this,(function(p){switch(p.label){case 0:t={},n=[null!=e?e:"init"],o={},p.label=1;case 1:return void 0===(r=n.shift())?[3,4]:r in o?[3,1]:(o[r]=!0,(i=this.states[r])?[4,i.possibleGotos()]:(t[r]=!0,[3,1]));case 2:return l=(a=p.sent()).concat,[4,i.possibleBackwards()];case 3:for(s=l.apply(a,[p.sent()]),c=0;c<s.length;c++)(u=s[c])in this.states?"unknown"===this.states[u].type?t[u]=!0:o[u]||n.push(u):t[u]=!0;return[3,1];case 4:return[2,Object.keys(t)]}}))}))},e.prototype.findMissingBackwardStates=function(e){return G(this,void 0,void 0,(function(){function t(e,n,r,i){if(r===n)return!0;if(e.find((function(e){return e===n})))return!1;if(e.push(n),!(n in o))return!1;for(var s=0;s<o[n].length;s++)if(t(e,o[n][s],r,i+1))return!0;return!1}var n,o,r,i,s,a,l,c,u,p,h,f,d,m;return H(this,(function(v){switch(v.label){case 0:for(a in n=e?[e]:Object.keys(this.states),o={},r=function(e){var t,n,r;return H(this,(function(s){switch(s.label){case 0:return[4,i.states[e].possibleGotos()];case 1:for(t=s.sent(),n=0;n<t.length;n++)(r=t[n])in o||(o[r]=[]),o[r].find((function(t){return t===e}))||o[r].push(e);return[2]}}))},i=this,s=[],this.states)s.push(a);l=0,v.label=1;case 1:return l<s.length?(p=s[l],[5,r(p)]):[3,4];case 2:v.sent(),v.label=3;case 3:return l++,[3,1];case 4:c=[],u=0,v.label=5;case 5:if(!(u<n.length))return[3,8];if(p=n[u],!(h=this.states[p]))throw new Error("State ".concat(p," does not exist."));return[4,h.possibleBackwards()];case 6:for(f=v.sent(),d=0;d<f.length;d++)m=f[d],t([],p,m,0)||c.push("Cannot go back from ".concat(p," to ").concat(m,"."));v.label=7;case 7:return u++,[3,5];case 8:return[2,c]}}))}))},e.prototype.findOrphans=function(){return G(this,void 0,void 0,(function(){var e,t,n,o,r,i,s,a,l;return H(this,(function(c){switch(c.label){case 0:for(n in e={},t=[],this.states)t.push(n);o=0,c.label=1;case 1:return o<t.length?(l=t[o],[4,this.states[l].possibleGotos()]):[3,4];case 2:for(r=c.sent(),i=0;i<r.length;i++)s=r[i],e[s]=!0;c.label=3;case 3:return o++,[3,1];case 4:for(l in a=[],this.states)e[l]||a.push(l);return[2,a]}}))}))},e.prototype.testNunjucks=function(e){var t;return G(this,void 0,void 0,(function(){var n,o,i,s,a,l,c;return H(this,(function(u){switch(u.label){case 0:n=e?[e]:Object.keys(this.states),o=[],i=0,u.label=1;case 1:if(!(i<n.length))return[3,4];if(s=n[i],!this.states[s])throw new Error("Can't find state ".concat(s,"."));return[4,this.states[s].possibleNunjucks()];case 2:for(a=u.sent(),l=0;l<a.length;l++){c=a[l];try{r.renderString(c.format,null!==(t=c.var)&&void 0!==t?t:{})}catch(e){o.push("For state ".concat(s,", there was a format that failed:")+"\n==================\n"+c.format+"\n==================\nWith error: "+e)}}u.label=3;case 3:return i++,[3,1];case 4:return[2,o]}}))}))},e.prototype.findProblems=function(){return G(this,void 0,void 0,(function(){var e;return H(this,(function(t){switch(t.label){case 0:return e={},[4,this.findMissingStates()];case 1:return e.missings=t.sent(),[4,this.findMissingBackwardStates()];case 2:return e.missingsBackwards=t.sent(),[4,this.testNunjucks()];case 3:return e.nunjucks=t.sent(),[4,this.findOrphans()];case 4:return[2,(e.orphans=t.sent(),e)]}}))}))},e}(),z="/custom/pickup/pickup_printable_label.php";function Y(e,t){var n="get"in e?e.get(0):e;if(n){var o,r=document.createElement("iframe");r.setAttribute("src",t),r.style.display="none";var i=!1;n.classList.contains("btn")?((o=document.createElement("span")).classList.add("spinner-border"),o.classList.add("spinner-border-sm"),e.prepend(o)):n.classList.contains("button")&&(i=!0,n.classList.add("disabled")),n.after(r),r.onload=function(){var e;null===(e=r.contentWindow)||void 0===e||e.print(),null==o||o.remove(),i&&n.classList.remove("disabled")}}}function X(e,t,n,o){var r=o.useUnitWeight,i=o.useUnitLength,s=o.useUnitWidth,a=o.useUnitHeight,l=o.useUnitSurface,c=o.useUnitVolume;"0"!==r&&(e.push({type:"float",name:t+"weight",label:"Poids unitaire ("+o.weightUnitLabel+")",mandatory:"mandatory"===r,min:0,max:1e6,step:.001,edit:{getDataFromSourceKey:n+"weight"}}),e.push({type:"hidden",name:t+"weight_unit",label:"Unité de poids",mandatory:!1,default:o.weightUnit})),"0"!==i&&(e.push({type:"float",name:t+"length",label:"Longueur unitaire ("+o.sizeUnitLabel+")",mandatory:"mandatory"===i,min:0,max:1e6,step:.01,edit:{getDataFromSourceKey:n+"length"}}),e.push({type:"hidden",name:t+"length_unit",label:"Unité de longueur",mandatory:!1,default:o.sizeUnit})),"0"!==s&&(e.push({type:"float",name:t+"width",label:"Largeur unitaire ("+o.sizeUnitLabel+")",mandatory:"mandatory"===s,min:0,max:1e6,step:.01,edit:{getDataFromSourceKey:n+"width"}}),e.push({type:"hidden",name:t+"width_unit",label:"Unité de largeur",mandatory:!1,default:o.sizeUnit})),"0"!==a&&(e.push({type:"float",name:t+"height",label:"Hauteur unitaire ("+o.sizeUnitLabel+")",mandatory:"mandatory"===a,min:0,max:1e6,step:.01,edit:{getDataFromSourceKey:n+"height"}}),e.push({type:"hidden",name:t+"height_unit",label:"Unité de hauteur",mandatory:!1,default:o.sizeUnit})),"0"!==l&&(e.push({type:"float",name:t+"surface",label:"Surface unitaire ("+o.surfaceUnitLabel+")",mandatory:"mandatory"===l,min:0,max:1e6,step:1e-4,edit:{getDataFromSourceKey:n+"surface"}}),e.push({type:"hidden",name:t+"surface_unit",label:"Unité de surface",mandatory:!1,default:o.surfaceUnit})),"0"!==c&&(e.push({type:"float",name:t+"volume",label:"Volume unitaire ("+o.volumeUnitLabel+")",mandatory:"mandatory"===c,min:0,max:1e8,step:.01,edit:{getDataFromSourceKey:n+"volume"}}),e.push({type:"hidden",name:t+"volume_unit",label:"Unité de volume",mandatory:!1,default:o.volumeUnit}))}function Q(e,t,n){var o=[];return e&&o.push({name:"pbrand",label:"Marque",applyFilter:"localeUpperCase"}),o.push({name:"ref",label:"Ref"}),{type:"pick",label:"Recherche d'un produit connu",key:"product",primaryKey:"rowid",goto:t,creationGoto:n,creationLabel:"Nouveau produit",fields:o}}function J(e,t){var n;return t&&(n=function(t,n,o){var r=o.get("all_pcats");if(!r||"resolved"!==r.status)return console.log("product_deee_type.filterOptions: data are not loaded"),t.options;var i=n.searchValue(e);if(!i)return console.error("product_deee_type.filterOptions: no pcat in stack"),t.options;var s=r.data.find((function(e){return e.rowid===i}));return s?s.deee_constraint&&""!==s.deee_constraint?(console.log("product_deee_type.filterOptions: deee_constraint is: ",s.deee_constraint),t.options.filter((function(e){switch(s.deee_constraint){case"off":return""===e.value;case"gef":return"gef"===e.value;case"ghf":return"ghf"===e.value;case"pam":return"pam"===e.value;case"pampro":return"pam_pro"===e.value;case"ecr":return"ecr"===e.value;case"ecrpro":return"ecr_pro"===e.value;case"pam_or_pampro":return"pam"===e.value||"pam_pro"===e.value;case"ecr_or_ecrpro":return"ecr"===e.value||"ecr_pro"===e.value}return console.log("product_deee_type.filterOptions: invalid deee_constraint:",s.deee_constraint),!1}))):(console.log("product_deee_type.filterOptions: the current pcat has not deee_constraint"),t.options):(console.error("product_deee_type.filterOptions: did not found the current pcat, with id="+i),t.options)}),{type:"select",name:"product_deee_type",label:"DEEE",mandatory:!1,options:[],load:"dict",loadParams:{what:"deee_type"},dontAddEmptyOption:!0,map:{value:"value",label:"label"},filterOptions:n,edit:{getDataFromSourceKey:"deee_type"}}}function Z(e,t){var n;return t&&(n=function(t,n,o){var r=o.get("all_pcats");if(!r||"resolved"!==r.status)return console.log("product_hasbatch.filterOptions: data are not loaded"),t.options;var i=n.searchValue(e);if(!i)return console.error("product_hasbatch.filterOptions: no pcat in stack"),t.options;var s=r.data.find((function(e){return e.rowid===i}));return s?s.batch_constraint&&""!==s.batch_constraint?(console.log("product_hasbatch.filterOptions: batch_constraint is: ",s.batch_constraint),t.options.filter((function(e){switch(s.batch_constraint){case"batch_status_0":return"0"===e.value;case"batch_status_1":return"1"===e.value;case"batch_status_2":return"2"===e.value}return console.log("product_hasbatch.filterOptions: invalid batch_constraint:",s.batch_constraint),!1}))):(console.log("product_hasbatch.filterOptions: the current pcat has not batch_constraint"),t.options):(console.error("product_hasbatch.filterOptions: did not found the current pcat, with id="+i),t.options)}),{type:"select",name:"product_hasbatch",label:"Utiliser les numéros de lots/série",mandatory:!1,options:[{value:"0",label:"Non"},{value:"1",label:"Lot/Série"},{value:"2",label:"Numéro de série unique"}],filterOptions:n,edit:{getDataFromSourceKey:"hasbatch"}}}function ee(e,t,n,o,r,i,s,a){var l,c=[],u=!1;if(o&&c.push({type:"varchar",name:"product_pbrand",label:"Marque",mandatory:!0,maxLength:25,loadSuggestions:{dataKey:"product",field:"pbrand",filter:"localeUpperCase"}}),n||c.push({type:"varchar",name:"product_ref",label:"Référence",defaultFunc:"ressourcerie_cinema"!==a?void 0:function(e,t){var n,o,r=null!==(n=e.searchValue("label"))&&void 0!==n?n:"";if(!r)return"";var i=r.match(/>>\s*(\d\d\d\d+)/);if(!i)return"";var s=i[1],a=(null!==(o=e.searchValue("display"))&&void 0!==o?o:"").match(/P2\d(\d{2})\d{2}-(\d+)/);if(!a)return"";for(var l=a[1],c=a[2];c.length>3&&c.startsWith("0");)c=c.substring(1);var u=t.get("pickup");if(!u)return"";if("resolved"!==u.status)return"";var p=u.data.lines;if(!p)return"";for(var h="-"+l+c+"-",f=Math.max(1,p.length),d=0,m=p;d<m.length;d++){var v=m[d];if(v.name.toString().includes(h)){var g=parseInt(v.name.split(/-/g).pop());g>=f&&(f=g+1)}}for(var y=f.toString();y.length<4;)y="0"+y;return s+h+y},mandatory:!0,maxLength:128}),c.push({type:"varchar",name:"product_label",label:"Libellé",mandatory:n,maxLength:255,defaultFunc:"ressourcerie_cinema"!==a?void 0:function(e){var t,n=null!==(t=e.searchValue("label"))&&void 0!==t?t:"";if(!n)return"";var o=n.match(/^\s*\d+.*>>\s*\d\d\d\d+\s*(.*)$/);return o?o[1]:""}}),r&&(u=!0,c.push(Z(s,e))),t){u=!0;var p=J(s,e);c.push(p)}e&&(l={load:"pcat",key:"rowid",basedOnValueOf:"pcat",field:"notes"}),c.push({type:"text",name:"product_description",label:"Description de la fiche produit",mandatory:!1,notes:l});var h=[];return u&&e&&s&&h.push({dataKey:"pcat",retrievedDataKey:"all_pcats",requestType:"list"}),"ressourcerie_cinema"===a&&h.push({dataKey:"pickup",requestType:"get",requestParamsFunc:function(e){var t;return{id:null!==(t=e.searchValue("pickup"))&&void 0!==t?t:""}}}),{type:"form",label:"Remplir la fiche produit",goto:i,fields:c,loadData:h}}function te(e,t,n,o){return{type:"save",label:"Sauvegarde du produit",key:"product",primaryKey:"rowid",labelKey:"Produit",dependingCacheKey:"pickup",saveUntil:t,removeUntil:n,removeFromStack:o,goto:e}}function ne(e,t,n,o,r,i,s,a,l,c,u){var p=[];return e&&(p.push({type:"varchar",name:"reference_pcat_label",label:"Catégorie de référence",goto:c,pushToStack:[{fromDataKey:"ref",pushOnStackKey:"ref",silent:!0,invisible:!1,stackLabel:"Référence produit"},{value:"edit_product_cat_from_pickup",pushOnStackKey:"subaction",silent:!1,invisible:!0}]}),p.push({type:"varchar",name:"pcats",label:"Toutes les catégories"})),r&&p.push({type:"varchar",name:"pbrand",label:"Marque"}),p.push({type:"varchar",name:"ref",label:"Référence"},{type:"varchar",name:"label",label:"Libellé"}),l&&p.push({type:"edit",name:"product",label:"Éditer",pushToStack:[{fromDataKey:"ref",pushOnStackKey:"ref",silent:!0,invisible:!1,stackLabel:"Référence produit"},{fromDataKey:"reference_pcat_id",pushOnStackKey:"reference_pcat_id",silent:!0,invisible:!0},{value:"edit_product_attrs_from_pickup",pushOnStackKey:"subaction",silent:!1,invisible:!0}],goto:l}),i&&p.push({type:"varchar",name:"hasbatch_txt",label:"Numéro de lot/série"}),o&&p.push({type:"varchar",name:"deee_type_txt",label:"DEEE"}),"0"!==s.useUnitWeight&&p.push({type:"varchar",name:"weight_txt",label:"Poids"}),"0"!==s.useUnitLength&&p.push({type:"varchar",name:"length_txt",label:"Longueur"}),"0"!==s.useUnitWidth&&p.push({type:"varchar",name:"width_txt",label:"Largeur"}),"0"!==s.useUnitHeight&&p.push({type:"varchar",name:"height_txt",label:"Hauteur"}),"0"!==s.useUnitSurface&&p.push({type:"varchar",name:"surface_txt",label:"Surface"}),"0"!==s.useUnitVolume&&p.push({type:"varchar",name:"volume_txt",label:"Volume"}),p.push({type:"text",name:"description",label:"Description de la fiche produit"}),re(p,t,n),"ressourcerie_cinema"===u&&oe(!1,p),{type:"show",label:"Produit",key:"product",primaryKey:"product",okGoto:a,fields:p}}function oe(e,t){var n={type:"varchar",label:"Prix commerce",name:"lrdc_pxcommerce",mandatory:!1,edit:{getDataFromSourceKey:"lrdc_pxcommerce"}},o=t.findIndex((function(e){return"sellprice"===e.name}));o>=0?t.splice(o,0,n):t.push(n),t.push({type:"float",label:"Diamètre",name:"lrdc_diametre",mandatory:!1,min:0,max:1e3,step:.001,edit:{getDataFromSourceKey:"lrdc_diametre"}}),t.push({type:"float",label:"Épaisseur",name:"lrdc_epaisseur",mandatory:!1,min:0,max:1e3,step:.001,edit:{getDataFromSourceKey:"lrdc_epaisseur"}}),t.push({type:"varchar",label:"Matière produit",name:"lrdc_matiereproduit",mandatory:!1,edit:{getDataFromSourceKey:"lrdc_matiereproduit"}}),t.push({type:"varchar",label:"Couleur",name:"lrdc_couleur",mandatory:!1,edit:{getDataFromSourceKey:"lrdc_couleur"}}),t.push({type:"varchar",label:"Style - genre",name:"lrdc_style",mandatory:!1,edit:{getDataFromSourceKey:"lrdc_style"}}),e?t.push({type:"select",label:"Conditionnement",name:"lrdc_conditionnement",mandatory:!1,edit:{getDataFromSourceKey:"lrdc_conditionnement"},load:"dict",loadParams:{what:"lrdc_conditionnement"},map:{value:"value",label:"label"},options:[]}):t.push({type:"varchar",label:"Conditionnement",name:"lrdc_conditionnement_txt"})}function re(e,t,n){t&&e.push({type:"float",label:"Prix de vente",name:"sellprice",mandatory:!1,edit:{getDataFromSourceKey:"sellprice"},min:0,max:1e5,step:.01}),n&&e.push({type:"float",label:"Prix de location",name:"rentalprice",mandatory:!1,edit:{getDataFromSourceKey:"rentalprice"},min:0,max:1e5,step:.01})}function ie(e){return{type:"pick",label:"Catégorie du produit",key:"pcat",primaryKey:"rowid",goto:e,creationGoto:void 0,fields:[{name:"label",label:"Catégorie"}]}}function se(e,t,n,o){var r=[{type:"integer",name:"qty",label:"Quantité",mandatory:!0,default:"1",min:0,max:1e3,edit:{getDataFromSourceKey:"qty"}}];"pickupline"===t.editMode&&X(r,"line_","line_",t),n&&r.push({type:"text",name:"line_description",label:"Remarques",mandatory:!1,edit:{getDataFromSourceKey:"line_description"}});var i={type:"form",label:"Quantité",goto:o,fields:r};return e&&(i.edit={stackKey:"pickup_line_id",getDataKey:"pickupline"}),i}function ae(e){return"mandatory"===e||"optional"===e?e:"0"}n(702),$((function(){var e,n,o,i,s;!function(){var e;""===(t=null!==(e=$("html").attr("lang"))&&void 0!==e?e:"en")&&(t="en")}(),r.configure({autoescape:!0}),console.info("Pushing a state so we can manage history back."),history.pushState({},""),window.onpopstate=function(){var e=$("[pickupmobile-goto-previous]");e.length?(console.info("There is a previous button in the DOM, using it to handle popstate"),history.pushState({},""),e.click()):(console.info("The stack is empty, leaving pickupmobileapp"),history.back())};var a=$("[pickupmobileapp-container]");if("1"!==a.attr("data-demo")){var l=a.attr("data-entrepot-id");""===l&&(l=void 0);var c,u="1"===a.attr("data-use-pcat"),p="1"===a.attr("data-product-ref-auto"),h="1"===a.attr("data-use-pbrand"),f="1"===a.attr("data-use-sellprice"),d="1"===a.attr("data-use-rentalprice"),m="1"===a.attr("data-use-deee"),v="1"===a.attr("data-use-batch"),g="1"===a.attr("data-ask-hasbatch"),y="pickupline"===(c=a.attr("data-units-edit-mode"))?c:"product",b=ae(a.attr("data-units-weight")),_=ae(a.attr("data-units-length")),k="product"!==y?"0":ae(a.attr("data-units-width")),w="product"!==y?"0":ae(a.attr("data-units-height")),x=ae(a.attr("data-units-surface")),E=ae(a.attr("data-units-volume")),O=a.attr("data-weight-unit"),L=a.attr("data-weight-unit-label"),T=a.attr("data-size-unit"),S=a.attr("data-size-unit-label"),A=a.attr("data-surface-unit"),C=a.attr("data-surface-unit-label"),N=a.attr("data-volume-unit"),F=a.attr("data-volume-unit-label"),I=null!==(e=a.attr("data-processing-status"))&&void 0!==e?e:null,j="1"===a.attr("data-use-pickup-type"),P="1"===a.attr("data-use-pickupline-description"),D=a.attr("data-printable-label-url"),V=!!D,K=null!==(n=a.attr("data-dolibarr-url"))&&void 0!==n?n:void 0,M=null!==(o=a.attr("data-specific-mode"))&&void 0!==o?o:"";D&&(z=D);var R=null!==(i=a.attr("data-modpickup-version"))&&void 0!==i?i:"0";R+="_e"+(null!=l?l:"0"),R+="_c"+(u?"1":"0"),R+="_pra"+(p?"1":"0"),R+="_b"+(h?"1":"0"),R+="_sp"+(f?"1":"0"),R+="_rp"+(d?"1":"0"),R+="_pl"+(V?"1":"0"),R+="_d"+(m?"1":"0"),R+="_ba"+(v?"1":"0"),R+="_hb"+(g?"1":"0"),R+="_uw"+b[0],R+="_ul"+_[0],R+="_uw"+k[0],R+="_uh"+w[0],R+="_us"+x[0],R+="_uv"+E[0],R+="_csps"+(null!=I?I:"x"),R+="_pt"+(j?"1":"0"),R+="_pld"+(P?"1":"0"),R+="_eum"+y,R+="_wg"+O,R+="_su"+T,R+="_su"+A,R+="_vu"+N,M&&(R+="_sm");var B,U={useUnitWeight:b,useUnitLength:_,useUnitWidth:k,useUnitHeight:w,useUnitSurface:x,useUnitVolume:E,weightUnit:O,weightUnitLabel:L,sizeUnit:T,sizeUnitLabel:S,surfaceUnit:A,surfaceUnitLabel:C,volumeUnit:N,volumeUnitLabel:F,editMode:y},W={};W.init={type:"pick",label:"Accueil",key:"pickup",goto:"show_pickup",creationGoto:void 0!==l?"societe":"entrepot",creationLabel:"Nouvelle collecte",primaryKey:"rowid",fields:[{name:"display",label:"Collecte"}]},W.entrepot={type:"pick",label:"Entrepot",key:"entrepot",goto:"societe",primaryKey:"rowid",fields:[{name:"ref",label:"Entrepôt"}]},W.societe={type:"pick",label:"Sélection du donneur",key:"soc",goto:"show_societe",creationGoto:"create_societe",creationLabel:"Nouveau donneur",primaryKey:"rowid",fields:[{name:"nom",label:"Nom du donneur"}]},W.create_societe={type:"form",label:"Remplir la fiche du donneur",goto:"save_societe",fields:[{name:"name",type:"varchar",label:"Nom de la structure",mandatory:!0,maxLength:128},{name:"name_alias",type:"varchar",label:"Nom de la personne référente",mandatory:!1,maxLength:128},{name:"address",type:"text",label:"Adresse",mandatory:!1},{name:"zip",type:"varchar",label:"Code postal",mandatory:!1},{name:"town",type:"varchar",label:"Ville",mandatory:!1},{name:"email",type:"varchar",label:"Email",mandatory:!1,maxLength:32},{name:"phone",type:"varchar",label:"Téléphone",mandatory:!1},{name:"typent_id",type:"select",label:"Type du tiers",options:[],load:"dict",loadParams:{what:"typent_id"},map:{value:"id",label:"libelle"},mandatory:!0},{name:"forme_juridique_code",type:"select",label:"Type de structure",options:[],load:"dict",loadParams:{what:"forme_juridique_code",country:"fr"},map:{value:"code",label:"label"},mandatory:!1}]},W.save_societe={type:"save",label:"Sauvegarde du donneur",key:"soc",primaryKey:"rowid",labelKey:"name",saveUntil:"create_societe",goto:"show_societe"},W.show_societe={type:"show",label:"Fiche du donneur",key:"soc",primaryKey:"soc",okGoto:"create_pickup",fields:[{type:"varchar",name:"name",label:"Nom"},{type:"varchar",name:"name_alias",label:"Nom de la personne référente"},{type:"text",name:"complete_address",label:"Adresse"},{type:"varchar",name:"email",label:"Email"},{type:"varchar",name:"phone",label:"Téléphone"},{type:"varchar",name:"typent_libelle",label:"Type du tiers"},{type:"varchar",name:"forme_juridique",label:"Type de structure"}]},W.create_pickup=function(e,t){var n=[{name:"date_pickup",type:"date",label:"Date de la collecte",mandatory:!0,defaultToToday:!0,maxToToday:!0}];return t&&n.push({name:"pickup_type",type:"select",label:"Type de collecte",options:[],load:"dict",loadParams:{what:"pickup_type"},map:{value:"id",label:"label"},mandatory:!1}),n.push({type:"text",name:"description",label:"Remarques",mandatory:!1}),{type:"form",label:"Nouvelle collecte",goto:"save_pickup",fields:n}}(0,j),W.save_pickup={type:"save",label:"Création de la collecte",key:"pickup",primaryKey:"rowid",labelKey:"Collecte",saveUntil:void 0!==l?"societe":"entrepot",goto:"show_pickup"},W.show_pickup=function(e,t,n,o,r,i,s,a,l){var c=[{type:"varchar",name:"display",label:"Collecte"},{type:"varchar",name:"date",label:"Date"}];l&&c.push({type:"varchar",name:"pickup_type_label",label:"Type de collecte"}),c.push({type:"text",name:"description",label:"Description"});var u=[];t&&u.push({type:"varchar",name:"pbrand",label:"Marque"}),u.push({type:"varchar",name:"name",label:"Ref",goto:i,pushToStack:[{fromDataKey:"product_rowid",pushOnStackKey:"product",stackLabel:"Produit",silent:!1,invisible:!0}]}),u.push({type:"varchar",name:"label",label:"Label"});var p=[];return p.push({type:"concatenate",name:"name",label:"Produit",separatorHTML:"<br>",ignoreEmpty:!0,fields:u}),e&&p.push({type:"boolean",name:"deee",label:"DEEE",total:!0,totalQtyFieldName:"qty"}),p.push({type:"integer",name:"qty",label:"Quantité",total:!0,pushToStack:[{fromDataKey:"rowid",pushOnStackKey:"pickup_line_id",silent:!1,invisible:!0},{fromDataKey:"name",pushOnStackKey:"pickup_line_product_ref",stackLabel:"Produit",silent:!0,invisible:!1}],goto:s}),(o.useUnitWeight||o.useUnitLength||o.useUnitSurface||o.useUnitVolume)&&p.push({type:"text",name:"line_unitary_html",label:"Valeurs unitaires"}),n&&p.push({type:"action",name:"print_line_label",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="16" fill="currentColor" viewBox="0 0 32 16">\n  <g id="bars" fill="currentColor" stroke="none">\n    <rect x="0" y="0" width="4" height="30"></rect>\n    <rect x="6" y="0" width="2" height="30"></rect>\n    <rect x="12" y="0" width="2" height="30"></rect>\n    <rect x="22" y="0" width="4" height="30"></rect>\n    <rect x="28" y="0" width="6" height="30"></rect>\n  </g>\n</svg>',iconTitle:"Imprimer étiquettes",label:"",actionFunc:function(e,t){var n,o,r;(null==t?void 0:t.rowid)&&(n=e,o=t.rowid,(r=new URL(z,window.location.origin)).searchParams.set("what","pickupline"),r.searchParams.set("pickupline_id[]",o),Y(n,r.toString()))}}),c.push({type:"lines",name:"lines",label:"Produits",lines:p}),n&&c.push({type:"action",name:"print_label",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="16" fill="currentColor" viewBox="0 0 32 16">\n  <g id="bars" fill="currentColor" stroke="none">\n    <rect x="0" y="0" width="4" height="30"></rect>\n    <rect x="6" y="0" width="2" height="30"></rect>\n    <rect x="12" y="0" width="2" height="30"></rect>\n    <rect x="22" y="0" width="4" height="30"></rect>\n    <rect x="28" y="0" width="6" height="30"></rect>\n  </g>\n</svg>',iconTitle:"Imprimer étiquettes",label:"",actionFunc:function(e,t){var n,o,r;(null==t?void 0:t.rowid)&&(n=e,o=t.rowid,(r=new URL(z,window.location.origin)).searchParams.set("what","pickup"),r.searchParams.set("pickup_id[]",o),Y(n,r.toString()))}}),null!==a&&c.push({type:"edit",name:"pickup",disabledFunc:function(e){var t;return!((null===(t=null==e?void 0:e.lines)||void 0===t?void 0:t.length)>0)},label:"Fin de la saisie",pushToStack:[{fromDataKey:"rowid",pushOnStackKey:"pickup_id",stackLabel:"ID Collecte",silent:!1,invisible:!0},{fromDataKey:"display",pushOnStackKey:"pickup_display",stackLabel:"Collecte",silent:!0,invisible:!1},{value:a.processingStatus,pushOnStackKey:"pickup_status",stackLabel:"Statut",silent:!1,invisible:!0},{value:"En cours de traitement",pushOnStackKey:"pickup_status_label",stackLabel:"Statut",silent:!0,invisible:!1}],goto:a.goto}),{type:"show",label:"Collecte",key:"pickup",primaryKey:"pickup",addGoto:r,addLabel:"Ajouter un produit",fields:c}}(m,h,V,U,"product","show_product_from_pickup","qty_edit",I?{goto:"save_pickup_status",processingStatus:I}:null,j),u?(B="categorie",W.product=Q(h,"show_product","categorie"),W.categorie=ie("create_product"),W.create_product=ee(u,m,p,h,g,"product_specifications","pcat",M)):(B="create_product",W.product=Q(h,"show_product","create_product"),W.create_product=ee(u,m,p,h,g,"product_specifications","pcat",M)),W.product_specifications=function(e,t,n,o,r){var i={type:"form",label:"Caractéristiques",goto:o,fields:[]};return"product"===n.editMode&&X(i.fields,"","",n),re(i.fields,e,t),"ressourcerie_cinema"===r&&oe(!0,i.fields),0===i.fields.length?{type:"virtual",goto:o,label:"Caractéristiques"}:i}(f,d,U,"save_product",M),W.save_product=function(e,t){return{type:"save",label:"Sauvegarde du produit",key:"product",primaryKey:"rowid",labelKey:"Produit",saveUntil:t,goto:"show_product"}}(0,B),W.show_product=ne(u,f,d,m,h,v,U,"qty",void 0,void 0,M),W.show_product_from_pickup=ne(u,f,d,m,h,v,U,void 0,"edit_product","edit_product_cat",M),W.edit_product=function(e,t,n,o,r,i,s,a,l,c){var u,p=[],h=!1;if(i&&(h=!0,p.push(Z(l,e))),o){var f=J(l,e);p.push(f)}"product"===s.editMode&&X(p,"","",s),re(p,t,n),e&&(u={load:"pcat",key:"rowid",basedOnValueOf:"reference_pcat_id",field:"notes"}),p.push({type:"text",name:"product_description",label:"Description de la fiche produit",mandatory:!1,notes:u,edit:{getDataFromSourceKey:"description"}}),"ressourcerie_cinema"===c&&oe(!0,p);var d=[];return h&&e&&l&&d.push({dataKey:"pcat",retrievedDataKey:"all_pcats",requestType:"list"}),{type:"form",label:"Corriger la fiche produit",edit:{stackKey:"product",getDataKey:"product"},goto:"save_edit_product",fields:p,loadData:d}}(u,f,d,m,0,g,U,0,"reference_pcat_id",M),W.save_edit_product=te("show_pickup","init","show_pickup",!0),W.edit_product_cat=ie("save_edit_product_cat"),W.save_edit_product_cat=te("show_product_from_pickup","init","show_product_from_pickup",!0),W.qty=se(!1,U,P,"save_pickupline"),W.qty_edit=se(!0,U,P,"save_pickupline"),W.save_pickupline={type:"save",label:"Ajout du produit sur la collecte",key:"pickupline",primaryKey:"rowid",labelKey:"Produit",dependingCacheKey:"pickup",saveUntil:"init",removeUntil:"show_pickup",removeFromStack:!0,goto:"show_pickup"},I&&(W.save_pickup_status={type:"save",label:"Fin de la saisie",key:"pickup",primaryKey:"rowid",labelKey:"Collecte",saveUntil:"show_pickup",goto:"init",alertMessageLevel:"warning",alertMessageText:"En validant, vous ne pourrez plus modifier cette collecte."});var G=new q("myMachine",R,null!==(s=a.attr("data-user-id"))&&void 0!==s?s:"",!0,W,K);G.init(a),window.pickupMobileMachine=G}else!function(e){var t,n,o=null!==(t=e.attr("data-modpickup-version"))&&void 0!==t?t:"0",r={};r.init={type:"choice",label:"Accueil",choices:[{label:"Pick",value:"pick",goto:"pick"},{label:"Form",value:"form",goto:"form"},{label:"Compute+Show",value:"show",goto:"compute"},{label:"Select",value:"select",goto:"select"},{label:"Unknown",value:"unknown",goto:"dontexist"}]},r.pick=("show","form",{type:"pick",label:"Pick test",key:"demo",primaryKey:"rowid",goto:"show",creationGoto:"form",creationLabel:"New XXX",fields:[{name:"field1",label:"Demo 1",applyFilter:"localeUpperCase"},{name:"field2",label:"Demo 2"}]}),r.select={type:"select",label:"Select test (not fully implemented)",options:[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"}]},r.form={type:"form",label:"Form",goto:"save",fields:[{type:"varchar",name:"field1",label:"Field 1",mandatory:!0,maxLength:25,loadSuggestions:{dataKey:"demo",field:"field1",filter:"localeUpperCase"}},{type:"varchar",name:"field2",label:"Field 2",mandatory:!0,maxLength:25},{type:"boolean",name:"fieldbool",label:"Boolean",mandatory:!1},{type:"date",name:"fielddate",label:"Date",mandatory:!1,defaultToToday:!0,maxToToday:!0},{type:"integer",name:"fieldinteger",label:"Integer",mandatory:!1,min:0,max:100},{type:"float",name:"fieldfloat",label:"Float",mandatory:!1,min:0,max:100,step:.2},{type:"radio",name:"fieldradio",label:"Radio",mandatory:!1,options:[{label:"Option 1",value:"o1"},{label:"Option 2",value:"o2"}]},{type:"select",name:"fieldselect",label:"Select",mandatory:!1,options:[{label:"Option 1",value:"o1"},{label:"Option 2",value:"o2"}]},{type:"text",name:"fieldtext",mandatory:!1,label:"Text"}]},r.save={type:"save",label:"Save",key:"demo",primaryKey:"rowid",labelKey:"Demo",saveUntil:"form",goto:"show"},r.compute={type:"compute",goto:"show",label:"compute",computeUntil:"init",func:function(e,t){return{label:"Compute",name:"rowid",value:"1"}}},r.show={type:"show",label:"Show",key:"demo",primaryKey:"rowid",fields:[{type:"varchar",label:"Field 1",name:"field1"},{type:"varchar",label:"Field 2",name:"field2"}]};var i=new q("Demo",o,null!==(n=e.attr("data-user-id"))&&void 0!==n?n:"",!0,r);i.init(e),window.pickupMobileMachine=i}(a)}))})()})();
//# sourceMappingURL=mobile.js.map